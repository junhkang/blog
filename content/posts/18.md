---
title: '[AWS] Elastic IP (탄력적 IP)의 개념 및 적용'
date: '2023-10-09 14:41:55'
categories: ['AWS']
tags: ['AWS', 'eip', 'Elastic']
---

------------------------------------------------------------------------

![](/images/posts/18/img.png)

## 1. Elastic IP (탄력적 IP) 란? {#elastic-ip-탄력적-ip-란 ke-size="size26"}

EIP(Elastic Ip Address)란 인터넷으로 접속이 가능한 공인 IP를 할당하여, 인스턴스에 탈부착할 수 있는 서비스이다. 인스턴스 혹은 네트워크 인터페이스에 연결이 가능하며 삭제 전까지 해당 IP를 유지할 수 있다.
 

EC2 인스턴스 생성 시 공인 IP 사용 설정을 Enable로 변경 (default는 Disable)할 경우 인스턴스 자체에 공인 IP를 할당받을 수 있는데 왜 굳이 Elastic IP를 사용하는 것일까?

![](/images/posts/18/스크린샷%202023-10-09%20오후%201.56.51.png)

인스턴스가 stop 후 재시작될 경우 공인 IP가 변경되는 경우가 발생한다. 인스턴스 자체의 공인 IP가 변경될 경우 큰 문제로 이어질 수 있어

**EIP를 인스턴스에 연결함으로써 인스턴스의 공인IP를 고정시켜 준다.**

## 2. Elastic IP 개념 및 특징 {#elastic-ip-개념-및-특징 style="color: #000000; text-align: start;" ke-size="size26"}

-   탄력적 IP 주소는 정적이며 시간이 지남에 따라 변경되지 않는다.
-   탄력적 IP 주소는 특정 리전에서만 사용할 수 있으며 다른 리전으로 이전할 수 없다.
-   IPv4 주소의 Amazon 풀 또는 AWS 계정으로 가져온 사용자 지정 IPv4 주소 풀에서 탄력적 IP 주소를 할당할 수 있다. (3-3. EIP 옵션 설정 시 선택 가능)
-   탄력적 IP 주소를 사용하려면 먼저 계정에 주소를 할당한 후 인스턴스 또는 네트워크 인터페이스와 연결해야 한다.(3-6. 인스턴스 할당)
-   탄력적 IP 주소는 리소스에서 연결 해제했다가 다른 리소스와 다시 연결할 수 있다. 예기치 않은 동작을 방지하려면 변경하기 전에 기존 연결에 이름이 지정된 리소스에 대한 모든 활성 연결이 닫혀 있는지 확인해야 한다. 탄력적 IP 주소를 다른 리소스에 연결한 후 새로 연결된 리소스에 대한 연결을 다시 열 수 있다.
-   연결 해제한 Elastic IP 주소는 명시적으로 릴리스(삭제)할 때까지 계정에 할당되어 있기 때문에 실행 중인 인스턴스와 연결되지 않은 탄력적 IP 주소에 대해서는 소액의 시간당 요금이 부과된다 (2. 요금 항목 참고).
-   탄력적 IP 주소를 이전에 퍼블릭 IPv4 주소가 있던 인스턴스와 연결하면 인스턴스의 퍼블릭 DNS 호스트 이름이 탄력적 IP 주소에 맞게 변경된다.
-   Amazon은 퍼블릭 DNS 호스트 이름을 인스턴스 네트워크 외부에서는 인스턴스의 퍼블릭 IPv4 주소 또는 탄력적 IP 주소로 변환하고, 인스턴스 네트워크 내부에서는 인스턴스의 프라이빗 IPv4 주소로 변환한다.
-   AWS 계정으로 가져온 IP 주소 풀에서 탄력적 IP 주소를 할당하는 경우 해당 IP 주소는 탄력적 IP 주소 한도에 포함되지 않는다. 
-   탄력적 IP 주소는 특정 네트워크 경계 그룹에서만 사용할 수 있다.

퍼블릭(IPv4) 인터넷 주소는 흔치 않은 퍼블릭 리소스 이기 때문에 지역당 5개로 제한되며, 인스턴스 장애 시 주소를 다른 인스턴스로 다시 매핑하는 기능이 필요할때는 EIP를 주로 사용하고, 다른 모든 노드 간 통신은 DNS 호스트명을 사용하는 것을 권장한다. (사용개수 제한은 AWS에 별도 문의하여 최대 사용량을 증가시킬 수 있다.)

## 3. 요금 {#요금 ke-size="size26"}

-   실행 중인 인스턴스와 연결된 각 추가 IP 주소에 대해 시간당 0.005 USD(비례 할당으로 계산)
-   실행 중인 인스턴스와 연결되지 않은 각 탄력적 IP 주소에 대해 시간당 0.005 USD(비례 할당으로 계산)
-   매달 처음 100개의 재매핑에 대해 탄력적 IP 주소 재 매핑당 0.00 USD
-   매달 100개 이후의 재매핑에 대해 탄력적 IP 주소 재 매핑당 0.10 USD

상세 요금은 다음 공식 링크에서 확인 가능하다.

https://aws.amazon.com/ec2/pricing/on-demand/

4. 적용

#### 4-1. EC2 메뉴에서 Elastic IPs 선택 {#ec2-메뉴에서-elastic-ips-선택 ke-size="size20"}

![](/images/posts/18/스크린샷%202023-10-09%20오후%202.00.56.png)

#### 4-2. Allocate Elastic IP address 선택 {#allocate-elastic-ip-address-선택 ke-size="size20"}

![](/images/posts/18/스크린샷%202023-10-09%20오후%202.02.17.png)

### 4-3. 네트워크 경계그룹, IP주소 풀 선택 후 \"Allocate\"선택 {#네트워크-경계그룹-ip주소-풀-선택-후-allocate선택 ke-size="size23"}

#### 4-3-1. 네트워크 경계 그룹 {#네트워크-경계-그룹 ke-size="size20"}

AWS가 Public 주소를 알리는 가용영역, Local Zone 또는 Wavelength Zone의 집합이다. Local Zone 및 Wavelength Zone은 AWS 네트워크와 해당 영역의 리소스에 액세스 하는 고객 간의 지연 시간 또는 물리적 거리를 최소화하기 위해 리전의 AZ와 다른 네트워크 경계 그룹을 가질 수 있다.

**[주의 : EIP와 연결될 AWS 리소스는 동일한 네트워크 경계 그룹에 할당되어야 한다.]**
 

#### 4-3-2. Public IPv4 address pool

-   **\[Amazon의 IP 주소 풀(Amazon\'s pool of IPv4 addresses)\]** - 특별한 경우가 아니라면 해당 옵션을 선택하여 공인 IP를 할당받으면 된다. IPv4 주소를 Amazon의 IPv4 주소 풀에서 할당하려는 경우이다.
-   **AWS 계정으로 가져오는 퍼블릭 IPv4 주소** - AWS 계정으로 가져온 IP 주소 풀에서 IPv4 주소를 할당하려는 경우. IP 주소 풀이 없는 경우에는 이 옵션을 사용할 수 없다.
-   **[고객 소유 IPv4 주소 풀(Customer owned pool of IPv4 addresses)]** - AWS Outpost를 통해 사용할 온프레미스 네트워크에서 생성된 풀에서 IPv4 주소를 할당하려는 경우. AWS Outposts가 없는 경우 이 옵션이 비활성화된다.

![](/images/posts/18/스크린샷%202023-10-09%20오후%202.03.46.png)

### 4-4. EIP 생성이 완료되면 리스트에서 확인이 가능하며, 인스턴스 할당을 위해서 해당 항목을 클릭하여 상세 페이지로 들아간다. {#eip-생성이-완료되면-리스트에서-확인이-가능하며-인스턴스-할당을-위해서-해당-항목을-클릭하여-상세-페이지로-들아간다. ke-size="size23"}

![](/images/posts/18/스크린샷%202023-10-09%20오후%202.04.45.png)

### 4-5. EIP 상세에서 우측 상단 \"Associate Elastic IP address\"를 선택한다.  {#eip-상세에서-우측-상단-associate-elastic-ip-address를-선택한다. ke-size="size23"}

![](/images/posts/18/img_1.png)

### 4-6. AWS 인스턴스와 연결하고 싶다면 인스턴스를 선택, 특정 사설(private) ip와 연결하고 싶다면 IP주소를 입력하면 된다. {#aws-인스턴스와-연결하고-싶다면-인스턴스를-선택-특정-사설private-ip와-연결하고-싶다면-ip주소를-입력하면-된다. ke-size="size23"}

\"Allow this Elastic IP address to be reassociated\" 옵션을 선택하면 해당 EIP를 할당 후 다른 인스턴스로 변경이 가능하다.

![](/images/posts/18/img_2.png)

참고

- https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html

