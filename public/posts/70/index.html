<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[PostgreSQL] Index-Only Ïä§Ï∫îÍ≥º Covering Ïù∏Îç±Ïä§, Index-onlyÏä§Ï∫îÏùò Ìö®Ïú®Ï†ÅÏù∏ ÏÇ¨Ïö© | Jun Kang's Blog</title>
<meta name=keywords content="PostgreSQL,Covering,Index-only"><meta name=description content='
1. Index-Only Scans
PostgreSQLÏùò Î™®Îì† Ïù∏Îç±Ïä§Îäî "Î≥¥Ï°∞(Secondary)" Ïù∏Îç±Ïä§Ïù¥Îã§. Í∞Å Ïù∏Îç±Ïä§Îäî ÌÖåÏù¥Î∏îÏùò Î©îÏù∏ Îç∞Ïù¥ÌÑ∞ ÏòÅÏó≠(ÌÖåÏù¥Î∏îÏùò heap ÏòÅÏó≠)Í≥º Î∂ÑÎ¶¨ÎêòÏñ¥ÏÑú Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê ÏùºÎ∞òÏ†ÅÏù∏ Ïù∏Îç±Ïä§ Ïä§Ï∫îÏóêÏÑú Í∞Å ROWÎ•º Ï∞æÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, indexÏôÄ heap ÏòÅÏó≠ Î™®ÎëêÏóê Ï†ëÍ∑ºÌïòÏó¨ Îç∞Ïù¥ÌÑ∞Î•º ÌÉêÏÉâÌï¥Ïïº ÌïúÎã§. Î≥¥ÌÜµ WHERE Ï†à Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÎäî Îç∞Ïù¥ÌÑ∞Îì§ÏùÄ

Ïù∏Îç±Ïä§ ÏòÅÏó≠ - ÏÑúÎ°ú Í∞ÄÍπåÏù¥ Ï°¥Ïû¨ÌïòÏó¨ Ï†ïÎ†¨Îêú ÏàúÏÑúÎ°ú Îπ†Î•¥Í≤å Ï†ëÍ∑ºÌï† Ïàò ÏûàÎã§. (Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùÄ Ï†ïÎ†¨Îêú ÏÉÅÌÉúÎ°ú ÏÉùÏÑ±)
heap ÏòÅÏó≠ -¬† ÌäπÎ≥ÑÌïú Í∑úÏπô ÏóÜÏù¥ Ïñ¥ÎîîÏóêÏÑúÎì† Î∂ÑÌè¨Ìï† Ïàò ÏûàÍ∏∞Ïóê heap ÏòÅÏó≠ÏùÑ Ïä§Ï∫îÌï† ÎïåÎäî Î¨¥ÏûëÏúÑÎ°ú Ï†ëÍ∑ºÌïòÍ≤å ÎêòÏñ¥ ÏÜçÎèÑÍ∞Ä ÎäêÎ¶¨Îã§.

Ïù¥ ÌçºÌè¨Î®ºÏä§ Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ PostgreSQLÏùÄ Ìûô ÏòÅÏó≠Ïóê ÎåÄÌïú Ï†ëÍ∑º ÏóÜÏù¥ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌïòÎäî Index-only Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïúÎã§. Í∏∞Î≥∏ Í∞úÎÖêÏùÄ Îßê Í∑∏ÎåÄÎ°ú heap ÏòÅÏó≠Ïùò Ï∞∏Ï°∞ ÏóÜÏù¥ index Ìï≠Î™©ÏóêÏÑú Î∞îÎ°ú Í∞íÏùÑ Î∞òÌôòÌïòÎäî Í≤ÉÏúºÎ°ú Îß§Ïö∞ Ìö®Ïú®Ï†ÅÏúºÎ°ú Î≥¥Ïù¥ÏßÄÎßå Î™á Í∞ÄÏßÄ Ï†úÌïúÏÇ¨Ìï≠Ïù¥ ÏûàÎã§.'><meta name=author content="Jun Kang"><link rel=canonical href=https://junhkang.com/posts/70/><meta name=google-site-verification content="G-PV53RL6R3L"><link crossorigin=anonymous href=/assets/css/stylesheet.74700298e7318c6a254db46da1e4db20401442caa2ca390299eb96ba781bad05.css integrity="sha256-dHACmOcxjGolTbRtoeTbIEAUQsqiyjkCmeuWungbrQU=" rel="preload stylesheet" as=style><link rel=icon href=https://junhkang.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://junhkang.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://junhkang.com/favicon-32x32.png><link rel=apple-touch-icon href=https://junhkang.com/apple-touch-icon.png><link rel=mask-icon href=https://junhkang.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://junhkang.com/posts/70/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>.social-icons{display:flex;align-items:center;gap:15px;margin-top:15px}.profile-visitor-count{display:flex;align-items:center;margin-left:auto;padding:6px 10px;background-color:var(--entry);border-radius:6px;font-size:.9em;color:var(--secondary);border:1px solid var(--border);transition:all .3s ease;gap:6px;text-decoration:none}.profile-visitor-count:hover{transform:translateY(-2px);box-shadow:0 2px 8px rgba(0,0,0,.1);text-decoration:none}.visitor-label{display:flex;align-items:center;gap:4px}@media screen and (max-width:768px){.social-icons{flex-wrap:wrap;justify-content:center}.profile-visitor-count{margin-left:0;margin-top:10px}}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=window.location.pathname;if(e==="/"){{const e=document.querySelector(".social-icons");if(e){const t=document.createElement("a");t.href="https://hits.sh/junhkang.com/",t.target="_blank",t.className="profile-visitor-count",t.innerHTML=`
                <span class="visitor-label">üë• Ï¥ù Î∞©Î¨∏Ïûê</span>
                <img alt="Î∞©Î¨∏Ïûê" src="https://hits.sh/junhkang.com.svg?view=today-total&style=flat-square&label=&color=000000&labelColor=ffffff&background=ffffff"/>
            `,e.appendChild(t)}}}else{const e=document.createElement("img");e.style.opacity="0",e.style.position="absolute",e.style.pointerEvents="none",e.src="https://hits.sh/junhkang.com.svg?view=today-total&style=flat-square",document.body.appendChild(e)}})</script><meta property="og:type" content="article"><meta property="og:url" content="https://junhkang.com/posts/70/"><meta property="og:title" content="[PostgreSQL] Index-Only Ïä§Ï∫îÍ≥º Covering Ïù∏Îç±Ïä§, Index-onlyÏä§Ï∫îÏùò Ìö®Ïú®Ï†ÅÏù∏ ÏÇ¨Ïö© | Jun Kang's Blog"><meta property="og:description" content='
1. Index-Only Scans
PostgreSQLÏùò Î™®Îì† Ïù∏Îç±Ïä§Îäî "Î≥¥Ï°∞(Secondary)" Ïù∏Îç±Ïä§Ïù¥Îã§. Í∞Å Ïù∏Îç±Ïä§Îäî ÌÖåÏù¥Î∏îÏùò Î©îÏù∏ Îç∞Ïù¥ÌÑ∞ ÏòÅÏó≠(ÌÖåÏù¥Î∏îÏùò heap ÏòÅÏó≠)Í≥º Î∂ÑÎ¶¨ÎêòÏñ¥ÏÑú Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê ÏùºÎ∞òÏ†ÅÏù∏ Ïù∏Îç±Ïä§ Ïä§Ï∫îÏóêÏÑú Í∞Å ROWÎ•º Ï∞æÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, indexÏôÄ heap ÏòÅÏó≠ Î™®ÎëêÏóê Ï†ëÍ∑ºÌïòÏó¨ Îç∞Ïù¥ÌÑ∞Î•º ÌÉêÏÉâÌï¥Ïïº ÌïúÎã§. Î≥¥ÌÜµ WHERE Ï†à Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÎäî Îç∞Ïù¥ÌÑ∞Îì§ÏùÄ

Ïù∏Îç±Ïä§ ÏòÅÏó≠ - ÏÑúÎ°ú Í∞ÄÍπåÏù¥ Ï°¥Ïû¨ÌïòÏó¨ Ï†ïÎ†¨Îêú ÏàúÏÑúÎ°ú Îπ†Î•¥Í≤å Ï†ëÍ∑ºÌï† Ïàò ÏûàÎã§. (Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùÄ Ï†ïÎ†¨Îêú ÏÉÅÌÉúÎ°ú ÏÉùÏÑ±)
heap ÏòÅÏó≠ -¬† ÌäπÎ≥ÑÌïú Í∑úÏπô ÏóÜÏù¥ Ïñ¥ÎîîÏóêÏÑúÎì† Î∂ÑÌè¨Ìï† Ïàò ÏûàÍ∏∞Ïóê heap ÏòÅÏó≠ÏùÑ Ïä§Ï∫îÌï† ÎïåÎäî Î¨¥ÏûëÏúÑÎ°ú Ï†ëÍ∑ºÌïòÍ≤å ÎêòÏñ¥ ÏÜçÎèÑÍ∞Ä ÎäêÎ¶¨Îã§.

Ïù¥ ÌçºÌè¨Î®ºÏä§ Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ PostgreSQLÏùÄ Ìûô ÏòÅÏó≠Ïóê ÎåÄÌïú Ï†ëÍ∑º ÏóÜÏù¥ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌïòÎäî Index-only Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïúÎã§. Í∏∞Î≥∏ Í∞úÎÖêÏùÄ Îßê Í∑∏ÎåÄÎ°ú heap ÏòÅÏó≠Ïùò Ï∞∏Ï°∞ ÏóÜÏù¥ index Ìï≠Î™©ÏóêÏÑú Î∞îÎ°ú Í∞íÏùÑ Î∞òÌôòÌïòÎäî Í≤ÉÏúºÎ°ú Îß§Ïö∞ Ìö®Ïú®Ï†ÅÏúºÎ°ú Î≥¥Ïù¥ÏßÄÎßå Î™á Í∞ÄÏßÄ Ï†úÌïúÏÇ¨Ìï≠Ïù¥ ÏûàÎã§.'><meta property="og:image" content="https://junhkang.com/images/og_img.jpg"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://junhkang.com/posts/70/"><meta property="twitter:title" content="[PostgreSQL] Index-Only Ïä§Ï∫îÍ≥º Covering Ïù∏Îç±Ïä§, Index-onlyÏä§Ï∫îÏùò Ìö®Ïú®Ï†ÅÏù∏ ÏÇ¨Ïö© | Jun Kang's Blog"><meta property="twitter:description" content='
1. Index-Only Scans
PostgreSQLÏùò Î™®Îì† Ïù∏Îç±Ïä§Îäî "Î≥¥Ï°∞(Secondary)" Ïù∏Îç±Ïä§Ïù¥Îã§. Í∞Å Ïù∏Îç±Ïä§Îäî ÌÖåÏù¥Î∏îÏùò Î©îÏù∏ Îç∞Ïù¥ÌÑ∞ ÏòÅÏó≠(ÌÖåÏù¥Î∏îÏùò heap ÏòÅÏó≠)Í≥º Î∂ÑÎ¶¨ÎêòÏñ¥ÏÑú Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê ÏùºÎ∞òÏ†ÅÏù∏ Ïù∏Îç±Ïä§ Ïä§Ï∫îÏóêÏÑú Í∞Å ROWÎ•º Ï∞æÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, indexÏôÄ heap ÏòÅÏó≠ Î™®ÎëêÏóê Ï†ëÍ∑ºÌïòÏó¨ Îç∞Ïù¥ÌÑ∞Î•º ÌÉêÏÉâÌï¥Ïïº ÌïúÎã§. Î≥¥ÌÜµ WHERE Ï†à Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÎäî Îç∞Ïù¥ÌÑ∞Îì§ÏùÄ

Ïù∏Îç±Ïä§ ÏòÅÏó≠ - ÏÑúÎ°ú Í∞ÄÍπåÏù¥ Ï°¥Ïû¨ÌïòÏó¨ Ï†ïÎ†¨Îêú ÏàúÏÑúÎ°ú Îπ†Î•¥Í≤å Ï†ëÍ∑ºÌï† Ïàò ÏûàÎã§. (Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùÄ Ï†ïÎ†¨Îêú ÏÉÅÌÉúÎ°ú ÏÉùÏÑ±)
heap ÏòÅÏó≠ -¬† ÌäπÎ≥ÑÌïú Í∑úÏπô ÏóÜÏù¥ Ïñ¥ÎîîÏóêÏÑúÎì† Î∂ÑÌè¨Ìï† Ïàò ÏûàÍ∏∞Ïóê heap ÏòÅÏó≠ÏùÑ Ïä§Ï∫îÌï† ÎïåÎäî Î¨¥ÏûëÏúÑÎ°ú Ï†ëÍ∑ºÌïòÍ≤å ÎêòÏñ¥ ÏÜçÎèÑÍ∞Ä ÎäêÎ¶¨Îã§.

Ïù¥ ÌçºÌè¨Î®ºÏä§ Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ PostgreSQLÏùÄ Ìûô ÏòÅÏó≠Ïóê ÎåÄÌïú Ï†ëÍ∑º ÏóÜÏù¥ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌïòÎäî Index-only Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïúÎã§. Í∏∞Î≥∏ Í∞úÎÖêÏùÄ Îßê Í∑∏ÎåÄÎ°ú heap ÏòÅÏó≠Ïùò Ï∞∏Ï°∞ ÏóÜÏù¥ index Ìï≠Î™©ÏóêÏÑú Î∞îÎ°ú Í∞íÏùÑ Î∞òÌôòÌïòÎäî Í≤ÉÏúºÎ°ú Îß§Ïö∞ Ìö®Ïú®Ï†ÅÏúºÎ°ú Î≥¥Ïù¥ÏßÄÎßå Î™á Í∞ÄÏßÄ Ï†úÌïúÏÇ¨Ìï≠Ïù¥ ÏûàÎã§.'><meta property="twitter:image" content="https://junhkang.com/images/og_img.jpg"><script async src="https://www.googletagmanager.com/gtag/js?id=G-PV53RL6R3L"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PV53RL6R3L")}</script><meta property="og:url" content="https://junhkang.com/posts/70/"><meta property="og:site_name" content="Jun Kang's Blog"><meta property="og:title" content="[PostgreSQL] Index-Only Ïä§Ï∫îÍ≥º Covering Ïù∏Îç±Ïä§, Index-onlyÏä§Ï∫îÏùò Ìö®Ïú®Ï†ÅÏù∏ ÏÇ¨Ïö©"><meta property="og:description" content=' 1. Index-Only Scans PostgreSQLÏùò Î™®Îì† Ïù∏Îç±Ïä§Îäî "Î≥¥Ï°∞(Secondary)" Ïù∏Îç±Ïä§Ïù¥Îã§. Í∞Å Ïù∏Îç±Ïä§Îäî ÌÖåÏù¥Î∏îÏùò Î©îÏù∏ Îç∞Ïù¥ÌÑ∞ ÏòÅÏó≠(ÌÖåÏù¥Î∏îÏùò heap ÏòÅÏó≠)Í≥º Î∂ÑÎ¶¨ÎêòÏñ¥ÏÑú Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê ÏùºÎ∞òÏ†ÅÏù∏ Ïù∏Îç±Ïä§ Ïä§Ï∫îÏóêÏÑú Í∞Å ROWÎ•º Ï∞æÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, indexÏôÄ heap ÏòÅÏó≠ Î™®ÎëêÏóê Ï†ëÍ∑ºÌïòÏó¨ Îç∞Ïù¥ÌÑ∞Î•º ÌÉêÏÉâÌï¥Ïïº ÌïúÎã§. Î≥¥ÌÜµ WHERE Ï†à Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÎäî Îç∞Ïù¥ÌÑ∞Îì§ÏùÄ
Ïù∏Îç±Ïä§ ÏòÅÏó≠ - ÏÑúÎ°ú Í∞ÄÍπåÏù¥ Ï°¥Ïû¨ÌïòÏó¨ Ï†ïÎ†¨Îêú ÏàúÏÑúÎ°ú Îπ†Î•¥Í≤å Ï†ëÍ∑ºÌï† Ïàò ÏûàÎã§. (Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùÄ Ï†ïÎ†¨Îêú ÏÉÅÌÉúÎ°ú ÏÉùÏÑ±) heap ÏòÅÏó≠ -¬†ÌäπÎ≥ÑÌïú Í∑úÏπô ÏóÜÏù¥ Ïñ¥ÎîîÏóêÏÑúÎì† Î∂ÑÌè¨Ìï† Ïàò ÏûàÍ∏∞Ïóê heap ÏòÅÏó≠ÏùÑ Ïä§Ï∫îÌï† ÎïåÎäî Î¨¥ÏûëÏúÑÎ°ú Ï†ëÍ∑ºÌïòÍ≤å ÎêòÏñ¥ ÏÜçÎèÑÍ∞Ä ÎäêÎ¶¨Îã§. Ïù¥ ÌçºÌè¨Î®ºÏä§ Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ PostgreSQLÏùÄ Ìûô ÏòÅÏó≠Ïóê ÎåÄÌïú Ï†ëÍ∑º ÏóÜÏù¥ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌïòÎäî Index-only Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïúÎã§. Í∏∞Î≥∏ Í∞úÎÖêÏùÄ Îßê Í∑∏ÎåÄÎ°ú heap ÏòÅÏó≠Ïùò Ï∞∏Ï°∞ ÏóÜÏù¥ index Ìï≠Î™©ÏóêÏÑú Î∞îÎ°ú Í∞íÏùÑ Î∞òÌôòÌïòÎäî Í≤ÉÏúºÎ°ú Îß§Ïö∞ Ìö®Ïú®Ï†ÅÏúºÎ°ú Î≥¥Ïù¥ÏßÄÎßå Î™á Í∞ÄÏßÄ Ï†úÌïúÏÇ¨Ìï≠Ïù¥ ÏûàÎã§.'><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-13T18:52:22+00:00"><meta property="article:modified_time" content="2024-03-13T18:52:22+00:00"><meta property="article:tag" content="PostgreSQL"><meta property="article:tag" content="Covering"><meta property="article:tag" content="Index-Only"><meta name=twitter:card content="summary"><meta name=twitter:title content="[PostgreSQL] Index-Only Ïä§Ï∫îÍ≥º Covering Ïù∏Îç±Ïä§, Index-onlyÏä§Ï∫îÏùò Ìö®Ïú®Ï†ÅÏù∏ ÏÇ¨Ïö©"><meta name=twitter:description content='
1. Index-Only Scans
PostgreSQLÏùò Î™®Îì† Ïù∏Îç±Ïä§Îäî "Î≥¥Ï°∞(Secondary)" Ïù∏Îç±Ïä§Ïù¥Îã§. Í∞Å Ïù∏Îç±Ïä§Îäî ÌÖåÏù¥Î∏îÏùò Î©îÏù∏ Îç∞Ïù¥ÌÑ∞ ÏòÅÏó≠(ÌÖåÏù¥Î∏îÏùò heap ÏòÅÏó≠)Í≥º Î∂ÑÎ¶¨ÎêòÏñ¥ÏÑú Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê ÏùºÎ∞òÏ†ÅÏù∏ Ïù∏Îç±Ïä§ Ïä§Ï∫îÏóêÏÑú Í∞Å ROWÎ•º Ï∞æÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, indexÏôÄ heap ÏòÅÏó≠ Î™®ÎëêÏóê Ï†ëÍ∑ºÌïòÏó¨ Îç∞Ïù¥ÌÑ∞Î•º ÌÉêÏÉâÌï¥Ïïº ÌïúÎã§. Î≥¥ÌÜµ WHERE Ï†à Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÎäî Îç∞Ïù¥ÌÑ∞Îì§ÏùÄ

Ïù∏Îç±Ïä§ ÏòÅÏó≠ - ÏÑúÎ°ú Í∞ÄÍπåÏù¥ Ï°¥Ïû¨ÌïòÏó¨ Ï†ïÎ†¨Îêú ÏàúÏÑúÎ°ú Îπ†Î•¥Í≤å Ï†ëÍ∑ºÌï† Ïàò ÏûàÎã§. (Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùÄ Ï†ïÎ†¨Îêú ÏÉÅÌÉúÎ°ú ÏÉùÏÑ±)
heap ÏòÅÏó≠ -¬† ÌäπÎ≥ÑÌïú Í∑úÏπô ÏóÜÏù¥ Ïñ¥ÎîîÏóêÏÑúÎì† Î∂ÑÌè¨Ìï† Ïàò ÏûàÍ∏∞Ïóê heap ÏòÅÏó≠ÏùÑ Ïä§Ï∫îÌï† ÎïåÎäî Î¨¥ÏûëÏúÑÎ°ú Ï†ëÍ∑ºÌïòÍ≤å ÎêòÏñ¥ ÏÜçÎèÑÍ∞Ä ÎäêÎ¶¨Îã§.

Ïù¥ ÌçºÌè¨Î®ºÏä§ Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ PostgreSQLÏùÄ Ìûô ÏòÅÏó≠Ïóê ÎåÄÌïú Ï†ëÍ∑º ÏóÜÏù¥ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌïòÎäî Index-only Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïúÎã§. Í∏∞Î≥∏ Í∞úÎÖêÏùÄ Îßê Í∑∏ÎåÄÎ°ú heap ÏòÅÏó≠Ïùò Ï∞∏Ï°∞ ÏóÜÏù¥ index Ìï≠Î™©ÏóêÏÑú Î∞îÎ°ú Í∞íÏùÑ Î∞òÌôòÌïòÎäî Í≤ÉÏúºÎ°ú Îß§Ïö∞ Ìö®Ïú®Ï†ÅÏúºÎ°ú Î≥¥Ïù¥ÏßÄÎßå Î™á Í∞ÄÏßÄ Ï†úÌïúÏÇ¨Ìï≠Ïù¥ ÏûàÎã§.'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://junhkang.com/posts/"},{"@type":"ListItem","position":2,"name":"[PostgreSQL] Index-Only Ïä§Ï∫îÍ≥º Covering Ïù∏Îç±Ïä§, Index-onlyÏä§Ï∫îÏùò Ìö®Ïú®Ï†ÅÏù∏ ÏÇ¨Ïö©","item":"https://junhkang.com/posts/70/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[PostgreSQL] Index-Only Ïä§Ï∫îÍ≥º Covering Ïù∏Îç±Ïä§, Index-onlyÏä§Ï∫îÏùò Ìö®Ïú®Ï†ÅÏù∏ ÏÇ¨Ïö©","name":"[PostgreSQL] Index-Only Ïä§Ï∫îÍ≥º Covering Ïù∏Îç±Ïä§, Index-onlyÏä§Ï∫îÏùò Ìö®Ïú®Ï†ÅÏù∏ ÏÇ¨Ïö©","description":" 1. Index-Only Scans PostgreSQLÏùò Î™®Îì† Ïù∏Îç±Ïä§Îäî \u0026quot;Î≥¥Ï°∞(Secondary)\u0026quot; Ïù∏Îç±Ïä§Ïù¥Îã§. Í∞Å Ïù∏Îç±Ïä§Îäî ÌÖåÏù¥Î∏îÏùò Î©îÏù∏ Îç∞Ïù¥ÌÑ∞ ÏòÅÏó≠(ÌÖåÏù¥Î∏îÏùò heap ÏòÅÏó≠)Í≥º Î∂ÑÎ¶¨ÎêòÏñ¥ÏÑú Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê ÏùºÎ∞òÏ†ÅÏù∏ Ïù∏Îç±Ïä§ Ïä§Ï∫îÏóêÏÑú Í∞Å ROWÎ•º Ï∞æÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, indexÏôÄ heap ÏòÅÏó≠ Î™®ÎëêÏóê Ï†ëÍ∑ºÌïòÏó¨ Îç∞Ïù¥ÌÑ∞Î•º ÌÉêÏÉâÌï¥Ïïº ÌïúÎã§. Î≥¥ÌÜµ WHERE Ï†à Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÎäî Îç∞Ïù¥ÌÑ∞Îì§ÏùÄ\nÏù∏Îç±Ïä§ ÏòÅÏó≠ - ÏÑúÎ°ú Í∞ÄÍπåÏù¥ Ï°¥Ïû¨ÌïòÏó¨ Ï†ïÎ†¨Îêú ÏàúÏÑúÎ°ú Îπ†Î•¥Í≤å Ï†ëÍ∑ºÌï† Ïàò ÏûàÎã§. (Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùÄ Ï†ïÎ†¨Îêú ÏÉÅÌÉúÎ°ú ÏÉùÏÑ±) heap ÏòÅÏó≠ -¬†ÌäπÎ≥ÑÌïú Í∑úÏπô ÏóÜÏù¥ Ïñ¥ÎîîÏóêÏÑúÎì† Î∂ÑÌè¨Ìï† Ïàò ÏûàÍ∏∞Ïóê heap ÏòÅÏó≠ÏùÑ Ïä§Ï∫îÌï† ÎïåÎäî Î¨¥ÏûëÏúÑÎ°ú Ï†ëÍ∑ºÌïòÍ≤å ÎêòÏñ¥ ÏÜçÎèÑÍ∞Ä ÎäêÎ¶¨Îã§. Ïù¥ ÌçºÌè¨Î®ºÏä§ Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ PostgreSQLÏùÄ Ìûô ÏòÅÏó≠Ïóê ÎåÄÌïú Ï†ëÍ∑º ÏóÜÏù¥ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌïòÎäî Index-only Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïúÎã§. Í∏∞Î≥∏ Í∞úÎÖêÏùÄ Îßê Í∑∏ÎåÄÎ°ú heap ÏòÅÏó≠Ïùò Ï∞∏Ï°∞ ÏóÜÏù¥ index Ìï≠Î™©ÏóêÏÑú Î∞îÎ°ú Í∞íÏùÑ Î∞òÌôòÌïòÎäî Í≤ÉÏúºÎ°ú Îß§Ïö∞ Ìö®Ïú®Ï†ÅÏúºÎ°ú Î≥¥Ïù¥ÏßÄÎßå Î™á Í∞ÄÏßÄ Ï†úÌïúÏÇ¨Ìï≠Ïù¥ ÏûàÎã§.\n","keywords":["PostgreSQL","Covering","Index-only"],"articleBody":" 1. Index-Only Scans PostgreSQLÏùò Î™®Îì† Ïù∏Îç±Ïä§Îäî \"Î≥¥Ï°∞(Secondary)\" Ïù∏Îç±Ïä§Ïù¥Îã§. Í∞Å Ïù∏Îç±Ïä§Îäî ÌÖåÏù¥Î∏îÏùò Î©îÏù∏ Îç∞Ïù¥ÌÑ∞ ÏòÅÏó≠(ÌÖåÏù¥Î∏îÏùò heap ÏòÅÏó≠)Í≥º Î∂ÑÎ¶¨ÎêòÏñ¥ÏÑú Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê ÏùºÎ∞òÏ†ÅÏù∏ Ïù∏Îç±Ïä§ Ïä§Ï∫îÏóêÏÑú Í∞Å ROWÎ•º Ï∞æÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, indexÏôÄ heap ÏòÅÏó≠ Î™®ÎëêÏóê Ï†ëÍ∑ºÌïòÏó¨ Îç∞Ïù¥ÌÑ∞Î•º ÌÉêÏÉâÌï¥Ïïº ÌïúÎã§. Î≥¥ÌÜµ WHERE Ï†à Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÎäî Îç∞Ïù¥ÌÑ∞Îì§ÏùÄ\nÏù∏Îç±Ïä§ ÏòÅÏó≠ - ÏÑúÎ°ú Í∞ÄÍπåÏù¥ Ï°¥Ïû¨ÌïòÏó¨ Ï†ïÎ†¨Îêú ÏàúÏÑúÎ°ú Îπ†Î•¥Í≤å Ï†ëÍ∑ºÌï† Ïàò ÏûàÎã§. (Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùÄ Ï†ïÎ†¨Îêú ÏÉÅÌÉúÎ°ú ÏÉùÏÑ±) heap ÏòÅÏó≠ -¬†ÌäπÎ≥ÑÌïú Í∑úÏπô ÏóÜÏù¥ Ïñ¥ÎîîÏóêÏÑúÎì† Î∂ÑÌè¨Ìï† Ïàò ÏûàÍ∏∞Ïóê heap ÏòÅÏó≠ÏùÑ Ïä§Ï∫îÌï† ÎïåÎäî Î¨¥ÏûëÏúÑÎ°ú Ï†ëÍ∑ºÌïòÍ≤å ÎêòÏñ¥ ÏÜçÎèÑÍ∞Ä ÎäêÎ¶¨Îã§. Ïù¥ ÌçºÌè¨Î®ºÏä§ Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ PostgreSQLÏùÄ Ìûô ÏòÅÏó≠Ïóê ÎåÄÌïú Ï†ëÍ∑º ÏóÜÏù¥ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌïòÎäî Index-only Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïúÎã§. Í∏∞Î≥∏ Í∞úÎÖêÏùÄ Îßê Í∑∏ÎåÄÎ°ú heap ÏòÅÏó≠Ïùò Ï∞∏Ï°∞ ÏóÜÏù¥ index Ìï≠Î™©ÏóêÏÑú Î∞îÎ°ú Í∞íÏùÑ Î∞òÌôòÌïòÎäî Í≤ÉÏúºÎ°ú Îß§Ïö∞ Ìö®Ïú®Ï†ÅÏúºÎ°ú Î≥¥Ïù¥ÏßÄÎßå Î™á Í∞ÄÏßÄ Ï†úÌïúÏÇ¨Ìï≠Ïù¥ ÏûàÎã§.\nÏπºÎüºÏóê Ï†ÅÏö©Îêú Ïù∏Îç±Ïä§ Ïú†ÌòïÏù¥ Index-only Ïä§Ï∫îÏùÑ ÏßÄÏõêÌï¥Ïïº ÌïúÎã§. (B-treeÏù∏Îç±Ïä§Îäî Ïñ∏Ï†úÎÇò ÏßÄÏõêÌïòÍ≥†, GiST, SP-GiSTÎäî ÌäπÏ†ï Ïó∞ÏÇ∞ÏûêÏóê ÌïúÌï¥ÏÑúÎßå ÏßÄÏõê, ÎÇòÎ®∏ÏßÄ 3Í∞ÄÏßÄ Ïù∏Îç±Ïä§Îäî ÏßÄÏõêÌïòÏßÄ ÏïäÎäîÎã§.) Ïù∏Îç±Ïä§Í∞Ä Í∞Å Ìï≠Î™©Ïóê ÎåÄÌï¥ ÏõêÎûò Îç∞Ïù¥ÌÑ∞ Í∞íÏùÑ Î¨ºÎ¶¨Ï†ÅÏúºÎ°ú Ïò®Ï†ÑÌûà Ï†ÄÏû•ÌïòÍ±∞ÎÇò Ïû¨Íµ¨ÏÑ±Ìï† Ïàò ÏûàÏñ¥Ïïº ÌïúÎã§. ÏòàÎ•º Îì§Ïñ¥ GINÏù∏Îç±Ïä§Í∞Ä Index-only Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïòÏßÄ ÏïäÎäî Ïù¥Ïú†Îäî Í∞Å Ïù∏Îç±Ïä§Í∞Ä Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞Ïùò Î¨ºÎ¶¨Ï†ÅÏù∏ Í∞íÏù¥ ÏïÑÎãå ÏùºÎ∂Ä ÌäπÏßï (ex. ÏµúÎåÄ, ÏµúÏÜüÍ∞í)ÎßåÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÎäî Ïú†ÌòïÏùò Ïù∏Îç±Ïä§ Ïù¥Í∏∞ ÎïåÎ¨∏Ïù¥Îã§. Ïã§ÌñâÎêòÎäî ÏøºÎ¶¨Í∞Ä Ïù∏Îç±Ïä§Î°ú ÏÑ§Ï†ïÎêú ÏπºÎüºÎßåÏùÑ Ï°∞Í±¥Ï†àÏóê Ï∞∏Ï°∞Ìï¥Ïïº ÌïúÎã§. ÏòàÎ•º Îì§Ïñ¥ x, yÏπºÎüºÏóê Ïù∏Îç±Ïä§Í∞Ä ÏÑ§Ï†ïÎêòÏñ¥ ÏûàÍ≥†, z ÏπºÎüºÏóê Ïù∏Îç±Ïä§Í∞Ä ÏÑ§Ï†ïÎêòÏñ¥ ÏûàÏßÄ ÏïäÎã§Î©¥, Îã§Ïùå ÏøºÎ¶¨Îäî index-only Ïä§Ï∫îÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎã§. SELECT x, y FROM tab WHERE x = 'key'; SELECT x FROM tab WHERE x = 'key' AND y \u003c 42; Î∞òÎ©¥Ïóê Îã§Ïùå ÏøºÎ¶¨Îäî Ïù∏Îç±Ïä§Í∞Ä Ï†ÅÏö©ÎêòÏßÄ ÏïäÏùÄ z ÏπºÎüºÏù¥ Ï°∞Í±¥Ï†à, ÌòπÏùÄ targetÏóê Ìè¨Ìï®ÎêòÏñ¥ ÏûàÍ∏∞Ïóê index-only Ïä§Ï∫î ÏÇ¨Ïö©Ïù¥ Î∂àÍ∞ÄÎä•ÌïòÎã§.\nSELECT x, z FROM tab WHERE x = 'key'; SELECT x FROM tab WHERE x = 'key' AND z \u003c 42; Ïù¥ Ï°∞Í±¥Îì§Ïóê Î∂ÄÌï©ÌïòÎ©¥, ÏøºÎ¶¨Ïùò Í≤∞Í≥ºÏóê Ìï¥ÎãπÌïòÎäî Îç∞Ïù¥ÌÑ∞Í∞Ä Ïù∏Îç±Ïä§ ÏòÅÏó≠ ÎÇ¥Ïóê Î™®Îëê Ï°¥Ïû¨ÌïúÎã§Îäî Í≤ÉÏù¥Í∏∞Ïóê Index-only Ïä§Ï∫îÏù¥ Í∞ÄÎä•ÌïòÎã§.¬†2. Visiblity ÏúÑÏùò Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÏó¨ Index-only Ïä§Ï∫îÏù¥ Í∞ÄÎä•ÌïòÎçîÎùºÎèÑ, Ìö®Ïú®Ï†ÅÏù∏ Ïä§Ï∫îÏùÑ ÏúÑÌï¥ PostgreSQLÏóêÏÑúÎäî ÌÖåÏù¥Î∏î Í≤ÄÏÉâÏóê ÎåÄÌïú Ï∂îÍ∞Ä ÏöîÍµ¨ ÏÇ¨Ìï≠Ïù¥ ÏûàÎã§. Î∞îÎ°ú Í≤ÄÏÉâ Í≤∞Í≥ºÏùò Í∞Å ROWÍ∞Ä ÏøºÎ¶¨Ïùò MVCC Ïä§ÎÉÖÏàèÏóê \"Î≥¥Ïù¥ÎäîÏßÄ(visible)\"Ïù¥Îã§. MVCCÎäî PostgreSQLÏóêÏÑú ÎèôÏãúÏÑ±ÏùÑ ÏßÄÏõêÌïòÎäî ÏõêÏπôÏù¥Î©∞ (ÏÉÅÏÑ∏ ÎÇ¥Ïö©ÏùÄ Îã§Ïùå ÎßÅÌÅ¨ Ï∞∏Í≥† -\n[PostgreSQL] MVCC (Multi-Version Concurrency Control))\nVisiblity -¬†Ìï¥Îãπ ÏøºÎ¶¨Í∞Ä Ïã§ÌñâÎêòÎäî ÏãúÏ†êÏóêÏÑú Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Ïùò ÏÉÅÌÉú, ÌòπÏùÄ Ïä§ÎÉÖÏàèÏóê Îî∞Îùº Ìï¥Îãπ ÏøºÎ¶¨Ïóê ÏùòÌï¥ Í≤∞Í≥º Îç∞Ïù¥ÌÑ∞Í∞Ä Ï°∞Ìöå, ÌòπÏùÄ Ï°∞ÏûëÎê† Ïàò ÏûàÎäîÏßÄÏùò ÏùòÎØ∏Ïù¥Îã§. (Îã§Î•∏ Ìä∏ÎûúÏû≠ÏÖòÏóê ÏùòÌï¥ ÏÇ≠Ï†úÎêòÍ±∞ÎÇò ÏàòÏ†ïÎêòÏßÄ ÏïäÏùÄ Ïú†Ìö®Ìïú Îç∞Ïù¥ÌÑ∞Í∞Ä Î∞òÌôòÎê† Ïàò ÏûàÎäîÏßÄÎ•º ÏùòÎØ∏ÌïúÎã§.)\nPostgreSQLÏùÄ ÌÖåÏù¥Î∏î heapÏùò Í∞Å ÌéòÏù¥ÏßÄÏóê ÎåÄÌï¥ Î™®Îì† ROWSÍ∞Ä ÌòÑÏû¨, ÎØ∏ÎûòÏùò Î™®Îì† Ìä∏ÎûúÏû≠ÏÖòÏóêÏÑú Î≥º Ïàò ÏûàÏùÑ ÎßåÌÅº Ïò§ÎûòÎêòÏóàÎäîÏßÄ Ïó¨Î∂ÄÎ•º Ï∂îÏ†ÅÌïúÌïòÏó¨ Ïù¥ Ï†ïÎ≥¥Î•º ÌÖåÏù¥Î∏îÏùò Visiblity mapÏóê bit ÌòïÌÉúÎ°ú Ï†ÄÏû•ÌïúÎã§. ÌïòÏßÄÎßå ÏÑ§Î™ÖÏùÑ Î≥¥Î©¥ Visiblity Ï†ïÎ≥¥Îäî Ïù∏Îç±Ïä§ ÏòÅÏó≠Ïù¥ ÏïÑÎãå heapÏòÅÏó≠ÏóêÎßå Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÎã§Î©¥ VisiblityÎ•º Ï°∞ÌöåÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî heapÏòÅÏó≠ÏùÑ Î¨¥Ï°∞Í±¥ Ï°∞ÌöåÌï¥Ïïº ÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãåÍ∞Ä?ÎùºÎäî ÏùòÎ¨∏Ïù¥ Îì§Í≤ÉÏù¥Îã§. ÌÖåÏù¥Î∏î ROWSÍ∞Ä ÏµúÍ∑ºÏóê Î≥ÄÍ≤ΩÎêú Í≤ΩÏö∞ÏóêÎäî Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏù¥ ÏóÖÎç∞Ïù¥Ìä∏ÎêòÍ∏∞ Ï†ÑÏùºÌÖåÎãà ÎãπÏó∞Ìûà Îß§Î≤à heap ÏòÅÏó≠ÏùÑ Ï°∞ÌöåÌï¥Ïïº ÌïòÏßÄÎßå, Î≥ÄÍ≤ΩÏù¥ Ïû¶ÏßÄ ÏïäÏùÄ Îç∞Ïù¥ÌÑ∞Ïùò Í≤ΩÏö∞ Ïù¥ Î¨∏Ï†úÎ•º Ìï¥Í≤∞Ìï† Ïàò ÏûàÎäî Î∞©Î≤ïÏù¥ ÏûàÎã§. Index-only Ïä§Ï∫îÏùÄ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑú Îç∞Ïù¥ÌÑ∞Î•º Ï∞æÏùÄ ÌõÑ Í∑∏Ïóê Ìï¥ÎãπÌïòÎäî Visiblity map bitÎßåÏùÑ ÌôïÏù∏ÌïòÏó¨ heapÏòÅÏó≠Ïùò Ìï¥Îãπ pageÎ•º Ï∞æÎäîÎã§.\nÎç∞Ïù¥ÌÑ∞Í∞Ä ÌôïÏù∏ÎêòÎ©¥ - Î¨ºÎ¶¨Ï†ÅÏù∏ Îç∞Ïù¥ÌÑ∞Î•º Ï∞æÏùÑ Ïàò ÏûàÍ∏∞Ïóê Ï∂îÍ∞ÄÏ†ÅÏù∏ ÏûëÏóÖÏùÄ ÌïÑÏöî ÏóÜÎã§. Îç∞Ïù¥ÌÑ∞Í∞Ä ÌôïÏù∏ÎêòÏßÄ ÏïäÎäîÎã§Î©¥ -¬†Îç∞Ïù¥ÌÑ∞Ïùò VisiblityÎ•º ÌôïÏù∏ÏùÑ ÏúÑÌï¥ heap ÏòÅÏó≠ÏùÑ Ï†ëÍ∑ºÌï¥Ïïº ÌïòÍ∏∞Ïóê ÌëúÏ§Ä Ïù∏Îç±Ïä§ Ïä§Ï∫îÎ≥¥Îã§ ÏÑ±Îä•Ïù¥ Ìñ•ÏÉÅÎêòÏßÄ ÏïäÎäîÎã§. ÏÑ±Í≥µÏ†ÅÏúºÎ°ú visiblity map bitÎ•º Ï∞æÎçîÎùºÎèÑ Ïù¥ Î∞©ÏãùÏùÄ Visiblity mapÏùÑ Ï°∞ÌöåÌï¥Ïïº ÌïúÎã§. ÌïòÏßÄÎßå visiblity map ÏùÄ heap Î≥¥Îã§ 4Î∞∞ Ï†ÅÍ∏∞ ÎïåÎ¨∏Ïóê Î¨ºÎ¶¨Ï†Å I/OÍ∞Ä Ìõ®Ïî¨ Ï†ÅÍ≤å Îì†Îã§. Í∑∏Î¶¨Í≥† ÎåÄÎ∂ÄÎ∂ÑÏùò ÏÉÅÌô©Ïóê Visiblity mapÏùÄ Î©îÎ™®Î¶¨Ïóê Ï∫êÏãú Îêú ÏÉÅÌÉúÎ°ú Ïú†ÏßÄÎêòÍ∏∞Ïóê Ìö®Ïú®Ï†ÅÏù∏ Ï°∞ÌöåÍ∞Ä Í∞ÄÎä•ÌïòÎã§. ÏöîÏïΩÌïòÏûêÎ©¥, Index-only Ïä§Ï∫îÏùÄ Í∏∞Î≥∏Ï†ÅÏù∏ ÏöîÍµ¨Ï°∞Í±¥ÏùÑ ÎßåÏ°±ÌïòÎ©¥ ÏÇ¨Ïö©ÏùÄ Í∞ÄÎä•ÌïòÏßÄÎßå, heap ÌÖåÏù¥Î∏îÏùò Í∞Å pagesÏùò ÎåÄÎ∂ÄÎ∂ÑÏù¥ visiblity mapÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÏùÑ Îïå Ìö®Ïú®ÏùÑ Î≥º Ïàò ÏûàÎã§. 3. Covering index Index-only Ïä§Ï∫îÏùÑ Ìö®Ïú®Ï†ÅÏúºÎ°ú ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, ÏûêÏ£º ÏÇ¨Ïö©ÌïòÎäî ÌäπÏ†ï ÏøºÎ¶¨Ïùò ROWÎì§ÏùÑ Ìè¨Ìï®ÌïòÎèÑÎ°ù ÌäπÎ≥ÑÌûà ÏÑ§Í≥ÑÎêú Ïù∏Îç±Ïä§Ïù∏ Ïª§Î≤ÑÎßÅ Ïù∏Îç±Ïä§(COVERING INDEX)Î•º ÏÉùÏÑ±ÌïòÎ©¥ ÎêúÎã§. ÏùºÎ∞òÏ†ÅÏúºÎ°ú ÏøºÎ¶¨Îäî Í≤ÄÏÉâÏùò ÌÇ§Î°ú ÏÇ¨Ïö©ÎêòÎäî ÏπºÎüº(WHERE Ï†àÏùò ÏπºÎüº) Ïô∏ÏóêÎèÑ Ìõ®Ïî¨ Îçî ÎßéÏùÄ ÏπºÎüºÏùÑ Ï°∞Ìöå(SELECT ÌïòÎäî ÏπºÎüº)ÌïòÍ∏∞Ïóê, PostgreSQLÏùÄ Í≤ÄÏÉâÏùò keyÎ°ú ÏÇ¨Ïö©ÎêòÎäî Ïù∏Îç±Ïä§Í∞Ä ÏïÑÎãå Îã®ÏàúÌûà payload(Î∂ÄÍ∞Ä Îç∞Ïù¥ÌÑ∞) ÏùºÎøêÏù∏ Ïù∏Îç±Ïä§Î•º ÏÉùÏÑ±Ìï† Ïàò ÏûàÍ≤å Ìï¥ Ï§ÄÎã§. (Ïã§Ï†ú Í≤ÄÏÉâÎêòÎäî Í≤∞Í≥º ÏπºÎüºÏùÑ Ï°∞ÌöåÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãàÍ∏∞Ïóê Ï°∞ÌöåÎêòÎäî ÏπºÎüºÏóêÎßå Í≤ÄÏÉâ ÌÇ§Î•º Ï∂îÍ∞ÄÌïòÍ≥†, Í≤∞Í≥º ÏπºÎüºÏùÄ Î∂ÄÍ∞ÄÏ†ÅÏù∏ Ï†ïÎ≥¥Î°úÎßå Í∞ÄÎ≥çÍ≤å Ï∂îÍ∞Ä) Îã§ÏùåÍ≥º Í∞ôÏù¥ INCLUDEÏôÄ Í≤ÄÏÉâÎêòÎäî ÏπºÎüºÏùò Í∞ôÏù¥ Î∂ÄÏó¨ÌïòÎ©¥ ÏÇ¨Ïö© Í∞ÄÎä•ÌïòÎã§.¬†SELECT y FROM tab WHERE x = 'key'; ÏùºÎ∞òÏ†ÅÏúºÎ°ú ÏúÑÏôÄ Í∞ôÏùÄ ÏøºÎ¶¨Î•º Ïã§ÌñâÏãúÌÇ®Îã§Í≥† ÌñàÏùÑ Îïå, Í∏∞Î≥∏Ï†ÅÏù∏ ÏÜçÎèÑ Í∞úÏÑ†Ïùò Î∞©Î≤ïÏùÄ x ÏπºÎüºÏóêÎßå Ïù∏Îç±Ïä§Î•º Ïã§ÌñâÏãúÌÇ§Îäî Í≤ÉÏù¥Îã§.¬†ÌïòÏßÄÎßå Îã§ÏùåÍ≥º Í∞ôÏùÄ Ïù∏Îç±Ïä§Î•º ÏÉùÏÑ±ÌïúÎã§Î©¥, Ìï¥Îãπ ÏøºÎ¶¨Î•º index-only Ïä§Ï∫îÎ∞©ÏãùÏúºÎ°ú ÏÇ¨Ïö© Í∞ÄÎä•ÌïòÎã§.\nCREATE INDEX tab_x_y ON tab(x) INCLUDE (y); yÏùò Í≤∞Í¥èÍ∞íÎì§ÏùÑ heap ÏòÅÏó≠Ïóê Ï†ëÍ∑ºÌïòÏßÄ ÏïäÍ≥† Í∞ÄÏ†∏Ïò¨ Ïàò ÏûàÍ∏∞ ÎïåÎ¨∏Ïù¥Îã§. Covering IndexÏù∏ yÎäî Í≤ÄÏÉâ ÌÇ§Îäî ÏïÑÎãàÍ∏∞Ïóê, Ïù∏Îç±Ïä§Í∞Ä Ï≤òÎ¶¨Ìï† Ïàò ÏûàÎäî Îç∞Ïù¥ÌÑ∞ Ïú†ÌòïÏùº ÌïÑÏöîÎäî ÏóÜÎã§. Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏóê Ï†ÄÏû•ÎêòÏñ¥ ÏûàÏùÑ ÎøêÏù¥Î©∞ Í≤ÄÏÉâÏùÑ ÌïòÎäî Îç∞ ÏÇ¨Ïö©ÎêòÍ±∞ÎÇò ÎÇ¥Î∂Ä Î©îÏª§ÎãàÏ¶òÏóêÏÑú Ïù∏Îç±Ïä§Î°ú Ìï¥ÏÑùÎêòÏßÄ ÏïäÎäîÎã§.¬†CREATE UNIQUE INDEX tab_x_y ON tab(x) INCLUDE (y); Í∑∏Î¶¨Í≥† Îã§ÏùåÍ≥º Í∞ôÏù¥ Ïú†ÎãàÌÅ¨ Ïù∏Îç±Ïä§Î°ú ÏÑ§Ï†ïÌïúÎã§Î©¥, Ìï¥Îãπ Ïú†ÎãàÌÅ¨ ÌäπÏÑ±ÏùÄ x, yÍ∞Ä ÏïÑÎãå ÏπºÎüº xÏóêÎßå Î∂ÄÏó¨ÎêúÎã§.¬†(INCLUDE Ï†àÏùÄ UK, PK Ï†úÏïΩÏ°∞Í±¥ÏóêÎèÑ ÏûëÏÑ±Ìï† Ïàò ÏûàÎã§.) Ïù∏Îç±Ïä§ÏòÅÏó≠ÏùÑ Ï∞®ÏßÄÌïòÏßÄÎßå, Ïù∏Îç±Ïä§Î°ú Ïó¨Í≤®ÏßÄÏßÄ ÏïäÍ≥†, ÌÇ§ÏóêÎèÑ ÏòÅÌñ•ÏùÑ ÏïàÏ£ºÎ©∞ payload ÌòïÌÉúÎ°ú Ï†ÄÏû•Îßå ÌïúÎã§Î©¥, Î™®Îì† ÏøºÎ¶¨Î•º Îì±Î°ùÌïòÎ©¥ Ïñ¥ÎñªÍ≤å ÎêòÎäî Í±¥Í∞ÄÎùºÎäî ÏùòÎ¨∏Ïù¥ ÎìúÎäîÎç∞, Covering Index ÏÇ¨Ïö© Ïãú Ï£ºÏùòÏÇ¨Ìï≠ÏùÑ ÌôïÏù∏Ìï¥ Î≥¥Ïûê. ÌÇ§Í∞Ä ÏïÑÎãå ÏπºÎüº(payload)ÏùÑ Ïù∏Îç±Ïä§, ÌäπÌûà ÏÇ¨Ïù¥Ï¶àÍ∞Ä ÌÅ∞ ÏπºÎüºÏóê ÎåÄÌïú Ïù∏Îç±Ïä§Î•º ÏÑ§Ï†ïÌïòÎäî Í≤ÉÏùÄ ÏµúÎåÄÌïú Î≥¥ÏàòÏ†ÅÏúºÎ°ú ÏûëÏóÖÌïòÎäî Í≤ÉÏù¥ Ï¢ãÎã§. Ïù∏Îç±Ïä§ tupleÏù¥ Ïù∏Îç±Ïä§ Ïú†ÌòïÏù¥ ÌóàÎùΩÌïòÎäî ÏµúÎåÄ ÏÇ¨Ïù¥Ï¶àÎ•º Ï¥àÍ≥ºÌïòÎ©¥, Îç∞Ïù¥ÌÑ∞ insertÍ∞Ä Ïã§Ìå®Ìï† Ïàò ÏûàÎã§. ÌÇ§Í∞Ä ÏïÑÎãå ÏπºÎüº(Payload)Ïù¥ Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùò Îç∞Ïù¥ÌÑ∞Î•º Î≥µÏ†úÌïòÏó¨ Ïù∏Îç±Ïä§ ÌÅ¨Í∏∞Î•º Ï¶ùÍ∞ÄÏãúÌÇ¨ Ïàò ÏûàÍ≥† Ïù¥Îäî Í≤ÄÏÉâ ÏÜçÎèÑÎ•º Îä¶Ï∂îÎäî ÌòÑÏÉÅÏùÄ Ïñ∏Ï†úÎì†ÏßÄ Î∞úÏÉùÌï† Ïàò ÏûàÎã§. Í∑∏Î¶¨Í≥† Index-only Ïä§Ï∫î Ïãú, ÌÖåÏù¥Î∏î Î≥ÄÍ≤ΩÏÜçÎèÑÍ∞Ä Ï∂©Î∂ÑÌûà ÎäêÎ†§ÏÑú heapÏóê Ï†ëÍ∑ºÌï† ÌïÑÏöî ÏóÜÏù¥ Ïù∏Îç±Ïä§ÎßåÏúºÎ°ú Ïä§Ï∫îÌï† Í∞ÄÎä•ÏÑ±Ïù¥ ÏûàÏßÄ ÏïäÎã§Î©¥, Ïù∏Îç±Ïä§Ïóê payloadÎ•º Ìè¨Ìï®ÏãúÌÇ§Îäî Í≤ÉÏùÄ ÏùòÎØ∏Í∞Ä ÏóÜÎã§Îäî Í≤ÉÏùÑ Í∏∞ÏñµÌï¥Ïïº ÌïúÎã§. 4. Covering Index VS ÏùºÎ∞ò Index PostgreSQLÏù¥ INCLUDEÎ•º ÏßÄÏõêÌïòÍ∏∞ Ï†ÑÏóê, Ï¢ÖÏ¢Ö ÌéòÏù¥Î°úÎìú ÏπºÎüºÏùÑ ÏùºÎ∞ò Ïù∏Îç±Ïä§ ÏπºÎüºÏúºÎ°ú ÏûëÏÑ±ÌïòÏó¨ COVERING Ïù∏Îç±Ïä§Î•º ÏÉùÏÑ±ÌïòÏòÄÎã§.\nCREATE INDEX tab_x_y ON tab(x, y); yÏπºÎüºÏùÑ Ï°∞Í±¥Ï†àÏóê ÏÇ¨Ïö©Ìï† ÏùòÎèÑÍ∞Ä ÏóÜÏóàÏùåÏóêÎèÑ Î∂àÍµ¨ÌïòÍ≥†, \bÌÉÄÍπÉ ÏπºÎüº(y)Ïù¥ Ïã§Ï†ú Ï°∞Ìöå ÌÇ§ (x) Îí§Ïóê Ï°¥Ïû¨ÌïúÎã§Î©¥ index-only Ïä§Ï∫îÏùÄ Ïûò ÏûëÎèôÌïòÏßÄÎßå ÌÉÄÍπÉ ÏπºÎüº(y)ÏùÑ ÏÑ†Ìñâ Ïù∏Îç±Ïä§Î°ú ÏÉùÏÑ±ÌïòÎäî Í≤ÉÏùÑ Ìö®Ïú®Ï†ÅÏù¥ÏßÄ ÏïäÎã§. (ÎπÑÌö®Ïú®Ï†ÅÏù¥ÏßÄÎßå Covering Ïù∏Îç±Ïä§ÏôÄ Í∞ôÏùÄ Ìö®Í≥ºÎ•º Î≥º Ïàò ÏûàÎã§.) COVERING Ïù∏Îç±Ïä§Í∞Ä Ïã§Ï†úÎ°ú B-Tree Ïù∏Îç±Ïä§ Íµ¨Ï°∞ÏóêÏÑú Ïñ¥ÎñªÍ≤å ÏûëÎèôÌïòÎäî\b Í≥ºÏ†ïÏùÑ ÏÇ¥Ìé¥Î≥¥Ïûê\nSuffix Truncation(Ï†ëÎØ∏ÏÇ¨ Ï∂ïÏÜå) -¬†B-tree Ïù∏Îç±Ïä§ ÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑú non-key ÏπºÎüº(payload)ÏùÑ Ï†úÍ±∞ÌïòÎäî ÏµúÏ†ÅÌôî Í≥ºÏ†ï. Ïã§Ï†ú Í≤ÄÏÉâÏóê ÌïÑÏöîÌïú ÌÇ§ ÏπºÎüº Ïô∏ÏóêÎäî Ï†úÍ±∞ÌïúÎã§.\nNon-key ÏπºÎüº(payload) - Ïù∏Îç±Ïä§ Ïä§Ï∫îÏùÑ ÏßÅÏ†ëÏ†ÅÏúºÎ°ú Í∞ÄÏù¥ÎìúÌïòÏßÄ ÏïäÍ≥†, Í≤ÄÏÉâÏö©ÏúºÎ°ú ÏÇ¨Ïö©ÎêòÏßÄ ÏïäÏùå (Í≤∞Í≥ºÏôÄ Î¨¥Í¥Ä) Ï∂ïÏÜå Í≥ºÏ†ï - ÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑú payloadÎ•º Ï†úÍ±∞Ìïú ÌõÑ, ÎÇ®ÏïÑÏûàÎäî ÌÇ§ÏπºÎüºÏùò prefixÎ°úÎèÑ ÏµúÌïò B-tree ÌäúÌîåÏù¥ ÏÑ§Î™ÖÏù¥ Í∞ÄÎä•ÌïòÎã§Î©¥ (Ï°∞ÌöåÌï† Ïàò ÏûàÎã§Î©¥) Îí§Îî∞Î•¥Îäî ÌÇ§ ÏπºÎüºÏùÑ Ï°∞ÌöåÌï† ÌïÑÏöîÍ∞Ä ÏóÜÍ∏∞Ïóê ÌõÑÏÜç ÌÇ§ ÏπºÎüºÏùÑ Ï†úÍ±∞. ÌïÑÏàò Ï†ïÎ≥¥ÎßåÏùÑ Ïú†ÏßÄÌïòÎ©∞ Ïù∏Îç±Ïä§Î•º ÌÜµÌïú Í≤ÄÏÉâÏùÑ ÏµúÏ†ÅÌôî** Covering Index, Include -** Include ÏóÜÏù¥ Covering Ïù∏Îç±Ïä§Î•º ÏÇ¨Ïö©ÌïòÎäî Í≤ΩÏö∞, B-tree Ïù∏Îç±Ïä§Ïùò ÏµúÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑú Payload ÏπºÎüºÏùÑ Ï†ÄÏû•ÌïòÏßÄ ÏïäÎäîÎã§. ÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑ† ÌÇ§ ÏπºÎüºÎßå Ï†ÄÏû•ÌïòÍ≥† ÏûàÎã§. ÏøºÎ¶¨Í∞Ä Ïù∏Îç±Ïä§Ïóê Ìè¨Ìï®ÎêòÏßÄ ÏïäÏùÄ ÏπºÎüº Îç∞Ïù¥ÌÑ∞Î•º ÏöîÍµ¨ÌïòÎäî Í≤ΩÏö∞ Ï∂îÍ∞ÄÏ†ÅÏù∏ ÌÖåÏù¥Î∏î Ï†ëÍ∑ºÏù¥ ÌïÑÏöîÌïòÎã§.\nÏª§Î≤ÑÎßÅ Ïù∏Îç±Ïä§ÏôÄ payloadÍ∞Ä B-tree Ïù∏Îç±Ïä§ÏóêÏÑú Ïñ¥ÎñªÍ≤å ÏûëÎèôÌïòÎäîÏßÄÎ•º ÌôïÏù∏Ìïú ÌõÑ Include ÏÇ¨Ïö© Ïó¨Î∂ÄÏóê Îî∞Î•∏ Ï∞®Ïù¥Ï†êÏùÑ ÌôïÏù∏Ìï¥ Î≥¥Î©¥ Îã§ÏùåÍ≥º Í∞ôÎã§.\nÏùºÎ∞ò Index -¬†Include ÏóÜÏù¥ Covering Ïù∏Îç±Ïä§Î•º ÏÇ¨Ïö©ÌïòÎäî Í≤ΩÏö∞, B-tree Ïù∏Îç±Ïä§Ïùò ÏµúÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑú Payload ÏπºÎüºÏùÑ Ï†ÄÏû•ÌïòÏßÄ ÏïäÎäîÎã§. ÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑ† ÌÇ§ ÏπºÎüºÎßå Ï†ÄÏû•ÌïòÍ≥† ÏûàÎã§. ÏøºÎ¶¨Í∞Ä Ïù∏Îç±Ïä§Ïóê Ìè¨Ìï®ÎêòÏßÄ ÏïäÏùÄ ÏπºÎüº Îç∞Ïù¥ÌÑ∞Î•º ÏöîÍµ¨ÌïòÎäî Í≤ΩÏö∞ Ï∂îÍ∞ÄÏ†ÅÏù∏ ÌÖåÏù¥Î∏î Ï†ëÍ∑ºÏù¥ ÌïÑÏöîÌïòÎã§. Covering Index(Include) - includeÏùò Í≤ΩÏö∞ B-tree Ïù∏Îç±Ïä§Ïùò ÏµúÌïòÏúÑ leaf Î†àÎ≤®Ïóê Payload ÏπºÎüº Ï†ïÎ≥¥Î•º Ï†ÄÏû•ÌïòÏó¨, ÌÇ§ÏπºÎüº Ïô∏Ïùò ÏπºÎüº Îç∞Ïù¥ÌÑ∞Î•º ÏöîÍµ¨ÌïòÎäî Í≤ΩÏö∞ÏóêÎèÑ Ï∂îÍ∞ÄÏ†ÅÏù∏ ÌÖåÏù¥Î∏î Ï†ëÍ∑º ÏóÜÏù¥ Îç∞Ïù¥ÌÑ∞ Ï°∞ÌöåÍ∞Ä Í∞ÄÎä•ÌïòÎã§. 5. ÌëúÌòÑÏãù(expresions)Í≥º Index-only Ïä§Ï∫î ÏõêÏπôÏ†ÅÏúºÎ°ú index-only Ïä§Ï∫îÏùÄ expression Ïù∏Îç±Ïä§ÏôÄ Ìï®Íªò ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎã§. ÏòàÎ•º Îì§Ïñ¥ x ÏπºÎüºÏóê Ïù∏Îç±Ïä§Í∞Ä ÏÑ§Ï†ïÎêòÏñ¥ ÏûàÎã§Î©¥ Îã§Ïùå ÏøºÎ¶¨ÎèÑ index-only scanÏù¥ Í∞ÄÎä•ÌïòÎã§.\nSELECT f(x) FROM tab WHERE f(x) \u003c 1; ÎßåÏïΩ f() Ìï®ÏàòÍ∞Ä Í≥† ÏΩîÏä§Ìä∏Ïùò Ìï®ÏàòÎùºÎ©¥ Îß§Ïö∞ Ìö®Í≥ºÏ†ÅÏù∏ ÏøºÎ¶¨Í∞Ä Îê† Í≤ÉÏù¥Îã§. Í∑∏Îü¨ÎÇò PostgreSQL ÌîåÎûòÎÑàÎäî Ïù¥ Í≤ΩÏö∞Ïóê Í∑∏Î†áÍ≤åÍπåÏßÄ ÎòëÎòëÌïòÍ≤å Index-only Ïä§Ï∫îÏùÑ Ï†ÅÏö©ÌïòÏßÑ ÏïäÎäîÎã§. ÌîåÎûòÎÑàÎäî Ï°∞Í±¥Ï†àÏùò Î™®Îì† ÏπºÎüºÏù¥ Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏóêÏÑú ÏÇ¨Ïö©Ïù¥ Í∞ÄÎä•Ìï† ÎïåÎßå index-only Ïä§Ï∫îÏùÑ Í≥†Î†§ÌïòÎäîÎç∞, Ïù¥ Í≤ΩÏö∞ f(x)ÎùºÎäî Ìï®ÏàòÍ∞Ä xÏùò ÏπºÎüºÎßåÏùÑ Ï∞∏Ï°∞ÌïòÍ≥† ÏûàÏùåÏóêÎèÑ, ÏßÅÏ†ëÏ†ÅÏúºÎ°ú xÎ•º ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÍ∏∞Ïóê ÌîåÎûòÎÑàÎäî Ïù¥Î•º ÏïåÏßÄ Î™ªÌïòÍ≥† index scanÏùÑ Ìï† Ïàò ÏóÜÎã§Îäî Í≤∞Î°†ÎßåÏùÑ ÎÇ¥Î¶∞Îã§. Ïù¥ Í≤ΩÏö∞ Îã§ÏùåÍ≥º Í∞ôÏù¥ x ÏûêÏ≤¥Î•º include ÏπºÎüºÏóê Ï∂îÍ∞ÄÌïòÏó¨ index-onlyÏä§Ï∫îÏùÑ Ï†ÅÏö©Ìï† Ïàò ÏûàÎã§.\nCREATE INDEX tab_f_x ON tab (f(x)) INCLUDE (x); Ï∂îÍ∞ÄÏ†ÅÏù∏ Ï£ºÏùòÏÇ¨Ìï≠ÏúºÎ°ú, Ìï¥Îãπ Ïù∏Îç±Ïä§Î•º Ï†ÅÏö© Ïãú f(x) Ìï®ÏàòÏùò Ïû¨Ïó∞ÏÇ∞ÏùÑ ÌîºÌïòÎäî Í≤ÉÏù¥ Î™©Ï†ÅÏù¥ÎùºÎ©¥, Ìï®ÏàòÏùò Íµ¨ÏÑ±Ïù¥ whereÏ†àÏóê Í∑∏ÎåÄÎ°ú ÏûàÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ Ï£ºÏùòÌï¥Ïïº ÌïúÎã§. f(x) Ìï®ÏàòÎ•º ÌÜµÌï¥ Îç∞Ïù¥ÌÑ∞Î•º ÌïÑÌÑ∞ÎßÅÌïòÍ±∞ÎÇò Í≥ÑÏÇ∞ÌïòÎäî Î°úÏßÅÏù¥ ÏûàÏùÑ Í≤ΩÏö∞, Í∑∏ Î°úÏßÅÏù¥ where Ï†àÏóê Í∑∏ÎåÄÎ°ú Ìè¨Ìï®ÎêòÏßÄ ÏïäÎäîÎã§Î©¥ PostgreSQL ÌîåÎûòÎÑàÎäî Ïù∏Îç±Ïä§Î•º Ï†ÅÏ†àÌïòÍ≤å ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÎäîÎã§. Î≥¥ÌÜµ ÏúÑÏôÄ Í∞ôÏùÄ Îã®Ïàú ÌÖåÏù¥Î∏î Ï°∞ÌöåÎäî Ïù∏Îç±Ïä§ ÏÑ§Ï†ïÏúºÎ°ú Í∞ÑÎã®ÌïòÍ≤å Ìï¥Í≤∞Ìï† Ïàò ÏûàÏßÄÎßå, join Ï†à Îì±ÏúºÎ°ú Îã§Î•∏ ÌÖåÏù¥Î∏îÏùÑ Ï∞∏Ï°∞ÌïòÍ≤å Îê† Í≤ΩÏö∞ Ìï¥Í≤∞Ìï† Ïàò ÏóÜÎã§. (PostgreSQL Ïù¥ÌõÑ Î≤ÑÏ†ÑÏóêÏÑú Ìï¥Í≤∞ Í∞ÄÎä•Ìï† ÏàòÎèÑ ÏûàÎã§Í≥† Ìï®)\n6. Î∂ÄÎ∂Ñ Ïù∏Îç±Ïä§ (Partial Index)ÏôÄ Index-only Ïä§Ï∫î Î∂ÄÎ∂ÑÏù∏Îç±Ïä§Îäî index-only Ïä§Ï∫îÍ≥º Ìù•ÎØ∏Î°úÏö¥ ÏÉÅÌò∏ÏûëÏö©ÏùÑ ÌïúÎã§. Îã§ÏùåÍ≥º Í∞ôÏù¥ Ï°∞Í±¥Ï†àÏóê successÎ•º Ï∂îÍ∞ÄÌïú Ï±ÑÎ°ú Ïù∏Îç±Ïä§Î•º ÏÑ§Ï†ïÌïòÎ©¥\nCREATE UNIQUE INDEX tests_success_constraint ON tests (subject, target) WHERE success; Îã§Ïùå ÏøºÎ¶¨Ïóê index-only Ïä§Ï∫îÏùÑ Ï†ÅÏö©Ìï† Ïàò ÏûàÎã§.\nSELECT target FROM tests WHERE subject = 'some-subject' AND success; ÌïòÏßÄÎßå where = successÎùºÎäî Ï°∞Í±¥ÏùÄ Ïù∏Îç±Ïä§Ïùò Í≤∞Í≥º ÏπºÎüºÏúºÎ°ú Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÎäîÎç∞ Ïñ¥ÎñªÍ≤å Ï†ÅÏö©Îê† Ïàò ÏûàÏùÑÍπå? Í≤∞Í≥º ÏπºÎüºÏúºÎ°ú Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏßÄÎßå, Ïù∏Îç±Ïä§ ÏûêÏ≤¥Ïóê Ï°∞Í±¥ÏùÑ Í±∏ÏóàÍ∏∞Ïóê Ïù∏Îç±Ïä§Ïóê ÏûàÎäî Î™®Îì† Ìï≠Î™©ÏùÄ success=trueÎ•º ÎßåÏ°±ÌïòÍ≤å ÎêúÎã§.¬†Ïù¥ Í≤ΩÏö∞ PlannerÎäî Îü∞ÌÉÄÏûÑÏóêÏÑú Ìï¥Îãπ Ï°∞Í±¥ÏùÑ Î™ÖÏãúÏ†ÅÏúºÎ°ú Îã§Ïãú ÌôïÏù∏Ìï† ÌïÑÏöîÍ∞Ä ÏóÜÍ∏∞Ïóê Index-only Ïä§Ï∫îÏù¥ Í∞ÄÎä•Ìïú Í≤ÉÏù¥Îã§. (Îã§Îßå 9.6 Ïù¥ÏÉÅ Î≤ÑÏ†ÑÏóêÏÑúÎäî ÏûêÎèôÏúºÎ°ú Ìï¥Îãπ ÏÉÅÌô©ÏùÑ Ïù∏ÏßÄÌïòÍ≥† Index-onlyÏä§Ï∫îÌïòÏßÄÎßå, Ïù¥Ï†Ñ Î≤ÑÏ†ÑÏóêÏÑúÎäî ÏÉùÏÑ±ÎêòÏßÄ ÏïäÎäîÎã§.)\n7. Í≤∞Î°† Î∞è ÏÑ±Îä• ÌÖåÏä§Ìä∏ Ïù¥Ï†Ñ Ìè¨Ïä§Ìä∏Ïùò ORDER_BY_INDEX_TEST ÌÖåÏù¥Î∏îÏùÑ Îã§Ïãú ÏÇ¨Ïö©ÌïòÏó¨ ÏÑ±Îä• ÌÖåÏä§Ìä∏Î•º ÏßÑÌñâÌïòÏòÄÎã§.\nÌÖåÏä§Ìä∏ ÌÖåÏù¥Î∏î(order_by_index_test) [1857637 ROWS]\nid -¬†PK name -¬†VARCHAR not null non_null_varchar -¬†NOT NULL VARCHAR(8) null_varchar -¬†NULLABLE VARCHAR(8) ÌòÑÏû¨ **non_null_varchar¬†**ÏπºÎüºÏóêÎßå Ïù∏Îç±Ïä§Î•º ÏÑ§Ï†ïÌïú ÏÉÅÌô©Ïù¥Îã§.\nSELECT * FROM ORDER_BY_INDEX_TEST ORDER BY NOT_NULL_VARCHAR ASC NULLS LAST LIMIT 1000; Î®ºÏ†Ä Îã§ÏùåÍ≥º Í∞ôÏù¥, Ï†ïÎ†¨ ÏàúÏÑúÎäî Ïù∏Îç±Ïä§ Ìö®Í≥ºÎ•º Î≥º Ïàò ÏûàÍ≤å ÏÑ§Ï†ïÌïòÍ≥†, Í≤∞Í≥º ÏπºÎüºÏùÄ Ïù∏Îç±Ïä§ Ïô∏ Ï†ÑÏ≤¥ ÏπºÎüºÏùÑ Ï°∞ÌöåÎ•º ÌïòÎ©¥\nÏùºÎ∞òÏ†ÅÏù∏ INDEX SCANÏùÑ ÌÉÄÍ≤å ÎêúÎã§. ÌïòÏßÄÎßå Í≤∞Í≥º ÏπºÎüº ÎòêÌïú Ïù∏Îç±Ïä§ ÏπºÎüºÎßåÏùÑ Ï°∞ÌöåÌïòÍ≤å ÎêòÎ©¥,¬†SELECT NOT_NULL_VARCHAR FROM ORDER_BY_INDEX_TEST ORDER BY NOT_NULL_VARCHAR ASC NULLS LAST LIMIT 1000; INDEX ONLY SCANÏùÑ ÌÉÄÍ≤å ÎêòÎ©∞ TOTAL COSTÍ∞Ä ÏïΩ 1/4 Ï†ïÎèÑ Ï§ÑÏñ¥Îì†Îã§. (ÏúÑÏóêÏÑú Ïñ∏Í∏âÌïú Í≤ÉÏ≤òÎüº Visiblity tableÏù¥ ÏïΩ 1/4 ÌÅ¨Í∏∞) Í∑∏Î†áÎã§Î©¥ Ïù∏Îç±Ïä§ Ïô∏ ÏπºÎüºÏùÑ Ï°∞ÌöåÌïòÎ©¥ÏÑú Ïù∏Îç±Ïä§ Ìö®Í≥ºÎ•º Î≥¥Í∏∞ ÏúÑÌï¥ INCLUDEÎ•º ÏÇ¨Ïö©Ìïú COVERING Ïù∏Îç±Ïä§Î•º ÏÇ¨Ïö©Ìï¥ Î≥¥Ïûê\nCREATE INDEX ORDER_BY_INDEX_TEST_NULL_VARCHAR_INDEX ON ORDER_BY_INDEX_TEST (NULL_VARCHAR) INCLUDE (NOT_NULL_VARCHAR) Îã§ÏùåÍ≥º Í∞ôÏù¥ COVERING Ïù∏Îç±Ïä§Î•º Ï∂îÍ∞ÄÌïòÍ≥†\nSELECT NOT_NULL_VARCHAR, NULL_VARCHAR FROM ORDER_BY_INDEX_TEST ORDER BY NULL_VARCHAR ASC NULLS LAST LIMIT 1000; Ï°∞ÌöåÌïòÍ≤å ÎêòÎ©¥, ÌÇ§ ÏπºÎüºÏóê Ìï¥ÎãπÌïòÎäî NULL_VARCHAR ÏπºÎüº Ïô∏Ïùò Îã§Î•∏ ÏπºÎüºÎèÑ SELECT Ìï≠Î™©Ïóê Ï°¥Ïû¨ÌïòÏßÄÎßå INDEX ONLY SCANÏùÑ ÌÉÄÎ©¥ÏÑú ÏÑ±Îä• Ìö®Í≥ºÎ•º Î≥º Ïàò ÏûàÎã§. Î≥µÏû°ÌïòÏßÄ ÏïäÏùÄ ÌÖåÏù¥Î∏î Ï°∞Ìï©ÏóêÏÑú, Ï°∞ÌöåÎêòÎäî ÏπºÎüºÏùò ÌÅ¨Í∏∞Í∞Ä ÏûëÍ≥† Î™ÖÌôïÌïòÍ≤å Ï†ïÏùòÎêú ÏÉÅÌÉúÏóêÏÑúÎäî COVERING INDEXÎ•º ÏÇ¨Ïö©ÌïòÎäî Í≤ÉÏúºÎ°ú ÏóÑÏ≤≠ÎÇú ÏÑ±Îä• Ìñ•ÏÉÅÏùÑ Î≥º Ïàò ÏûàÎäî Í≤ÉÏùÑ ÌôïÏù∏ÌïòÏòÄÎã§. Îã§Îßå Í≥µÏãù Î¨∏ÏÑúÏùò Ï£ºÏùòÏÇ¨Ìï≠ ÎåÄÎ°ú ÎÇ®Ïö©Ìï† Í≤ΩÏö∞ Îç∞Ïù¥ÌÑ∞ Ïù∏ÏÑúÌä∏Ïãú Ïã§Ìå®ÌïòÍ±∞ÎÇò, Ïù∏Îç±Ïä§ ÏÇ¨Ïù¥Ï¶àÍ∞Ä Ïª§Ï†∏ Í≤ÄÏÉâ ÏÑ±Îä•Ï†ÄÌïòÍ∞Ä Ïñ∏Ï†úÎì†ÏßÄ ÏùºÏñ¥ÎÇ† Ïàò ÏûàÍ∏∞Ïóê, Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùò ÏÇ¨Ïù¥Ï¶à ÌôïÏù∏ Î∞è ÏøºÎ¶¨ ÌîåÎûú Îì±ÏùÑ Ï†ïÌôïÌûà ÌôïÏù∏ÌïòÏó¨ ÏµúÎåÄÌïú Î≥¥ÏàòÏ†ÅÏúºÎ°ú Ï†ÅÏö©Ìï¥Ïïº ÌïúÎã§.\n","wordCount":"1622","inLanguage":"en","datePublished":"2024-03-13T18:52:22Z","dateModified":"2024-03-13T18:52:22Z","author":{"@type":"Person","name":"Jun Kang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://junhkang.com/posts/70/"},"publisher":{"@type":"Organization","name":"Jun Kang's Blog","logo":{"@type":"ImageObject","url":"https://junhkang.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://junhkang.com/ accesskey=h title="Jun Kang's Blog (Alt + H)">Jun Kang's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://junhkang.com/about/ title=About><span>About</span></a></li><li><a href=https://junhkang.com/sankun/ title=Sankun><span>Sankun</span></a></li><li><a href=https://junhkang.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://junhkang.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://junhkang.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://junhkang.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://junhkang.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://junhkang.com/guestbook/ title=Guestbook><span>Guestbook</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">[PostgreSQL] Index-Only Ïä§Ï∫îÍ≥º Covering Ïù∏Îç±Ïä§, Index-onlyÏä§Ï∫îÏùò Ìö®Ïú®Ï†ÅÏù∏ ÏÇ¨Ïö©</h1><div class=post-meta><span title='2024-03-13 18:52:22 +0000 UTC'>March 13, 2024</span>&nbsp;¬∑&nbsp;Jun Kang</div></header><div class=post-content><hr><h2 id=1-index-only-scans>1. Index-Only Scans<a hidden class=anchor aria-hidden=true href=#1-index-only-scans>#</a></h2><p>PostgreSQLÏùò Î™®Îì† Ïù∏Îç±Ïä§Îäî <strong>"Î≥¥Ï°∞(Secondary)"</strong> Ïù∏Îç±Ïä§Ïù¥Îã§. Í∞Å Ïù∏Îç±Ïä§Îäî ÌÖåÏù¥Î∏îÏùò Î©îÏù∏ Îç∞Ïù¥ÌÑ∞ ÏòÅÏó≠(ÌÖåÏù¥Î∏îÏùò <strong>heap</strong> ÏòÅÏó≠)Í≥º Î∂ÑÎ¶¨ÎêòÏñ¥ÏÑú Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê ÏùºÎ∞òÏ†ÅÏù∏ Ïù∏Îç±Ïä§ Ïä§Ï∫îÏóêÏÑú Í∞Å ROWÎ•º Ï∞æÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, indexÏôÄ heap ÏòÅÏó≠ Î™®ÎëêÏóê Ï†ëÍ∑ºÌïòÏó¨ Îç∞Ïù¥ÌÑ∞Î•º ÌÉêÏÉâÌï¥Ïïº ÌïúÎã§. Î≥¥ÌÜµ WHERE Ï†à Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÎäî Îç∞Ïù¥ÌÑ∞Îì§ÏùÄ</p><ul><li><strong>Ïù∏Îç±Ïä§ ÏòÅÏó≠ -</strong> ÏÑúÎ°ú Í∞ÄÍπåÏù¥ Ï°¥Ïû¨ÌïòÏó¨ Ï†ïÎ†¨Îêú ÏàúÏÑúÎ°ú Îπ†Î•¥Í≤å Ï†ëÍ∑ºÌï† Ïàò ÏûàÎã§. (Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùÄ Ï†ïÎ†¨Îêú ÏÉÅÌÉúÎ°ú ÏÉùÏÑ±)</li><li><strong>heap ÏòÅÏó≠ -</strong>¬† ÌäπÎ≥ÑÌïú Í∑úÏπô ÏóÜÏù¥ Ïñ¥ÎîîÏóêÏÑúÎì† Î∂ÑÌè¨Ìï† Ïàò ÏûàÍ∏∞Ïóê heap ÏòÅÏó≠ÏùÑ Ïä§Ï∫îÌï† ÎïåÎäî Î¨¥ÏûëÏúÑÎ°ú Ï†ëÍ∑ºÌïòÍ≤å ÎêòÏñ¥ ÏÜçÎèÑÍ∞Ä ÎäêÎ¶¨Îã§.</li></ul><p>Ïù¥ ÌçºÌè¨Î®ºÏä§ Î¨∏Ï†úÎ•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ PostgreSQLÏùÄ Ìûô ÏòÅÏó≠Ïóê ÎåÄÌïú Ï†ëÍ∑º ÏóÜÏù¥ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑúÎßå Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌïòÎäî <strong>Index-only</strong> Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïúÎã§. Í∏∞Î≥∏ Í∞úÎÖêÏùÄ Îßê Í∑∏ÎåÄÎ°ú heap ÏòÅÏó≠Ïùò Ï∞∏Ï°∞ ÏóÜÏù¥ index Ìï≠Î™©ÏóêÏÑú Î∞îÎ°ú Í∞íÏùÑ Î∞òÌôòÌïòÎäî Í≤ÉÏúºÎ°ú Îß§Ïö∞ Ìö®Ïú®Ï†ÅÏúºÎ°ú Î≥¥Ïù¥ÏßÄÎßå Î™á Í∞ÄÏßÄ Ï†úÌïúÏÇ¨Ìï≠Ïù¥ ÏûàÎã§.</p><ul><li>ÏπºÎüºÏóê Ï†ÅÏö©Îêú Ïù∏Îç±Ïä§ Ïú†ÌòïÏù¥ <strong>Index-only</strong> Ïä§Ï∫îÏùÑ ÏßÄÏõêÌï¥Ïïº ÌïúÎã§. (B-treeÏù∏Îç±Ïä§Îäî Ïñ∏Ï†úÎÇò ÏßÄÏõêÌïòÍ≥†, GiST, SP-GiSTÎäî ÌäπÏ†ï Ïó∞ÏÇ∞ÏûêÏóê ÌïúÌï¥ÏÑúÎßå ÏßÄÏõê, ÎÇòÎ®∏ÏßÄ 3Í∞ÄÏßÄ Ïù∏Îç±Ïä§Îäî ÏßÄÏõêÌïòÏßÄ ÏïäÎäîÎã§.)</li><li>Ïù∏Îç±Ïä§Í∞Ä Í∞Å Ìï≠Î™©Ïóê ÎåÄÌï¥ ÏõêÎûò Îç∞Ïù¥ÌÑ∞ Í∞íÏùÑ <strong>Î¨ºÎ¶¨Ï†ÅÏúºÎ°ú Ïò®Ï†ÑÌûà Ï†ÄÏû•ÌïòÍ±∞ÎÇò Ïû¨Íµ¨ÏÑ±</strong>Ìï† Ïàò ÏûàÏñ¥Ïïº ÌïúÎã§. ÏòàÎ•º Îì§Ïñ¥ GINÏù∏Îç±Ïä§Í∞Ä <strong>Index-only</strong> Ïä§Ï∫îÏùÑ ÏßÄÏõêÌïòÏßÄ ÏïäÎäî Ïù¥Ïú†Îäî Í∞Å Ïù∏Îç±Ïä§Í∞Ä Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞Ïùò Î¨ºÎ¶¨Ï†ÅÏù∏ Í∞íÏù¥ ÏïÑÎãå ÏùºÎ∂Ä ÌäπÏßï (ex. ÏµúÎåÄ, ÏµúÏÜüÍ∞í)ÎßåÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÎäî Ïú†ÌòïÏùò Ïù∏Îç±Ïä§ Ïù¥Í∏∞ ÎïåÎ¨∏Ïù¥Îã§.</li><li>Ïã§ÌñâÎêòÎäî ÏøºÎ¶¨Í∞Ä Ïù∏Îç±Ïä§Î°ú ÏÑ§Ï†ïÎêú ÏπºÎüºÎßåÏùÑ Ï°∞Í±¥Ï†àÏóê Ï∞∏Ï°∞Ìï¥Ïïº ÌïúÎã§. ÏòàÎ•º Îì§Ïñ¥ x, yÏπºÎüºÏóê Ïù∏Îç±Ïä§Í∞Ä ÏÑ§Ï†ïÎêòÏñ¥ ÏûàÍ≥†, z ÏπºÎüºÏóê Ïù∏Îç±Ïä§Í∞Ä ÏÑ§Ï†ïÎêòÏñ¥ ÏûàÏßÄ ÏïäÎã§Î©¥, Îã§Ïùå ÏøºÎ¶¨Îäî index-only Ïä§Ï∫îÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎã§.</li></ul><pre tabindex=0><code>SELECT x, y FROM tab WHERE x = &#39;key&#39;;
SELECT x FROM tab WHERE x = &#39;key&#39; AND y &lt; 42;
</code></pre><p>¬†
Î∞òÎ©¥Ïóê Îã§Ïùå ÏøºÎ¶¨Îäî Ïù∏Îç±Ïä§Í∞Ä Ï†ÅÏö©ÎêòÏßÄ ÏïäÏùÄ z ÏπºÎüºÏù¥ Ï°∞Í±¥Ï†à, ÌòπÏùÄ targetÏóê Ìè¨Ìï®ÎêòÏñ¥ ÏûàÍ∏∞Ïóê index-only Ïä§Ï∫î ÏÇ¨Ïö©Ïù¥ Î∂àÍ∞ÄÎä•ÌïòÎã§.</p><pre tabindex=0><code>SELECT x, z FROM tab WHERE x = &#39;key&#39;;
SELECT x FROM tab WHERE x = &#39;key&#39; AND z &lt; 42;
</code></pre><p>¬†
Ïù¥ Ï°∞Í±¥Îì§Ïóê Î∂ÄÌï©ÌïòÎ©¥, ÏøºÎ¶¨Ïùò Í≤∞Í≥ºÏóê Ìï¥ÎãπÌïòÎäî Îç∞Ïù¥ÌÑ∞Í∞Ä Ïù∏Îç±Ïä§ ÏòÅÏó≠ ÎÇ¥Ïóê Î™®Îëê Ï°¥Ïû¨ÌïúÎã§Îäî Í≤ÉÏù¥Í∏∞Ïóê <strong>Index-only</strong> Ïä§Ï∫îÏù¥ Í∞ÄÎä•ÌïòÎã§.¬†</p><h2 id=visiblity ke-size=size26>2. Visiblity<a hidden class=anchor aria-hidden=true href=#visiblity>#</a></h2><p>ÏúÑÏùò Ï°∞Í±¥Ïóê Î∂ÄÌï©ÌïòÏó¨ Index-only Ïä§Ï∫îÏù¥ Í∞ÄÎä•ÌïòÎçîÎùºÎèÑ, Ìö®Ïú®Ï†ÅÏù∏ Ïä§Ï∫îÏùÑ ÏúÑÌï¥ PostgreSQLÏóêÏÑúÎäî ÌÖåÏù¥Î∏î Í≤ÄÏÉâÏóê ÎåÄÌïú Ï∂îÍ∞Ä ÏöîÍµ¨ ÏÇ¨Ìï≠Ïù¥ ÏûàÎã§. Î∞îÎ°ú Í≤ÄÏÉâ Í≤∞Í≥ºÏùò Í∞Å ROWÍ∞Ä ÏøºÎ¶¨Ïùò MVCC Ïä§ÎÉÖÏàèÏóê "Î≥¥Ïù¥ÎäîÏßÄ(visible)"Ïù¥Îã§. MVCCÎäî PostgreSQLÏóêÏÑú ÎèôÏãúÏÑ±ÏùÑ ÏßÄÏõêÌïòÎäî ÏõêÏπôÏù¥Î©∞ (ÏÉÅÏÑ∏ ÎÇ¥Ïö©ÏùÄ Îã§Ïùå ÎßÅÌÅ¨ Ï∞∏Í≥† -</p><p><a href=https://junhkang.tistory.com/15>[PostgreSQL] MVCC (Multi-Version Concurrency Control))</a></p><blockquote><p><strong>Visiblity</strong> -¬†Ìï¥Îãπ ÏøºÎ¶¨Í∞Ä Ïã§ÌñâÎêòÎäî ÏãúÏ†êÏóêÏÑú Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Ïùò ÏÉÅÌÉú, ÌòπÏùÄ Ïä§ÎÉÖÏàèÏóê Îî∞Îùº Ìï¥Îãπ ÏøºÎ¶¨Ïóê ÏùòÌï¥ Í≤∞Í≥º Îç∞Ïù¥ÌÑ∞Í∞Ä Ï°∞Ìöå, ÌòπÏùÄ Ï°∞ÏûëÎê† Ïàò ÏûàÎäîÏßÄÏùò ÏùòÎØ∏Ïù¥Îã§. (Îã§Î•∏ Ìä∏ÎûúÏû≠ÏÖòÏóê ÏùòÌï¥ ÏÇ≠Ï†úÎêòÍ±∞ÎÇò ÏàòÏ†ïÎêòÏßÄ ÏïäÏùÄ Ïú†Ìö®Ìïú Îç∞Ïù¥ÌÑ∞Í∞Ä Î∞òÌôòÎê† Ïàò ÏûàÎäîÏßÄÎ•º ÏùòÎØ∏ÌïúÎã§.)</p></blockquote><blockquote><p>PostgreSQLÏùÄ ÌÖåÏù¥Î∏î heapÏùò Í∞Å ÌéòÏù¥ÏßÄÏóê ÎåÄÌï¥ Î™®Îì† ROWSÍ∞Ä ÌòÑÏû¨, ÎØ∏ÎûòÏùò Î™®Îì† Ìä∏ÎûúÏû≠ÏÖòÏóêÏÑú Î≥º Ïàò ÏûàÏùÑ ÎßåÌÅº Ïò§ÎûòÎêòÏóàÎäîÏßÄ Ïó¨Î∂ÄÎ•º Ï∂îÏ†ÅÌïúÌïòÏó¨ Ïù¥ Ï†ïÎ≥¥Î•º ÌÖåÏù¥Î∏îÏùò Visiblity mapÏóê bit ÌòïÌÉúÎ°ú Ï†ÄÏû•ÌïúÎã§.
¬†</p></blockquote><p>ÌïòÏßÄÎßå ÏÑ§Î™ÖÏùÑ Î≥¥Î©¥ Visiblity Ï†ïÎ≥¥Îäî Ïù∏Îç±Ïä§ ÏòÅÏó≠Ïù¥ ÏïÑÎãå heapÏòÅÏó≠ÏóêÎßå Ï†ÄÏû•ÎêúÎã§. Í∑∏Î†áÎã§Î©¥ VisiblityÎ•º Ï°∞ÌöåÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî heapÏòÅÏó≠ÏùÑ Î¨¥Ï°∞Í±¥ Ï°∞ÌöåÌï¥Ïïº ÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãåÍ∞Ä?ÎùºÎäî ÏùòÎ¨∏Ïù¥ Îì§Í≤ÉÏù¥Îã§.
¬†</p><p>ÌÖåÏù¥Î∏î ROWSÍ∞Ä ÏµúÍ∑ºÏóê Î≥ÄÍ≤ΩÎêú Í≤ΩÏö∞ÏóêÎäî Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏù¥ ÏóÖÎç∞Ïù¥Ìä∏ÎêòÍ∏∞ Ï†ÑÏùºÌÖåÎãà ÎãπÏó∞Ìûà Îß§Î≤à heap ÏòÅÏó≠ÏùÑ Ï°∞ÌöåÌï¥Ïïº ÌïòÏßÄÎßå, Î≥ÄÍ≤ΩÏù¥ Ïû¶ÏßÄ ÏïäÏùÄ Îç∞Ïù¥ÌÑ∞Ïùò Í≤ΩÏö∞ Ïù¥ Î¨∏Ï†úÎ•º Ìï¥Í≤∞Ìï† Ïàò ÏûàÎäî Î∞©Î≤ïÏù¥ ÏûàÎã§.
¬†</p><p><strong>Index-only</strong> Ïä§Ï∫îÏùÄ Ïù∏Îç±Ïä§ ÎÇ¥ÏóêÏÑú Îç∞Ïù¥ÌÑ∞Î•º Ï∞æÏùÄ ÌõÑ Í∑∏Ïóê Ìï¥ÎãπÌïòÎäî Visiblity map bitÎßåÏùÑ ÌôïÏù∏ÌïòÏó¨ heapÏòÅÏó≠Ïùò Ìï¥Îãπ pageÎ•º Ï∞æÎäîÎã§.</p><ul><li>Îç∞Ïù¥ÌÑ∞Í∞Ä ÌôïÏù∏ÎêòÎ©¥ - Î¨ºÎ¶¨Ï†ÅÏù∏ Îç∞Ïù¥ÌÑ∞Î•º Ï∞æÏùÑ Ïàò ÏûàÍ∏∞Ïóê Ï∂îÍ∞ÄÏ†ÅÏù∏ ÏûëÏóÖÏùÄ ÌïÑÏöî ÏóÜÎã§.</li><li>Îç∞Ïù¥ÌÑ∞Í∞Ä ÌôïÏù∏ÎêòÏßÄ ÏïäÎäîÎã§Î©¥ -¬† Îç∞Ïù¥ÌÑ∞Ïùò VisiblityÎ•º ÌôïÏù∏ÏùÑ ÏúÑÌï¥ heap ÏòÅÏó≠ÏùÑ Ï†ëÍ∑ºÌï¥Ïïº ÌïòÍ∏∞Ïóê ÌëúÏ§Ä Ïù∏Îç±Ïä§ Ïä§Ï∫îÎ≥¥Îã§ ÏÑ±Îä•Ïù¥ Ìñ•ÏÉÅÎêòÏßÄ ÏïäÎäîÎã§.</li></ul><p>ÏÑ±Í≥µÏ†ÅÏúºÎ°ú visiblity map bitÎ•º Ï∞æÎçîÎùºÎèÑ Ïù¥ Î∞©ÏãùÏùÄ Visiblity mapÏùÑ Ï°∞ÌöåÌï¥Ïïº ÌïúÎã§. ÌïòÏßÄÎßå visiblity map ÏùÄ heap Î≥¥Îã§ 4Î∞∞ Ï†ÅÍ∏∞ ÎïåÎ¨∏Ïóê Î¨ºÎ¶¨Ï†Å I/OÍ∞Ä Ìõ®Ïî¨ Ï†ÅÍ≤å Îì†Îã§. Í∑∏Î¶¨Í≥† ÎåÄÎ∂ÄÎ∂ÑÏùò ÏÉÅÌô©Ïóê Visiblity mapÏùÄ Î©îÎ™®Î¶¨Ïóê Ï∫êÏãú Îêú ÏÉÅÌÉúÎ°ú Ïú†ÏßÄÎêòÍ∏∞Ïóê Ìö®Ïú®Ï†ÅÏù∏ Ï°∞ÌöåÍ∞Ä Í∞ÄÎä•ÌïòÎã§.
¬†</p><p>ÏöîÏïΩÌïòÏûêÎ©¥, <strong>Index-only</strong> Ïä§Ï∫îÏùÄ Í∏∞Î≥∏Ï†ÅÏù∏ ÏöîÍµ¨Ï°∞Í±¥ÏùÑ ÎßåÏ°±ÌïòÎ©¥ ÏÇ¨Ïö©ÏùÄ Í∞ÄÎä•ÌïòÏßÄÎßå, heap ÌÖåÏù¥Î∏îÏùò Í∞Å pagesÏùò ÎåÄÎ∂ÄÎ∂ÑÏù¥ visiblity mapÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÏùÑ Îïå Ìö®Ïú®ÏùÑ Î≥º Ïàò ÏûàÎã§.
¬†</p><h2 id=3-covering-index>3. Covering index<a hidden class=anchor aria-hidden=true href=#3-covering-index>#</a></h2><p><strong>Index-only</strong> Ïä§Ï∫îÏùÑ Ìö®Ïú®Ï†ÅÏúºÎ°ú ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî, ÏûêÏ£º ÏÇ¨Ïö©ÌïòÎäî ÌäπÏ†ï ÏøºÎ¶¨Ïùò ROWÎì§ÏùÑ Ìè¨Ìï®ÌïòÎèÑÎ°ù ÌäπÎ≥ÑÌûà ÏÑ§Í≥ÑÎêú Ïù∏Îç±Ïä§Ïù∏ Ïª§Î≤ÑÎßÅ Ïù∏Îç±Ïä§(<strong>COVERING INDEX</strong>)Î•º ÏÉùÏÑ±ÌïòÎ©¥ ÎêúÎã§.
¬†</p><p>ÏùºÎ∞òÏ†ÅÏúºÎ°ú ÏøºÎ¶¨Îäî Í≤ÄÏÉâÏùò ÌÇ§Î°ú ÏÇ¨Ïö©ÎêòÎäî ÏπºÎüº(WHERE Ï†àÏùò ÏπºÎüº) Ïô∏ÏóêÎèÑ Ìõ®Ïî¨ Îçî ÎßéÏùÄ ÏπºÎüºÏùÑ Ï°∞Ìöå(SELECT ÌïòÎäî ÏπºÎüº)ÌïòÍ∏∞Ïóê, PostgreSQLÏùÄ Í≤ÄÏÉâÏùò keyÎ°ú ÏÇ¨Ïö©ÎêòÎäî Ïù∏Îç±Ïä§Í∞Ä ÏïÑÎãå Îã®ÏàúÌûà payload(Î∂ÄÍ∞Ä Îç∞Ïù¥ÌÑ∞) ÏùºÎøêÏù∏ Ïù∏Îç±Ïä§Î•º ÏÉùÏÑ±Ìï† Ïàò ÏûàÍ≤å Ìï¥ Ï§ÄÎã§. (Ïã§Ï†ú Í≤ÄÏÉâÎêòÎäî Í≤∞Í≥º ÏπºÎüºÏùÑ Ï°∞ÌöåÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãàÍ∏∞Ïóê Ï°∞ÌöåÎêòÎäî ÏπºÎüºÏóêÎßå Í≤ÄÏÉâ ÌÇ§Î•º Ï∂îÍ∞ÄÌïòÍ≥†, Í≤∞Í≥º ÏπºÎüºÏùÄ Î∂ÄÍ∞ÄÏ†ÅÏù∏ Ï†ïÎ≥¥Î°úÎßå Í∞ÄÎ≥çÍ≤å Ï∂îÍ∞Ä)
¬†</p><p>Îã§ÏùåÍ≥º Í∞ôÏù¥ INCLUDEÏôÄ Í≤ÄÏÉâÎêòÎäî ÏπºÎüºÏùò Í∞ôÏù¥ Î∂ÄÏó¨ÌïòÎ©¥ ÏÇ¨Ïö© Í∞ÄÎä•ÌïòÎã§.¬†</p><pre tabindex=0><code>SELECT y FROM tab WHERE x = &#39;key&#39;;
</code></pre><p>ÏùºÎ∞òÏ†ÅÏúºÎ°ú ÏúÑÏôÄ Í∞ôÏùÄ ÏøºÎ¶¨Î•º Ïã§ÌñâÏãúÌÇ®Îã§Í≥† ÌñàÏùÑ Îïå, Í∏∞Î≥∏Ï†ÅÏù∏ ÏÜçÎèÑ Í∞úÏÑ†Ïùò Î∞©Î≤ïÏùÄ x ÏπºÎüºÏóêÎßå Ïù∏Îç±Ïä§Î•º Ïã§ÌñâÏãúÌÇ§Îäî Í≤ÉÏù¥Îã§.¬†</p><p>ÌïòÏßÄÎßå Îã§ÏùåÍ≥º Í∞ôÏùÄ Ïù∏Îç±Ïä§Î•º ÏÉùÏÑ±ÌïúÎã§Î©¥, Ìï¥Îãπ ÏøºÎ¶¨Î•º index-only Ïä§Ï∫îÎ∞©ÏãùÏúºÎ°ú ÏÇ¨Ïö© Í∞ÄÎä•ÌïòÎã§.</p><pre tabindex=0><code>CREATE INDEX tab_x_y ON tab(x) INCLUDE (y);
</code></pre><p>yÏùò Í≤∞Í¥èÍ∞íÎì§ÏùÑ heap ÏòÅÏó≠Ïóê Ï†ëÍ∑ºÌïòÏßÄ ÏïäÍ≥† Í∞ÄÏ†∏Ïò¨ Ïàò ÏûàÍ∏∞ ÎïåÎ¨∏Ïù¥Îã§.
¬†</p><p><strong>Covering Index</strong>Ïù∏ yÎäî Í≤ÄÏÉâ ÌÇ§Îäî ÏïÑÎãàÍ∏∞Ïóê, Ïù∏Îç±Ïä§Í∞Ä Ï≤òÎ¶¨Ìï† Ïàò ÏûàÎäî Îç∞Ïù¥ÌÑ∞ Ïú†ÌòïÏùº ÌïÑÏöîÎäî ÏóÜÎã§. Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏóê Ï†ÄÏû•ÎêòÏñ¥ ÏûàÏùÑ ÎøêÏù¥Î©∞ Í≤ÄÏÉâÏùÑ ÌïòÎäî Îç∞ ÏÇ¨Ïö©ÎêòÍ±∞ÎÇò ÎÇ¥Î∂Ä Î©îÏª§ÎãàÏ¶òÏóêÏÑú Ïù∏Îç±Ïä§Î°ú Ìï¥ÏÑùÎêòÏßÄ ÏïäÎäîÎã§.¬†</p><pre tabindex=0><code>CREATE UNIQUE INDEX tab_x_y ON tab(x) INCLUDE (y);
</code></pre><p>Í∑∏Î¶¨Í≥† Îã§ÏùåÍ≥º Í∞ôÏù¥ Ïú†ÎãàÌÅ¨ Ïù∏Îç±Ïä§Î°ú ÏÑ§Ï†ïÌïúÎã§Î©¥, Ìï¥Îãπ Ïú†ÎãàÌÅ¨ ÌäπÏÑ±ÏùÄ x, yÍ∞Ä ÏïÑÎãå ÏπºÎüº xÏóêÎßå Î∂ÄÏó¨ÎêúÎã§.¬† (INCLUDE Ï†àÏùÄ UK, PK Ï†úÏïΩÏ°∞Í±¥ÏóêÎèÑ ÏûëÏÑ±Ìï† Ïàò ÏûàÎã§.)
¬†</p><p>Ïù∏Îç±Ïä§ÏòÅÏó≠ÏùÑ Ï∞®ÏßÄÌïòÏßÄÎßå, Ïù∏Îç±Ïä§Î°ú Ïó¨Í≤®ÏßÄÏßÄ ÏïäÍ≥†, ÌÇ§ÏóêÎèÑ ÏòÅÌñ•ÏùÑ ÏïàÏ£ºÎ©∞ payload ÌòïÌÉúÎ°ú Ï†ÄÏû•Îßå ÌïúÎã§Î©¥, Î™®Îì† ÏøºÎ¶¨Î•º Îì±Î°ùÌïòÎ©¥ Ïñ¥ÎñªÍ≤å ÎêòÎäî Í±¥Í∞ÄÎùºÎäî ÏùòÎ¨∏Ïù¥ ÎìúÎäîÎç∞, Covering Index ÏÇ¨Ïö© Ïãú Ï£ºÏùòÏÇ¨Ìï≠ÏùÑ ÌôïÏù∏Ìï¥ Î≥¥Ïûê.
¬†</p><p>ÌÇ§Í∞Ä ÏïÑÎãå ÏπºÎüº(payload)ÏùÑ Ïù∏Îç±Ïä§, ÌäπÌûà ÏÇ¨Ïù¥Ï¶àÍ∞Ä ÌÅ∞ ÏπºÎüºÏóê ÎåÄÌïú Ïù∏Îç±Ïä§Î•º ÏÑ§Ï†ïÌïòÎäî Í≤ÉÏùÄ ÏµúÎåÄÌïú Î≥¥ÏàòÏ†ÅÏúºÎ°ú ÏûëÏóÖÌïòÎäî Í≤ÉÏù¥ Ï¢ãÎã§. Ïù∏Îç±Ïä§ tupleÏù¥ Ïù∏Îç±Ïä§ Ïú†ÌòïÏù¥ ÌóàÎùΩÌïòÎäî ÏµúÎåÄ ÏÇ¨Ïù¥Ï¶àÎ•º Ï¥àÍ≥ºÌïòÎ©¥, Îç∞Ïù¥ÌÑ∞ insertÍ∞Ä Ïã§Ìå®Ìï† Ïàò ÏûàÎã§. ÌÇ§Í∞Ä ÏïÑÎãå ÏπºÎüº(Payload)Ïù¥ Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùò Îç∞Ïù¥ÌÑ∞Î•º Î≥µÏ†úÌïòÏó¨ Ïù∏Îç±Ïä§ ÌÅ¨Í∏∞Î•º Ï¶ùÍ∞ÄÏãúÌÇ¨ Ïàò ÏûàÍ≥† Ïù¥Îäî Í≤ÄÏÉâ ÏÜçÎèÑÎ•º Îä¶Ï∂îÎäî ÌòÑÏÉÅÏùÄ Ïñ∏Ï†úÎì†ÏßÄ Î∞úÏÉùÌï† Ïàò ÏûàÎã§. Í∑∏Î¶¨Í≥† <strong>Index-only</strong> Ïä§Ï∫î Ïãú, ÌÖåÏù¥Î∏î Î≥ÄÍ≤ΩÏÜçÎèÑÍ∞Ä Ï∂©Î∂ÑÌûà ÎäêÎ†§ÏÑú heapÏóê Ï†ëÍ∑ºÌï† ÌïÑÏöî ÏóÜÏù¥ Ïù∏Îç±Ïä§ÎßåÏúºÎ°ú Ïä§Ï∫îÌï† Í∞ÄÎä•ÏÑ±Ïù¥ ÏûàÏßÄ ÏïäÎã§Î©¥, Ïù∏Îç±Ïä§Ïóê payloadÎ•º Ìè¨Ìï®ÏãúÌÇ§Îäî Í≤ÉÏùÄ ÏùòÎØ∏Í∞Ä ÏóÜÎã§Îäî Í≤ÉÏùÑ Í∏∞ÏñµÌï¥Ïïº ÌïúÎã§.
¬†</p><h2 id=4-covering-index-vs-ÏùºÎ∞ò-index>4. Covering Index VS ÏùºÎ∞ò Index<a hidden class=anchor aria-hidden=true href=#4-covering-index-vs-ÏùºÎ∞ò-index>#</a></h2><p>PostgreSQLÏù¥ INCLUDEÎ•º ÏßÄÏõêÌïòÍ∏∞ Ï†ÑÏóê, Ï¢ÖÏ¢Ö ÌéòÏù¥Î°úÎìú ÏπºÎüºÏùÑ ÏùºÎ∞ò Ïù∏Îç±Ïä§ ÏπºÎüºÏúºÎ°ú ÏûëÏÑ±ÌïòÏó¨ COVERING Ïù∏Îç±Ïä§Î•º ÏÉùÏÑ±ÌïòÏòÄÎã§.</p><pre tabindex=0><code>CREATE INDEX tab_x_y ON tab(x, y);
</code></pre><p>yÏπºÎüºÏùÑ Ï°∞Í±¥Ï†àÏóê ÏÇ¨Ïö©Ìï† ÏùòÎèÑÍ∞Ä ÏóÜÏóàÏùåÏóêÎèÑ Î∂àÍµ¨ÌïòÍ≥†, ÌÉÄÍπÉ ÏπºÎüº(y)Ïù¥ Ïã§Ï†ú Ï°∞Ìöå ÌÇ§ (x) Îí§Ïóê Ï°¥Ïû¨ÌïúÎã§Î©¥ index-only Ïä§Ï∫îÏùÄ Ïûò ÏûëÎèôÌïòÏßÄÎßå ÌÉÄÍπÉ ÏπºÎüº(y)ÏùÑ ÏÑ†Ìñâ Ïù∏Îç±Ïä§Î°ú ÏÉùÏÑ±ÌïòÎäî Í≤ÉÏùÑ Ìö®Ïú®Ï†ÅÏù¥ÏßÄ ÏïäÎã§. (ÎπÑÌö®Ïú®Ï†ÅÏù¥ÏßÄÎßå Covering Ïù∏Îç±Ïä§ÏôÄ Í∞ôÏùÄ Ìö®Í≥ºÎ•º Î≥º Ïàò ÏûàÎã§.)
¬†</p><p>COVERING Ïù∏Îç±Ïä§Í∞Ä Ïã§Ï†úÎ°ú B-Tree Ïù∏Îç±Ïä§ Íµ¨Ï°∞ÏóêÏÑú Ïñ¥ÎñªÍ≤å ÏûëÎèôÌïòÎäî Í≥ºÏ†ïÏùÑ ÏÇ¥Ìé¥Î≥¥Ïûê</p><blockquote><p><strong>Suffix Truncation(Ï†ëÎØ∏ÏÇ¨ Ï∂ïÏÜå) -</strong>¬†B-tree Ïù∏Îç±Ïä§ ÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑú non-key ÏπºÎüº(payload)ÏùÑ Ï†úÍ±∞ÌïòÎäî ÏµúÏ†ÅÌôî Í≥ºÏ†ï. Ïã§Ï†ú Í≤ÄÏÉâÏóê ÌïÑÏöîÌïú ÌÇ§ ÏπºÎüº Ïô∏ÏóêÎäî Ï†úÍ±∞ÌïúÎã§.<br><strong>Non-key ÏπºÎüº(payload) -</strong> Ïù∏Îç±Ïä§ Ïä§Ï∫îÏùÑ ÏßÅÏ†ëÏ†ÅÏúºÎ°ú Í∞ÄÏù¥ÎìúÌïòÏßÄ ÏïäÍ≥†, Í≤ÄÏÉâÏö©ÏúºÎ°ú ÏÇ¨Ïö©ÎêòÏßÄ ÏïäÏùå (Í≤∞Í≥ºÏôÄ Î¨¥Í¥Ä)
<strong>Ï∂ïÏÜå Í≥ºÏ†ï -</strong> ÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑú payloadÎ•º Ï†úÍ±∞Ìïú ÌõÑ, ÎÇ®ÏïÑÏûàÎäî ÌÇ§ÏπºÎüºÏùò prefixÎ°úÎèÑ ÏµúÌïò B-tree ÌäúÌîåÏù¥ ÏÑ§Î™ÖÏù¥ Í∞ÄÎä•ÌïòÎã§Î©¥ (Ï°∞ÌöåÌï† Ïàò ÏûàÎã§Î©¥) Îí§Îî∞Î•¥Îäî ÌÇ§ ÏπºÎüºÏùÑ Ï°∞ÌöåÌï† ÌïÑÏöîÍ∞Ä ÏóÜÍ∏∞Ïóê ÌõÑÏÜç ÌÇ§ ÏπºÎüºÏùÑ Ï†úÍ±∞. ÌïÑÏàò Ï†ïÎ≥¥ÎßåÏùÑ Ïú†ÏßÄÌïòÎ©∞ Ïù∏Îç±Ïä§Î•º ÌÜµÌïú Í≤ÄÏÉâÏùÑ ÏµúÏ†ÅÌôî**
Covering Index, Include -** Include ÏóÜÏù¥ Covering Ïù∏Îç±Ïä§Î•º ÏÇ¨Ïö©ÌïòÎäî Í≤ΩÏö∞, B-tree Ïù∏Îç±Ïä§Ïùò ÏµúÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑú Payload ÏπºÎüºÏùÑ Ï†ÄÏû•ÌïòÏßÄ ÏïäÎäîÎã§. ÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑ† ÌÇ§ ÏπºÎüºÎßå Ï†ÄÏû•ÌïòÍ≥† ÏûàÎã§. ÏøºÎ¶¨Í∞Ä Ïù∏Îç±Ïä§Ïóê Ìè¨Ìï®ÎêòÏßÄ ÏïäÏùÄ ÏπºÎüº Îç∞Ïù¥ÌÑ∞Î•º ÏöîÍµ¨ÌïòÎäî Í≤ΩÏö∞ Ï∂îÍ∞ÄÏ†ÅÏù∏ ÌÖåÏù¥Î∏î Ï†ëÍ∑ºÏù¥ ÌïÑÏöîÌïòÎã§.</p></blockquote><p>Ïª§Î≤ÑÎßÅ Ïù∏Îç±Ïä§ÏôÄ payloadÍ∞Ä B-tree Ïù∏Îç±Ïä§ÏóêÏÑú Ïñ¥ÎñªÍ≤å ÏûëÎèôÌïòÎäîÏßÄÎ•º ÌôïÏù∏Ìïú ÌõÑ Include ÏÇ¨Ïö© Ïó¨Î∂ÄÏóê Îî∞Î•∏ Ï∞®Ïù¥Ï†êÏùÑ ÌôïÏù∏Ìï¥ Î≥¥Î©¥ Îã§ÏùåÍ≥º Í∞ôÎã§.</p><ul><li><strong>ÏùºÎ∞ò Index -</strong>¬†Include ÏóÜÏù¥ Covering Ïù∏Îç±Ïä§Î•º ÏÇ¨Ïö©ÌïòÎäî Í≤ΩÏö∞, B-tree Ïù∏Îç±Ïä§Ïùò ÏµúÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑú Payload ÏπºÎüºÏùÑ Ï†ÄÏû•ÌïòÏßÄ ÏïäÎäîÎã§. ÏÉÅÏúÑ Î†àÎ≤®ÏóêÏÑ† ÌÇ§ ÏπºÎüºÎßå Ï†ÄÏû•ÌïòÍ≥† ÏûàÎã§. ÏøºÎ¶¨Í∞Ä Ïù∏Îç±Ïä§Ïóê Ìè¨Ìï®ÎêòÏßÄ ÏïäÏùÄ ÏπºÎüº Îç∞Ïù¥ÌÑ∞Î•º ÏöîÍµ¨ÌïòÎäî Í≤ΩÏö∞ Ï∂îÍ∞ÄÏ†ÅÏù∏ ÌÖåÏù¥Î∏î Ï†ëÍ∑ºÏù¥ ÌïÑÏöîÌïòÎã§.</li><li><strong>Covering Index(Include) -</strong> includeÏùò Í≤ΩÏö∞ B-tree Ïù∏Îç±Ïä§Ïùò ÏµúÌïòÏúÑ leaf Î†àÎ≤®Ïóê Payload ÏπºÎüº Ï†ïÎ≥¥Î•º Ï†ÄÏû•ÌïòÏó¨, ÌÇ§ÏπºÎüº Ïô∏Ïùò ÏπºÎüº Îç∞Ïù¥ÌÑ∞Î•º ÏöîÍµ¨ÌïòÎäî Í≤ΩÏö∞ÏóêÎèÑ Ï∂îÍ∞ÄÏ†ÅÏù∏ ÌÖåÏù¥Î∏î Ï†ëÍ∑º ÏóÜÏù¥ Îç∞Ïù¥ÌÑ∞ Ï°∞ÌöåÍ∞Ä Í∞ÄÎä•ÌïòÎã§.</li></ul><h2 id=ÌëúÌòÑÏãùexpresionsÍ≥º-index-only-Ïä§Ï∫î ke-size=size26>5. ÌëúÌòÑÏãù(expresions)Í≥º Index-only Ïä§Ï∫î<a hidden class=anchor aria-hidden=true href=#ÌëúÌòÑÏãùexpresionsÍ≥º-index-only-Ïä§Ï∫î>#</a></h2><p>ÏõêÏπôÏ†ÅÏúºÎ°ú index-only Ïä§Ï∫îÏùÄ expression Ïù∏Îç±Ïä§ÏôÄ Ìï®Íªò ÏÇ¨Ïö©Ìï† Ïàò ÏûàÎã§. ÏòàÎ•º Îì§Ïñ¥ x ÏπºÎüºÏóê Ïù∏Îç±Ïä§Í∞Ä ÏÑ§Ï†ïÎêòÏñ¥ ÏûàÎã§Î©¥ Îã§Ïùå ÏøºÎ¶¨ÎèÑ index-only scanÏù¥ Í∞ÄÎä•ÌïòÎã§.</p><pre tabindex=0><code>SELECT f(x) FROM tab WHERE f(x) &lt; 1;
</code></pre><p>ÎßåÏïΩ f() Ìï®ÏàòÍ∞Ä Í≥† ÏΩîÏä§Ìä∏Ïùò Ìï®ÏàòÎùºÎ©¥ Îß§Ïö∞ Ìö®Í≥ºÏ†ÅÏù∏ ÏøºÎ¶¨Í∞Ä Îê† Í≤ÉÏù¥Îã§. Í∑∏Îü¨ÎÇò PostgreSQL ÌîåÎûòÎÑàÎäî Ïù¥ Í≤ΩÏö∞Ïóê Í∑∏Î†áÍ≤åÍπåÏßÄ ÎòëÎòëÌïòÍ≤å Index-only Ïä§Ï∫îÏùÑ Ï†ÅÏö©ÌïòÏßÑ ÏïäÎäîÎã§.
¬†</p><p>ÌîåÎûòÎÑàÎäî Ï°∞Í±¥Ï†àÏùò Î™®Îì† ÏπºÎüºÏù¥ Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏóêÏÑú ÏÇ¨Ïö©Ïù¥ Í∞ÄÎä•Ìï† ÎïåÎßå index-only Ïä§Ï∫îÏùÑ Í≥†Î†§ÌïòÎäîÎç∞, Ïù¥ Í≤ΩÏö∞ f(x)ÎùºÎäî Ìï®ÏàòÍ∞Ä xÏùò ÏπºÎüºÎßåÏùÑ Ï∞∏Ï°∞ÌïòÍ≥† ÏûàÏùåÏóêÎèÑ, ÏßÅÏ†ëÏ†ÅÏúºÎ°ú xÎ•º ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÍ∏∞Ïóê ÌîåÎûòÎÑàÎäî Ïù¥Î•º ÏïåÏßÄ Î™ªÌïòÍ≥† index scanÏùÑ Ìï† Ïàò ÏóÜÎã§Îäî Í≤∞Î°†ÎßåÏùÑ ÎÇ¥Î¶∞Îã§.
¬†</p><p>Ïù¥ Í≤ΩÏö∞ Îã§ÏùåÍ≥º Í∞ôÏù¥ x ÏûêÏ≤¥Î•º include ÏπºÎüºÏóê Ï∂îÍ∞ÄÌïòÏó¨ index-onlyÏä§Ï∫îÏùÑ Ï†ÅÏö©Ìï† Ïàò ÏûàÎã§.</p><pre tabindex=0><code>CREATE INDEX tab_f_x ON tab (f(x)) INCLUDE (x);
</code></pre><p>Ï∂îÍ∞ÄÏ†ÅÏù∏ Ï£ºÏùòÏÇ¨Ìï≠ÏúºÎ°ú, Ìï¥Îãπ Ïù∏Îç±Ïä§Î•º Ï†ÅÏö© Ïãú f(x) Ìï®ÏàòÏùò Ïû¨Ïó∞ÏÇ∞ÏùÑ ÌîºÌïòÎäî Í≤ÉÏù¥ Î™©Ï†ÅÏù¥ÎùºÎ©¥, Ìï®ÏàòÏùò Íµ¨ÏÑ±Ïù¥ whereÏ†àÏóê Í∑∏ÎåÄÎ°ú ÏûàÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ Ï£ºÏùòÌï¥Ïïº ÌïúÎã§. f(x) Ìï®ÏàòÎ•º ÌÜµÌï¥ Îç∞Ïù¥ÌÑ∞Î•º ÌïÑÌÑ∞ÎßÅÌïòÍ±∞ÎÇò Í≥ÑÏÇ∞ÌïòÎäî Î°úÏßÅÏù¥ ÏûàÏùÑ Í≤ΩÏö∞, Í∑∏ Î°úÏßÅÏù¥ where Ï†àÏóê Í∑∏ÎåÄÎ°ú Ìè¨Ìï®ÎêòÏßÄ ÏïäÎäîÎã§Î©¥ PostgreSQL ÌîåÎûòÎÑàÎäî Ïù∏Îç±Ïä§Î•º Ï†ÅÏ†àÌïòÍ≤å ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÎäîÎã§. Î≥¥ÌÜµ ÏúÑÏôÄ Í∞ôÏùÄ Îã®Ïàú ÌÖåÏù¥Î∏î Ï°∞ÌöåÎäî Ïù∏Îç±Ïä§ ÏÑ§Ï†ïÏúºÎ°ú Í∞ÑÎã®ÌïòÍ≤å Ìï¥Í≤∞Ìï† Ïàò ÏûàÏßÄÎßå, join Ï†à Îì±ÏúºÎ°ú Îã§Î•∏ ÌÖåÏù¥Î∏îÏùÑ Ï∞∏Ï°∞ÌïòÍ≤å Îê† Í≤ΩÏö∞ Ìï¥Í≤∞Ìï† Ïàò ÏóÜÎã§. (PostgreSQL Ïù¥ÌõÑ Î≤ÑÏ†ÑÏóêÏÑú Ìï¥Í≤∞ Í∞ÄÎä•Ìï† ÏàòÎèÑ ÏûàÎã§Í≥† Ìï®)</p><h2 id=Î∂ÄÎ∂Ñ-Ïù∏Îç±Ïä§-partial-indexÏôÄ-index-only-Ïä§Ï∫î ke-size=size26>6. Î∂ÄÎ∂Ñ Ïù∏Îç±Ïä§ (Partial Index)ÏôÄ Index-only Ïä§Ï∫î<a hidden class=anchor aria-hidden=true href=#Î∂ÄÎ∂Ñ-Ïù∏Îç±Ïä§-partial-indexÏôÄ-index-only-Ïä§Ï∫î>#</a></h2><p>Î∂ÄÎ∂ÑÏù∏Îç±Ïä§Îäî index-only Ïä§Ï∫îÍ≥º Ìù•ÎØ∏Î°úÏö¥ ÏÉÅÌò∏ÏûëÏö©ÏùÑ ÌïúÎã§. Îã§ÏùåÍ≥º Í∞ôÏù¥ Ï°∞Í±¥Ï†àÏóê successÎ•º Ï∂îÍ∞ÄÌïú Ï±ÑÎ°ú Ïù∏Îç±Ïä§Î•º ÏÑ§Ï†ïÌïòÎ©¥</p><pre tabindex=0><code>CREATE UNIQUE INDEX tests_success_constraint ON tests (subject, target)
    WHERE success;
</code></pre><p>Îã§Ïùå ÏøºÎ¶¨Ïóê index-only Ïä§Ï∫îÏùÑ Ï†ÅÏö©Ìï† Ïàò ÏûàÎã§.</p><pre tabindex=0><code>SELECT target FROM tests WHERE subject = &#39;some-subject&#39; AND success;
</code></pre><p>ÌïòÏßÄÎßå where = successÎùºÎäî Ï°∞Í±¥ÏùÄ Ïù∏Îç±Ïä§Ïùò Í≤∞Í≥º ÏπºÎüºÏúºÎ°ú Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÎäîÎç∞ Ïñ¥ÎñªÍ≤å Ï†ÅÏö©Îê† Ïàò ÏûàÏùÑÍπå?
¬†</p><p>Í≤∞Í≥º ÏπºÎüºÏúºÎ°ú Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏßÄÎßå, Ïù∏Îç±Ïä§ ÏûêÏ≤¥Ïóê Ï°∞Í±¥ÏùÑ Í±∏ÏóàÍ∏∞Ïóê Ïù∏Îç±Ïä§Ïóê ÏûàÎäî Î™®Îì† Ìï≠Î™©ÏùÄ success=trueÎ•º ÎßåÏ°±ÌïòÍ≤å ÎêúÎã§.¬† Ïù¥ Í≤ΩÏö∞ PlannerÎäî Îü∞ÌÉÄÏûÑÏóêÏÑú Ìï¥Îãπ Ï°∞Í±¥ÏùÑ Î™ÖÏãúÏ†ÅÏúºÎ°ú Îã§Ïãú ÌôïÏù∏Ìï† ÌïÑÏöîÍ∞Ä ÏóÜÍ∏∞Ïóê <strong>Index-only</strong> Ïä§Ï∫îÏù¥ Í∞ÄÎä•Ìïú Í≤ÉÏù¥Îã§. (Îã§Îßå 9.6 Ïù¥ÏÉÅ Î≤ÑÏ†ÑÏóêÏÑúÎäî ÏûêÎèôÏúºÎ°ú Ìï¥Îãπ ÏÉÅÌô©ÏùÑ Ïù∏ÏßÄÌïòÍ≥† <strong>Index-only</strong>Ïä§Ï∫îÌïòÏßÄÎßå, Ïù¥Ï†Ñ Î≤ÑÏ†ÑÏóêÏÑúÎäî ÏÉùÏÑ±ÎêòÏßÄ ÏïäÎäîÎã§.)</p><h2 id=Í≤∞Î°†-Î∞è-ÏÑ±Îä•-ÌÖåÏä§Ìä∏ ke-size=size26>7. Í≤∞Î°† Î∞è ÏÑ±Îä• ÌÖåÏä§Ìä∏<a hidden class=anchor aria-hidden=true href=#Í≤∞Î°†-Î∞è-ÏÑ±Îä•-ÌÖåÏä§Ìä∏>#</a></h2><p>Ïù¥Ï†Ñ Ìè¨Ïä§Ìä∏Ïùò ORDER_BY_INDEX_TEST ÌÖåÏù¥Î∏îÏùÑ Îã§Ïãú ÏÇ¨Ïö©ÌïòÏó¨ ÏÑ±Îä• ÌÖåÏä§Ìä∏Î•º ÏßÑÌñâÌïòÏòÄÎã§.</p><blockquote><p>ÌÖåÏä§Ìä∏ ÌÖåÏù¥Î∏î(<strong>order_by_index_test</strong>) [1857637 ROWS]<br><strong>id -</strong>¬†PK
<strong>name -</strong>¬†VARCHAR not null
<strong>non_null_varchar -</strong>¬†NOT NULL VARCHAR(8)
<strong>null_varchar -</strong>¬†NULLABLE VARCHAR(8)
¬†</p></blockquote><p>ÌòÑÏû¨ **non_null_varchar¬†**ÏπºÎüºÏóêÎßå Ïù∏Îç±Ïä§Î•º ÏÑ§Ï†ïÌïú ÏÉÅÌô©Ïù¥Îã§.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> ORDER_BY_INDEX_TEST <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> NOT_NULL_VARCHAR <span style=color:#66d9ef>ASC</span> NULLS <span style=color:#66d9ef>LAST</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>1000</span>;
</span></span></code></pre></div><p>¬†</p><p>Î®ºÏ†Ä Îã§ÏùåÍ≥º Í∞ôÏù¥, Ï†ïÎ†¨ ÏàúÏÑúÎäî Ïù∏Îç±Ïä§ Ìö®Í≥ºÎ•º Î≥º Ïàò ÏûàÍ≤å ÏÑ§Ï†ïÌïòÍ≥†, Í≤∞Í≥º ÏπºÎüºÏùÄ Ïù∏Îç±Ïä§ Ïô∏ Ï†ÑÏ≤¥ ÏπºÎüºÏùÑ Ï°∞ÌöåÎ•º ÌïòÎ©¥</p><p><img loading=lazy src=/images/posts/70/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-03-13%20%EC%98%A4%ED%9B%84%206.43.10.png></p><p>ÏùºÎ∞òÏ†ÅÏù∏ INDEX SCANÏùÑ ÌÉÄÍ≤å ÎêúÎã§.
¬†</p><p>ÌïòÏßÄÎßå Í≤∞Í≥º ÏπºÎüº ÎòêÌïú Ïù∏Îç±Ïä§ ÏπºÎüºÎßåÏùÑ Ï°∞ÌöåÌïòÍ≤å ÎêòÎ©¥,¬†</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> NOT_NULL_VARCHAR <span style=color:#66d9ef>FROM</span> ORDER_BY_INDEX_TEST <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> NOT_NULL_VARCHAR <span style=color:#66d9ef>ASC</span> NULLS <span style=color:#66d9ef>LAST</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>1000</span>;
</span></span></code></pre></div><p><img loading=lazy src=/images/posts/70/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-03-13%20%EC%98%A4%ED%9B%84%206.43.53.png></p><p>INDEX ONLY SCANÏùÑ ÌÉÄÍ≤å ÎêòÎ©∞ TOTAL COSTÍ∞Ä ÏïΩ 1/4 Ï†ïÎèÑ Ï§ÑÏñ¥Îì†Îã§. (ÏúÑÏóêÏÑú Ïñ∏Í∏âÌïú Í≤ÉÏ≤òÎüº Visiblity tableÏù¥ ÏïΩ 1/4 ÌÅ¨Í∏∞)
¬†</p><p>Í∑∏Î†áÎã§Î©¥ Ïù∏Îç±Ïä§ Ïô∏ ÏπºÎüºÏùÑ Ï°∞ÌöåÌïòÎ©¥ÏÑú Ïù∏Îç±Ïä§ Ìö®Í≥ºÎ•º Î≥¥Í∏∞ ÏúÑÌï¥ INCLUDEÎ•º ÏÇ¨Ïö©Ìïú COVERING Ïù∏Îç±Ïä§Î•º ÏÇ¨Ïö©Ìï¥ Î≥¥Ïûê</p><pre tabindex=0><code class=language-pgsql data-lang=pgsql>CREATE INDEX ORDER_BY_INDEX_TEST_NULL_VARCHAR_INDEX ON ORDER_BY_INDEX_TEST (NULL_VARCHAR) INCLUDE (NOT_NULL_VARCHAR)
</code></pre><p>Îã§ÏùåÍ≥º Í∞ôÏù¥ COVERING Ïù∏Îç±Ïä§Î•º Ï∂îÍ∞ÄÌïòÍ≥†</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> NOT_NULL_VARCHAR, NULL_VARCHAR <span style=color:#66d9ef>FROM</span> ORDER_BY_INDEX_TEST <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> NULL_VARCHAR <span style=color:#66d9ef>ASC</span> NULLS <span style=color:#66d9ef>LAST</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>1000</span>;
</span></span></code></pre></div><p><img loading=lazy src=/images/posts/70/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202024-03-13%20%EC%98%A4%ED%9B%84%206.47.18.png></p><p>Ï°∞ÌöåÌïòÍ≤å ÎêòÎ©¥, ÌÇ§ ÏπºÎüºÏóê Ìï¥ÎãπÌïòÎäî NULL_VARCHAR ÏπºÎüº Ïô∏Ïùò Îã§Î•∏ ÏπºÎüºÎèÑ SELECT Ìï≠Î™©Ïóê Ï°¥Ïû¨ÌïòÏßÄÎßå INDEX ONLY SCANÏùÑ ÌÉÄÎ©¥ÏÑú ÏÑ±Îä• Ìö®Í≥ºÎ•º Î≥º Ïàò ÏûàÎã§.
¬†</p><p>Î≥µÏû°ÌïòÏßÄ ÏïäÏùÄ ÌÖåÏù¥Î∏î Ï°∞Ìï©ÏóêÏÑú, Ï°∞ÌöåÎêòÎäî ÏπºÎüºÏùò ÌÅ¨Í∏∞Í∞Ä ÏûëÍ≥† Î™ÖÌôïÌïòÍ≤å Ï†ïÏùòÎêú ÏÉÅÌÉúÏóêÏÑúÎäî COVERING INDEXÎ•º ÏÇ¨Ïö©ÌïòÎäî Í≤ÉÏúºÎ°ú ÏóÑÏ≤≠ÎÇú ÏÑ±Îä• Ìñ•ÏÉÅÏùÑ Î≥º Ïàò ÏûàÎäî Í≤ÉÏùÑ ÌôïÏù∏ÌïòÏòÄÎã§. Îã§Îßå Í≥µÏãù Î¨∏ÏÑúÏùò Ï£ºÏùòÏÇ¨Ìï≠ ÎåÄÎ°ú ÎÇ®Ïö©Ìï† Í≤ΩÏö∞ Îç∞Ïù¥ÌÑ∞ Ïù∏ÏÑúÌä∏Ïãú Ïã§Ìå®ÌïòÍ±∞ÎÇò, Ïù∏Îç±Ïä§ ÏÇ¨Ïù¥Ï¶àÍ∞Ä Ïª§Ï†∏ Í≤ÄÏÉâ ÏÑ±Îä•Ï†ÄÌïòÍ∞Ä Ïñ∏Ï†úÎì†ÏßÄ ÏùºÏñ¥ÎÇ† Ïàò ÏûàÍ∏∞Ïóê, Ïù∏Îç±Ïä§ ÌÖåÏù¥Î∏îÏùò ÏÇ¨Ïù¥Ï¶à ÌôïÏù∏ Î∞è ÏøºÎ¶¨ ÌîåÎûú Îì±ÏùÑ Ï†ïÌôïÌûà ÌôïÏù∏ÌïòÏó¨ ÏµúÎåÄÌïú Î≥¥ÏàòÏ†ÅÏúºÎ°ú Ï†ÅÏö©Ìï¥Ïïº ÌïúÎã§.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://junhkang.com/tags/postgresql/>PostgreSQL</a></li><li><a href=https://junhkang.com/tags/covering/>Covering</a></li><li><a href=https://junhkang.com/tags/index-only/>Index-Only</a></li></ul></footer><div class=giscus><script src=https://giscus.app/client.js data-repo=junhkang/blog data-repo-id=R_kgDON3GHLw data-category=General data-category-id=DIC_kwDON3GHL84Cm5Fc data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko crossorigin=anonymous async></script></div></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>