<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[PostgreSQL] SP-GiSTì¸ë±ìŠ¤ì˜ ì›ë¦¬ ë° íŠ¹ì§• | Jun Kang's Blog</title><meta name=keywords content="Index,PostgreSQL,SP-GIST"><meta name=description content="
1. SP-GiST ì¸ë±ìŠ¤ë€?
Space-Partitioned Generalized Search Treeì˜ ì•½ìì´ë‹¤.Â GiSTì¸ë±ìŠ¤ì™€ ê°™ì´ ì§€ë¦¬, ì¢Œí‘œ, ipì£¼ì†Œ ë°ì´í„° ë“± ë³µì¡í•œ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì¸ë±ìŠ¤ ìœ í˜•ì´ë‹¤. GiSTê°€ B-tree ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë³´ê´€ ë°ì´í„°ë¥¼ ì„¸ë¶„í™”í•  ë•Œ, ìœ„ê³„ì  ìˆœì„œë¥¼ ë”°ë¼ì•¼ í•˜ê¸°ì—, ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ìœ í˜•ìœ¼ë¡œ, GiSTë¡œ ë¶„ë¦¬ëœ ê³µê°„ì„ ë‹¤ì‹œ í•œë²ˆ ê³µê°„ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” ê°œë…ì´ë‹¤. SP-GiSTëŠ” ê²¹ì¹˜ì§€ ì•ŠëŠ” ì˜ì—­ìœ¼ë¡œ ì¬ê·€ì  ë¶„í• ì„ í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì— ì í•©í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ SP-GiSTëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜•, ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.
1-1. SP-GiST ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_spgist_example ON example_table USING spgist (column1);
1-2. ì¥ì 

ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë°ì´í„° íƒ€ì…ì— ì‚¬ìš© ê°€ëŠ¥ : ê¸°í•˜í•™, IP, ë‹¤ë¥¸ ë³µì¡í•œ ë°ì´í„° íƒ€ì…
ë³µì¡í•œ ì¿¼ë¦¬ì— ì‚¬ìš© ê°€ëŠ¥Â : ë³µì¡í•œ ë°ì´í„°êµ¬ì¡°, ì¿¼ë¦¬ì— ì‚¬ìš© ì í•©í•˜ë„ë¡ ì„¤ê³„
ë¹ ë¥¸ ê²€ìƒ‰ íš¨ìœ¨"><meta name=author content="Jun Kang"><link rel=canonical href=https://junhkang.com/posts/9/><meta name=google-site-verification content="G-PV53RL6R3L"><link crossorigin=anonymous href=/assets/css/stylesheet.74700298e7318c6a254db46da1e4db20401442caa2ca390299eb96ba781bad05.css integrity="sha256-dHACmOcxjGolTbRtoeTbIEAUQsqiyjkCmeuWungbrQU=" rel="preload stylesheet" as=style><link rel=icon href=https://junhkang.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://junhkang.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://junhkang.com/favicon-32x32.png><link rel=apple-touch-icon href=https://junhkang.com/apple-touch-icon.png><link rel=mask-icon href=https://junhkang.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://junhkang.com/posts/9/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>.social-icons{display:flex;align-items:center;gap:15px;margin-top:15px}.profile-visitor-count{display:flex;align-items:center;margin-left:auto;padding:6px 10px;background-color:var(--entry);border-radius:6px;font-size:.9em;color:var(--secondary);border:1px solid var(--border);transition:all .3s ease;gap:6px;text-decoration:none}.profile-visitor-count:hover{transform:translateY(-2px);box-shadow:0 2px 8px rgba(0,0,0,.1);text-decoration:none}.visitor-label{display:flex;align-items:center;gap:4px}@media screen and (max-width:768px){.social-icons{flex-wrap:wrap;justify-content:center}.profile-visitor-count{margin-left:0;margin-top:10px}}</style><script>document.addEventListener("DOMContentLoaded",function(){const e=window.location.pathname;if(e==="/"){{const e=document.querySelector(".social-icons");if(e){const t=document.createElement("a");t.href="https://hits.sh/junhkang.com/",t.target="_blank",t.className="profile-visitor-count",t.innerHTML=`
                <span class="visitor-label">ğŸ‘¥ ì´ ë°©ë¬¸ì</span>
                <img alt="ë°©ë¬¸ì" src="https://hits.sh/junhkang.com.svg?view=today-total&style=flat-square&label=&color=000000&labelColor=ffffff&background=ffffff"/>
            `,e.appendChild(t)}}}else{const e=document.createElement("img");e.style.opacity="0",e.style.position="absolute",e.style.pointerEvents="none",e.src="https://hits.sh/junhkang.com.svg?view=today-total&style=flat-square",document.body.appendChild(e)}})</script><meta property="og:type" content="article"><meta property="og:url" content="https://junhkang.com/posts/9/"><meta property="og:title" content="[PostgreSQL] SP-GiSTì¸ë±ìŠ¤ì˜ ì›ë¦¬ ë° íŠ¹ì§• | Jun Kang's Blog"><meta property="og:description" content="
1. SP-GiST ì¸ë±ìŠ¤ë€?
Space-Partitioned Generalized Search Treeì˜ ì•½ìì´ë‹¤.Â GiSTì¸ë±ìŠ¤ì™€ ê°™ì´ ì§€ë¦¬, ì¢Œí‘œ, ipì£¼ì†Œ ë°ì´í„° ë“± ë³µì¡í•œ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì¸ë±ìŠ¤ ìœ í˜•ì´ë‹¤. GiSTê°€ B-tree ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë³´ê´€ ë°ì´í„°ë¥¼ ì„¸ë¶„í™”í•  ë•Œ, ìœ„ê³„ì  ìˆœì„œë¥¼ ë”°ë¼ì•¼ í•˜ê¸°ì—, ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ìœ í˜•ìœ¼ë¡œ, GiSTë¡œ ë¶„ë¦¬ëœ ê³µê°„ì„ ë‹¤ì‹œ í•œë²ˆ ê³µê°„ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” ê°œë…ì´ë‹¤. SP-GiSTëŠ” ê²¹ì¹˜ì§€ ì•ŠëŠ” ì˜ì—­ìœ¼ë¡œ ì¬ê·€ì  ë¶„í• ì„ í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì— ì í•©í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ SP-GiSTëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜•, ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.
1-1. SP-GiST ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_spgist_example ON example_table USING spgist (column1);
1-2. ì¥ì 

ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë°ì´í„° íƒ€ì…ì— ì‚¬ìš© ê°€ëŠ¥ : ê¸°í•˜í•™, IP, ë‹¤ë¥¸ ë³µì¡í•œ ë°ì´í„° íƒ€ì…
ë³µì¡í•œ ì¿¼ë¦¬ì— ì‚¬ìš© ê°€ëŠ¥Â : ë³µì¡í•œ ë°ì´í„°êµ¬ì¡°, ì¿¼ë¦¬ì— ì‚¬ìš© ì í•©í•˜ë„ë¡ ì„¤ê³„
ë¹ ë¥¸ ê²€ìƒ‰ íš¨ìœ¨"><meta property="og:image" content="https://junhkang.com/images/og_img.jpg"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://junhkang.com/posts/9/"><meta property="twitter:title" content="[PostgreSQL] SP-GiSTì¸ë±ìŠ¤ì˜ ì›ë¦¬ ë° íŠ¹ì§• | Jun Kang's Blog"><meta property="twitter:description" content="
1. SP-GiST ì¸ë±ìŠ¤ë€?
Space-Partitioned Generalized Search Treeì˜ ì•½ìì´ë‹¤.Â GiSTì¸ë±ìŠ¤ì™€ ê°™ì´ ì§€ë¦¬, ì¢Œí‘œ, ipì£¼ì†Œ ë°ì´í„° ë“± ë³µì¡í•œ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì¸ë±ìŠ¤ ìœ í˜•ì´ë‹¤. GiSTê°€ B-tree ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë³´ê´€ ë°ì´í„°ë¥¼ ì„¸ë¶„í™”í•  ë•Œ, ìœ„ê³„ì  ìˆœì„œë¥¼ ë”°ë¼ì•¼ í•˜ê¸°ì—, ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ìœ í˜•ìœ¼ë¡œ, GiSTë¡œ ë¶„ë¦¬ëœ ê³µê°„ì„ ë‹¤ì‹œ í•œë²ˆ ê³µê°„ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” ê°œë…ì´ë‹¤. SP-GiSTëŠ” ê²¹ì¹˜ì§€ ì•ŠëŠ” ì˜ì—­ìœ¼ë¡œ ì¬ê·€ì  ë¶„í• ì„ í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì— ì í•©í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ SP-GiSTëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜•, ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.
1-1. SP-GiST ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_spgist_example ON example_table USING spgist (column1);
1-2. ì¥ì 

ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë°ì´í„° íƒ€ì…ì— ì‚¬ìš© ê°€ëŠ¥ : ê¸°í•˜í•™, IP, ë‹¤ë¥¸ ë³µì¡í•œ ë°ì´í„° íƒ€ì…
ë³µì¡í•œ ì¿¼ë¦¬ì— ì‚¬ìš© ê°€ëŠ¥Â : ë³µì¡í•œ ë°ì´í„°êµ¬ì¡°, ì¿¼ë¦¬ì— ì‚¬ìš© ì í•©í•˜ë„ë¡ ì„¤ê³„
ë¹ ë¥¸ ê²€ìƒ‰ íš¨ìœ¨"><meta property="twitter:image" content="https://junhkang.com/images/og_img.jpg"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9413249746505723" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-PV53RL6R3L"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PV53RL6R3L")}</script><meta property="og:url" content="https://junhkang.com/posts/9/"><meta property="og:site_name" content="Jun Kang's Blog"><meta property="og:title" content="[PostgreSQL] SP-GiSTì¸ë±ìŠ¤ì˜ ì›ë¦¬ ë° íŠ¹ì§•"><meta property="og:description" content=" 1. SP-GiST ì¸ë±ìŠ¤ë€? Space-Partitioned Generalized Search Treeì˜ ì•½ìì´ë‹¤.Â GiSTì¸ë±ìŠ¤ì™€ ê°™ì´ ì§€ë¦¬, ì¢Œí‘œ, ipì£¼ì†Œ ë°ì´í„° ë“± ë³µì¡í•œ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì¸ë±ìŠ¤ ìœ í˜•ì´ë‹¤. GiSTê°€ B-tree ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë³´ê´€ ë°ì´í„°ë¥¼ ì„¸ë¶„í™”í•  ë•Œ, ìœ„ê³„ì  ìˆœì„œë¥¼ ë”°ë¼ì•¼ í•˜ê¸°ì—, ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ìœ í˜•ìœ¼ë¡œ, GiSTë¡œ ë¶„ë¦¬ëœ ê³µê°„ì„ ë‹¤ì‹œ í•œë²ˆ ê³µê°„ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” ê°œë…ì´ë‹¤. SP-GiSTëŠ” ê²¹ì¹˜ì§€ ì•ŠëŠ” ì˜ì—­ìœ¼ë¡œ ì¬ê·€ì  ë¶„í• ì„ í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì— ì í•©í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ SP-GiSTëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜•, ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.
1-1. SP-GiST ì¸ë±ìŠ¤ ìƒì„± CREATE INDEX idx_spgist_example ON example_table USING spgist (column1); 1-2. ì¥ì  ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë°ì´í„° íƒ€ì…ì— ì‚¬ìš© ê°€ëŠ¥ : ê¸°í•˜í•™, IP, ë‹¤ë¥¸ ë³µì¡í•œ ë°ì´í„° íƒ€ì…
ë³µì¡í•œ ì¿¼ë¦¬ì— ì‚¬ìš© ê°€ëŠ¥Â : ë³µì¡í•œ ë°ì´í„°êµ¬ì¡°, ì¿¼ë¦¬ì— ì‚¬ìš© ì í•©í•˜ë„ë¡ ì„¤ê³„ ë¹ ë¥¸ ê²€ìƒ‰ íš¨ìœ¨"><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-13T18:11:46+00:00"><meta property="article:modified_time" content="2023-09-13T18:11:46+00:00"><meta property="article:tag" content="Index"><meta property="article:tag" content="Postgresql"><meta property="article:tag" content="SP-GIST"><meta name=twitter:card content="summary"><meta name=twitter:title content="[PostgreSQL] SP-GiSTì¸ë±ìŠ¤ì˜ ì›ë¦¬ ë° íŠ¹ì§•"><meta name=twitter:description content="
1. SP-GiST ì¸ë±ìŠ¤ë€?
Space-Partitioned Generalized Search Treeì˜ ì•½ìì´ë‹¤.Â GiSTì¸ë±ìŠ¤ì™€ ê°™ì´ ì§€ë¦¬, ì¢Œí‘œ, ipì£¼ì†Œ ë°ì´í„° ë“± ë³µì¡í•œ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì¸ë±ìŠ¤ ìœ í˜•ì´ë‹¤. GiSTê°€ B-tree ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë³´ê´€ ë°ì´í„°ë¥¼ ì„¸ë¶„í™”í•  ë•Œ, ìœ„ê³„ì  ìˆœì„œë¥¼ ë”°ë¼ì•¼ í•˜ê¸°ì—, ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ìœ í˜•ìœ¼ë¡œ, GiSTë¡œ ë¶„ë¦¬ëœ ê³µê°„ì„ ë‹¤ì‹œ í•œë²ˆ ê³µê°„ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” ê°œë…ì´ë‹¤. SP-GiSTëŠ” ê²¹ì¹˜ì§€ ì•ŠëŠ” ì˜ì—­ìœ¼ë¡œ ì¬ê·€ì  ë¶„í• ì„ í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì— ì í•©í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ SP-GiSTëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜•, ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.
1-1. SP-GiST ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_spgist_example ON example_table USING spgist (column1);
1-2. ì¥ì 

ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë°ì´í„° íƒ€ì…ì— ì‚¬ìš© ê°€ëŠ¥ : ê¸°í•˜í•™, IP, ë‹¤ë¥¸ ë³µì¡í•œ ë°ì´í„° íƒ€ì…
ë³µì¡í•œ ì¿¼ë¦¬ì— ì‚¬ìš© ê°€ëŠ¥Â : ë³µì¡í•œ ë°ì´í„°êµ¬ì¡°, ì¿¼ë¦¬ì— ì‚¬ìš© ì í•©í•˜ë„ë¡ ì„¤ê³„
ë¹ ë¥¸ ê²€ìƒ‰ íš¨ìœ¨"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://junhkang.com/posts/"},{"@type":"ListItem","position":2,"name":"[PostgreSQL] SP-GiSTì¸ë±ìŠ¤ì˜ ì›ë¦¬ ë° íŠ¹ì§•","item":"https://junhkang.com/posts/9/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[PostgreSQL] SP-GiSTì¸ë±ìŠ¤ì˜ ì›ë¦¬ ë° íŠ¹ì§•","name":"[PostgreSQL] SP-GiSTì¸ë±ìŠ¤ì˜ ì›ë¦¬ ë° íŠ¹ì§•","description":" 1. SP-GiST ì¸ë±ìŠ¤ë€? Space-Partitioned Generalized Search Treeì˜ ì•½ìì´ë‹¤.Â GiSTì¸ë±ìŠ¤ì™€ ê°™ì´ ì§€ë¦¬, ì¢Œí‘œ, ipì£¼ì†Œ ë°ì´í„° ë“± ë³µì¡í•œ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì¸ë±ìŠ¤ ìœ í˜•ì´ë‹¤. GiSTê°€ B-tree ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë³´ê´€ ë°ì´í„°ë¥¼ ì„¸ë¶„í™”í•  ë•Œ, ìœ„ê³„ì  ìˆœì„œë¥¼ ë”°ë¼ì•¼ í•˜ê¸°ì—, ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ìœ í˜•ìœ¼ë¡œ, GiSTë¡œ ë¶„ë¦¬ëœ ê³µê°„ì„ ë‹¤ì‹œ í•œë²ˆ ê³µê°„ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” ê°œë…ì´ë‹¤. SP-GiSTëŠ” ê²¹ì¹˜ì§€ ì•ŠëŠ” ì˜ì—­ìœ¼ë¡œ ì¬ê·€ì  ë¶„í• ì„ í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì— ì í•©í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ SP-GiSTëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜•, ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.\n1-1. SP-GiST ì¸ë±ìŠ¤ ìƒì„± CREATE INDEX idx_spgist_example ON example_table USING spgist (column1); 1-2. ì¥ì  ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë°ì´í„° íƒ€ì…ì— ì‚¬ìš© ê°€ëŠ¥ : ê¸°í•˜í•™, IP, ë‹¤ë¥¸ ë³µì¡í•œ ë°ì´í„° íƒ€ì…\në³µì¡í•œ ì¿¼ë¦¬ì— ì‚¬ìš© ê°€ëŠ¥Â : ë³µì¡í•œ ë°ì´í„°êµ¬ì¡°, ì¿¼ë¦¬ì— ì‚¬ìš© ì í•©í•˜ë„ë¡ ì„¤ê³„ ë¹ ë¥¸ ê²€ìƒ‰ íš¨ìœ¨\n","keywords":["Index","PostgreSQL","SP-GIST"],"articleBody":" 1. SP-GiST ì¸ë±ìŠ¤ë€? Space-Partitioned Generalized Search Treeì˜ ì•½ìì´ë‹¤.Â GiSTì¸ë±ìŠ¤ì™€ ê°™ì´ ì§€ë¦¬, ì¢Œí‘œ, ipì£¼ì†Œ ë°ì´í„° ë“± ë³µì¡í•œ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì¸ë±ìŠ¤ ìœ í˜•ì´ë‹¤. GiSTê°€ B-tree ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë³´ê´€ ë°ì´í„°ë¥¼ ì„¸ë¶„í™”í•  ë•Œ, ìœ„ê³„ì  ìˆœì„œë¥¼ ë”°ë¼ì•¼ í•˜ê¸°ì—, ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ìœ í˜•ìœ¼ë¡œ, GiSTë¡œ ë¶„ë¦¬ëœ ê³µê°„ì„ ë‹¤ì‹œ í•œë²ˆ ê³µê°„ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” ê°œë…ì´ë‹¤. SP-GiSTëŠ” ê²¹ì¹˜ì§€ ì•ŠëŠ” ì˜ì—­ìœ¼ë¡œ ì¬ê·€ì  ë¶„í• ì„ í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì— ì í•©í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ SP-GiSTëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜•, ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.\n1-1. SP-GiST ì¸ë±ìŠ¤ ìƒì„± CREATE INDEX idx_spgist_example ON example_table USING spgist (column1); 1-2. ì¥ì  ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë°ì´í„° íƒ€ì…ì— ì‚¬ìš© ê°€ëŠ¥ : ê¸°í•˜í•™, IP, ë‹¤ë¥¸ ë³µì¡í•œ ë°ì´í„° íƒ€ì…\në³µì¡í•œ ì¿¼ë¦¬ì— ì‚¬ìš© ê°€ëŠ¥Â : ë³µì¡í•œ ë°ì´í„°êµ¬ì¡°, ì¿¼ë¦¬ì— ì‚¬ìš© ì í•©í•˜ë„ë¡ ì„¤ê³„ ë¹ ë¥¸ ê²€ìƒ‰ íš¨ìœ¨\n1-3. ë‹¨ì  ë³µì¡í•œ êµ¬í˜„ ë°©ë²• : btree/hash ì— ë¹„í•´ êµ¬í˜„ì´ ë³µì¡í•˜ë‹¤.\nëŠë¦° ì—…ë°ì´íŠ¸ : SP-GiST indexëŠ” ì—…ë°ì´íŠ¸ê°€ ëŠë¦¬ë‹¤, ë³µì¡í•œ ì•Œê³ ë¦¬ì¦˜ì¸ ë§Œí¼ íŠ¹ì • ë°ì´í„° ë³€ê²½ì‹œ ì¸ë±ìŠ¤ì˜ ì—…ë°ì´íŠ¸ê°€ ëŠë¦¬ë‹¤. í•œì •ëœ ì¿¼ë¦¬ ìœ í˜• : ë³µì¡í•œ ìœ í˜•ì˜ ì¿¼ë¦¬ì— íŠ¹í™” ë˜ì–´ìˆë‹¤ë³´ë‹ˆ =, \u003cë“± ê°„ë‹¨í•œ íƒ€ì…ì˜ ë¹„êµì—ëŠ” ê³ ë ¤ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.\n1-4. ê·¸ë ‡ë‹¤ë©´ SP-GiSTëŠ” GiSTì¸ë±ìŠ¤ì™€ ì–´ë–»ê²Œ ë‹¤ë¥¼ê¹Œ? â–ªÂ GiSTì— ë¹„í•´ SP-GiSTë¥¼ ì§€ì›í•˜ëŠ” operatorê°€ ì ë‹¤. (SP-GiST ì§€ì› OperatorëŠ” ì•„ë˜ì—ì„œ í™•ì¸ê°€ëŠ¥) â–ªÂ GiSTì— ë¹„í•´ SP-GiSTë¥¼ ì§€ì›í•˜ëŠ” operatorê°€ ì ë‹¤. (SP-GiST ì§€ì› OperatorëŠ” ì•„ë˜ì—ì„œ í™•ì¸ê°€ëŠ¥)\n(GiSTëŠ” (k) NN searchesë¥¼ í¬í•¨í•œ ëª¨ë“  operator ì§€ì›ì„ ë°›ëŠ”ë‹¤.)\nâ–ªÂ ì¸ë±ìŠ¤ ìƒì„± ì‹œê°„ â–ªÂ GiST ì¸ë±ìŠ¤ì˜ ìƒì„±ì‹œê°„ì€ ë°ì´í„° ì¦ê°€ì— ë”°ë¼ ë¹„ì„ í˜•ì ì´ì§€ë§Œ ì•ˆì •ì ìœ¼ë¡œ ì¦ê°€í•œë‹¤.\nâ–ªÂ SP-GiST ì¸ë±ìŠ¤ëŠ” ì ì€ ë°ì´í„°ì¼ ê²½ìš° ë¹ ë¥´ì§€ë§Œ, ëª‡ ì–µ ê±´ì´ ë„˜ì–´ê°ˆ ê²½ìš° GiSTì— ë¹„í•´ í˜„ì €íˆ ë–¨ì–´ì§€ëŠ” ì†ë„ë¥¼ ë³´ì¸ë‹¤.\nâ–ªÂ ë°ì´í„° ë°€ì§‘ë„ì— ë”°ë¥¸ íš¨ìœ¨ì„± â–ªÂ GISTëŠ” ê¸°í•˜í•™ì  êµ¬ì¡°ì˜ ê³µê°„ ë¶„í¬ì™€ í† í´ë¡œì§€ì— í¬ê²Œ ë¯¼ê°í•˜ì§€ ì•Šë‹¤.\nâ–ªÂ SP_GISTëŠ” ê³µê°„ ë¶„í• (Spatial Partitioning)ë¡œ ì¸í•´ ì¤‘ì²©ë˜ì§€ ì•ŠëŠ” ì§€ì˜¤ë©”íŠ¸ë¦¬ì— ê°€ì¥ íš¨ê³¼ì ì´ë©° ê³µê°„ì ìœ¼ë¡œ ê· ì¼í•œ ë¶„í¬ì— ëŒ€í•œ ê²€ìƒ‰ì— íš¨ìœ¨ì ì´ë‹¤.\në°ì´í„° ì‚¬ì´ì¦ˆ, êµ¬ì¡°, ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬ ë“±ì— ë”°ë¼ ì¸ë±ìŠ¤ì˜ íš¨ìœ¨ì„±ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´, ì‹¤ì œ ë°ì´í„°ë¡œ GiST, SP-GiSTì˜ ì„±ëŠ¥í…ŒìŠ¤íŠ¸ê°€ ê¼­ í•„ìš”í•˜ë‹¤.\n2. ì§€ë„ / ì¢Œí‘œ í˜•íƒœì˜ ë°ì´í„° ì¸ë±ì‹± ë‹¤ìŒê³¼ ê°™ì´ ìœ„ë„/ê²½ë„ ë°ì´í„°ë¡œ ì¡°íšŒë¥¼ ì‹œë„í•  ì‹œ íš¨ìœ¨ì ì´ë‹¤\nSELECT city_name FROM locations WHERE ST_DWithin(ST_MakePoint(:longitude, :latitude), ST_MakePoint(longitude, latitude), :distance); ì§€ë„ì˜4ë¶„ í• ë¡œ ì§€ì†ì ìœ¼ë¡œ ë‚˜ëˆˆë‹¤. ê°ê°ì˜ ì‚¬ê°í˜•ì´ index page ì—­í• ì„ í•œë‹¤\në‚˜ëˆ ì§„ ë¶€ë¶„ì„ ì¢€ ë” ìƒì„¸íˆ ë³´ë©´\në‹¤ìŒ ì¢Œí‘œì—ì„œ (2,7) ìœ„ì— ì¡´ì¬í•˜ëŠ” ì¢Œí‘œë“¤ì„ ì°¾ê³  ì‹¶ë‹¤ë©´Â select * from points where p \u003e^ point '(2,7)' (4,4)ë¥¼ (2,7)ê³¼ ë¹„êµí•˜ì—¬ ë” í° ì¢Œí‘œê°€ ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ì˜ì—­ì„ í™•ì¸í•œë‹¤.\n1 ì‚¬ë¶„ë©´ì˜ ì¤‘ì‹¬ì¢Œí‘œì¸ (6,6)ìœ¼ë¡œ ë‹¤ì‹œ ë¹„êµí•˜ì—¬ ë” í° ì¢Œí‘œê°€ ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ì˜ì—­ì„ í™•ì¸í•œ í›„ ë‹¤ìŒê³¼ ê°™ì€ ì¸ë±ìŠ¤ êµ¬ì¡°ë¥¼ ìƒì„±í•œë‹¤.\n3. Built-in Operator Class Name Indexable Operators Ordering Operators box_ops Â« (box,box)\n\u0026\u003c (box,box)\n\u0026\u003e (box,box)\nÂ» (box,box)\n\u003c@ (box,box)\n@\u003e (box,box)\n~= (box,box)\n\u0026\u0026 (box,box)\nÂ«| (box,box)\n\u0026\u003c| (box,box)\n|\u0026\u003e (box,box)\n|Â» (box,box) \u003c-\u003e (box,point) inet_ops Â« (inet,inet)\nÂ«= (inet,inet)\nÂ» (inet,inet)\nÂ»= (inet,inet)\n= (inet,inet)\n\u003c\u003e (inet,inet)\n\u003c (inet,inet)\n\u003c= (inet,inet)\n\u003e (inet,inet)\n\u003e= (inet,inet)\n\u0026\u0026 (inet,inet) kd_point_ops |Â» (point,point)\nÂ« (point,point)\nÂ» (point,point)\nÂ«| (point,point)\n~= (point,point)\n\u003c@ (point,box) \u003c-\u003e (point,point) poly_ops Â« (polygon,polygon)\n\u0026\u003c (polygon,polygon)\n\u0026\u003e (polygon,polygon)\nÂ» (polygon,polygon)\n\u003c@ (polygon,polygon)\n@\u003e (polygon,polygon)\n~= (polygon,polygon)\n\u0026\u0026 (polygon,polygon)\nÂ«| (polygon,polygon)\n\u0026\u003c| (polygon,polygon)\n|Â» (polygon,polygon)\n|\u0026\u003e (polygon,polygon) \u003c-\u003e (polygon,point) quad_point_ops |Â» (point,point)\nÂ« (point,point)\nÂ» (point,point)\nÂ«| (point,point)\n~= (point,point)\n\u003c@ (point,box) \u003c-\u003e (point,point) range_ops = (anyrange,anyrange)\n\u0026\u0026 (anyrange,anyrange)\n@\u003e (anyrange,anyelement)\n@\u003e (anyrange,anyrange)\n\u003c@ (anyrange,anyrange)\nÂ« (anyrange,anyrange)\nÂ» (anyrange,anyrange)\n\u0026\u003c (anyrange,anyrange)\n\u0026\u003e (anyrange,anyrange)\n-|- (anyrange,anyrange) text_ops = (text,text)\n\u003c (text,text)\n\u003c= (text,text)\n\u003e (text,text)\n\u003e= (text,text)\n\u003c (text,text)\n\u003c= (text,text)\n\u003e= (text,text)\n\u003e (text,text)\n^@ (text,text) ì°¸ê³ \nhttps://www.postgresql.org/docs/current/spgist-builtin-opclasses.html\nhttps://gis.stackexchange.com/questions/374091/when-to-use-gist-and-when-to-use-sp-gist-index\n","wordCount":"526","inLanguage":"en","datePublished":"2023-09-13T18:11:46Z","dateModified":"2023-09-13T18:11:46Z","author":{"@type":"Person","name":"Jun Kang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://junhkang.com/posts/9/"},"publisher":{"@type":"Organization","name":"Jun Kang's Blog","logo":{"@type":"ImageObject","url":"https://junhkang.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://junhkang.com/ accesskey=h title="Jun Kang's Blog (Alt + H)">Jun Kang's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://junhkang.com/about/ title=About><span>About</span></a></li><li><a href=https://junhkang.com/sankun/ title=Sankun><span>Sankun</span></a></li><li><a href=https://junhkang.com/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://junhkang.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://junhkang.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://junhkang.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://junhkang.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://junhkang.com/guestbook/ title=Guestbook><span>Guestbook</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">[PostgreSQL] SP-GiSTì¸ë±ìŠ¤ì˜ ì›ë¦¬ ë° íŠ¹ì§•</h1><div class=post-meta><span title='2023-09-13 18:11:46 +0000 UTC'>September 13, 2023</span>&nbsp;Â·&nbsp;Jun Kang</div></header><div class=post-content><hr><h2 id=sp-gist-ì¸ë±ìŠ¤ë€ ke-size=size26>1. SP-GiST ì¸ë±ìŠ¤ë€?<a hidden class=anchor aria-hidden=true href=#sp-gist-ì¸ë±ìŠ¤ë€>#</a></h2><p>Space-Partitioned Generalized Search Treeì˜ ì•½ìì´ë‹¤.Â GiSTì¸ë±ìŠ¤ì™€ ê°™ì´ ì§€ë¦¬, ì¢Œí‘œ, ipì£¼ì†Œ ë°ì´í„° ë“± ë³µì¡í•œ ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì¸ë±ìŠ¤ ìœ í˜•ì´ë‹¤. GiSTê°€ B-tree ì¸ë±ìŠ¤ë¥¼ í†µí•´ ë³´ê´€ ë°ì´í„°ë¥¼ ì„¸ë¶„í™”í•  ë•Œ, ìœ„ê³„ì  ìˆœì„œë¥¼ ë”°ë¼ì•¼ í•˜ê¸°ì—, ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ìœ í˜•ìœ¼ë¡œ, GiSTë¡œ ë¶„ë¦¬ëœ ê³µê°„ì„ ë‹¤ì‹œ í•œë²ˆ ê³µê°„ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•˜ëŠ” ê°œë…ì´ë‹¤. SP-GiSTëŠ” ê²¹ì¹˜ì§€ ì•ŠëŠ” ì˜ì—­ìœ¼ë¡œ ì¬ê·€ì  ë¶„í• ì„ í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì— ì í•©í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ SP-GiSTëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ìœ í˜•, ë³µì¡í•œ ì¿¼ë¦¬ë¥¼ ì§€ì›í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤.</p><h3 id=sp-gist-ì¸ë±ìŠ¤-ìƒì„± style=color:#000;text-align:start ke-size=size23>1-1. SP-GiST ì¸ë±ìŠ¤ ìƒì„±<a hidden class=anchor aria-hidden=true href=#sp-gist-ì¸ë±ìŠ¤-ìƒì„±>#</a></h3><pre tabindex=0><code>CREATE INDEX idx_spgist_example ON example_table USING spgist (column1);
</code></pre><h3 id=ì¥ì  ke-size=size23>1-2. ì¥ì <a hidden class=anchor aria-hidden=true href=#ì¥ì >#</a></h3><blockquote><p><strong>ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë°ì´í„° íƒ€ì…ì— ì‚¬ìš© ê°€ëŠ¥</strong> : ê¸°í•˜í•™, IP, ë‹¤ë¥¸ ë³µì¡í•œ ë°ì´í„° íƒ€ì…<br><strong>ë³µì¡í•œ ì¿¼ë¦¬ì— ì‚¬ìš© ê°€ëŠ¥</strong>Â : ë³µì¡í•œ ë°ì´í„°êµ¬ì¡°, ì¿¼ë¦¬ì— ì‚¬ìš© ì í•©í•˜ë„ë¡ ì„¤ê³„
<strong>ë¹ ë¥¸ ê²€ìƒ‰ íš¨ìœ¨</strong></p></blockquote><h3 id=ë‹¨ì  ke-size=size23>1-3. ë‹¨ì <a hidden class=anchor aria-hidden=true href=#ë‹¨ì >#</a></h3><blockquote><p><strong>ë³µì¡í•œ êµ¬í˜„ ë°©ë²•</strong> : btree/hash ì— ë¹„í•´ êµ¬í˜„ì´ ë³µì¡í•˜ë‹¤.<br><strong>ëŠë¦° ì—…ë°ì´íŠ¸</strong> : SP-GiST indexëŠ” ì—…ë°ì´íŠ¸ê°€ ëŠë¦¬ë‹¤, ë³µì¡í•œ ì•Œê³ ë¦¬ì¦˜ì¸ ë§Œí¼ íŠ¹ì • ë°ì´í„° ë³€ê²½ì‹œ ì¸ë±ìŠ¤ì˜ ì—…ë°ì´íŠ¸ê°€ ëŠë¦¬ë‹¤.
<strong>í•œì •ëœ ì¿¼ë¦¬ ìœ í˜•</strong> : ë³µì¡í•œ ìœ í˜•ì˜ ì¿¼ë¦¬ì— íŠ¹í™” ë˜ì–´ìˆë‹¤ë³´ë‹ˆ =, &lt;ë“± ê°„ë‹¨í•œ íƒ€ì…ì˜ ë¹„êµì—ëŠ” ê³ ë ¤ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.</p></blockquote><h3 id=ê·¸ë ‡ë‹¤ë©´-sp-gistëŠ”-gistì¸ë±ìŠ¤ì™€-ì–´ë–»ê²Œ-ë‹¤ë¥¼ê¹Œ ke-size=size23>1-4. ê·¸ë ‡ë‹¤ë©´ SP-GiSTëŠ” GiSTì¸ë±ìŠ¤ì™€ ì–´ë–»ê²Œ ë‹¤ë¥¼ê¹Œ?<a hidden class=anchor aria-hidden=true href=#ê·¸ë ‡ë‹¤ë©´-sp-gistëŠ”-gistì¸ë±ìŠ¤ì™€-ì–´ë–»ê²Œ-ë‹¤ë¥¼ê¹Œ>#</a></h3><h4 id=gistì—-ë¹„í•´-sp-gistë¥¼-ì§€ì›í•˜ëŠ”-operatorê°€-ì ë‹¤-sp-gist-ì§€ì›-operatorëŠ”-ì•„ë˜ì—ì„œ-í™•ì¸ê°€ëŠ¥>â–ªÂ GiSTì— ë¹„í•´ SP-GiSTë¥¼ ì§€ì›í•˜ëŠ” operatorê°€ ì ë‹¤. (SP-GiST ì§€ì› OperatorëŠ” ì•„ë˜ì—ì„œ í™•ì¸ê°€ëŠ¥)<a hidden class=anchor aria-hidden=true href=#gistì—-ë¹„í•´-sp-gistë¥¼-ì§€ì›í•˜ëŠ”-operatorê°€-ì ë‹¤-sp-gist-ì§€ì›-operatorëŠ”-ì•„ë˜ì—ì„œ-í™•ì¸ê°€ëŠ¥>#</a></h4><blockquote><p>â–ªÂ GiSTì— ë¹„í•´ SP-GiSTë¥¼ ì§€ì›í•˜ëŠ” operatorê°€ ì ë‹¤. (SP-GiST ì§€ì› OperatorëŠ” ì•„ë˜ì—ì„œ í™•ì¸ê°€ëŠ¥)<br>(GiSTëŠ” (k) NN searchesë¥¼ í¬í•¨í•œ ëª¨ë“  operator ì§€ì›ì„ ë°›ëŠ”ë‹¤.)</p></blockquote><h4 id=ì¸ë±ìŠ¤-ìƒì„±-ì‹œê°„ ke-size=size20>â–ªÂ ì¸ë±ìŠ¤ ìƒì„± ì‹œê°„<a hidden class=anchor aria-hidden=true href=#ì¸ë±ìŠ¤-ìƒì„±-ì‹œê°„>#</a></h4><blockquote><p>â–ªÂ GiST ì¸ë±ìŠ¤ì˜ ìƒì„±ì‹œê°„ì€ ë°ì´í„° ì¦ê°€ì— ë”°ë¼ ë¹„ì„ í˜•ì ì´ì§€ë§Œ ì•ˆì •ì ìœ¼ë¡œ ì¦ê°€í•œë‹¤.<br>â–ªÂ SP-GiST ì¸ë±ìŠ¤ëŠ” ì ì€ ë°ì´í„°ì¼ ê²½ìš° ë¹ ë¥´ì§€ë§Œ, ëª‡ ì–µ ê±´ì´ ë„˜ì–´ê°ˆ ê²½ìš° GiSTì— ë¹„í•´ í˜„ì €íˆ ë–¨ì–´ì§€ëŠ” ì†ë„ë¥¼ ë³´ì¸ë‹¤.</p></blockquote><h4 id=ë°ì´í„°-ë°€ì§‘ë„ì—-ë”°ë¥¸-íš¨ìœ¨ì„± ke-size=size20>â–ªÂ ë°ì´í„° ë°€ì§‘ë„ì— ë”°ë¥¸ íš¨ìœ¨ì„±<a hidden class=anchor aria-hidden=true href=#ë°ì´í„°-ë°€ì§‘ë„ì—-ë”°ë¥¸-íš¨ìœ¨ì„±>#</a></h4><blockquote><p>â–ªÂ GISTëŠ” ê¸°í•˜í•™ì  êµ¬ì¡°ì˜ ê³µê°„ ë¶„í¬ì™€ í† í´ë¡œì§€ì— í¬ê²Œ ë¯¼ê°í•˜ì§€ ì•Šë‹¤.<br>â–ªÂ SP_GISTëŠ” ê³µê°„ ë¶„í• (Spatial Partitioning)ë¡œ ì¸í•´ ì¤‘ì²©ë˜ì§€ ì•ŠëŠ” ì§€ì˜¤ë©”íŠ¸ë¦¬ì— ê°€ì¥ íš¨ê³¼ì ì´ë©° ê³µê°„ì ìœ¼ë¡œ ê· ì¼í•œ ë¶„í¬ì— ëŒ€í•œ ê²€ìƒ‰ì— íš¨ìœ¨ì ì´ë‹¤.</p></blockquote><p>ë°ì´í„° ì‚¬ì´ì¦ˆ, êµ¬ì¡°, ì‚¬ìš©í•˜ëŠ” ì¿¼ë¦¬ ë“±ì— ë”°ë¼ ì¸ë±ìŠ¤ì˜ íš¨ìœ¨ì„±ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´, ì‹¤ì œ ë°ì´í„°ë¡œ GiST, SP-GiSTì˜ ì„±ëŠ¥í…ŒìŠ¤íŠ¸ê°€ ê¼­ í•„ìš”í•˜ë‹¤.</p><h2 id=ì§€ë„-ì¢Œí‘œ-í˜•íƒœì˜-ë°ì´í„°-ì¸ë±ì‹± ke-size=size26>2. ì§€ë„ / ì¢Œí‘œ í˜•íƒœì˜ ë°ì´í„° ì¸ë±ì‹±<a hidden class=anchor aria-hidden=true href=#ì§€ë„-ì¢Œí‘œ-í˜•íƒœì˜-ë°ì´í„°-ì¸ë±ì‹±>#</a></h2><p>ë‹¤ìŒê³¼ ê°™ì´ ìœ„ë„/ê²½ë„ ë°ì´í„°ë¡œ ì¡°íšŒë¥¼ ì‹œë„í•  ì‹œ íš¨ìœ¨ì ì´ë‹¤</p><pre tabindex=0><code>SELECT city_name

FROM locations

WHERE ST_DWithin(ST_MakePoint(:longitude, :latitude), ST_MakePoint(longitude, latitude), :distance);
</code></pre><p><img loading=lazy src=/images/posts/9/img.png></p><p>ì§€ë„ì˜4ë¶„ í• ë¡œ ì§€ì†ì ìœ¼ë¡œ ë‚˜ëˆˆë‹¤. ê°ê°ì˜ ì‚¬ê°í˜•ì´ index page ì—­í• ì„ í•œë‹¤</p><p>ë‚˜ëˆ ì§„ ë¶€ë¶„ì„ ì¢€ ë” ìƒì„¸íˆ ë³´ë©´</p><p><img loading=lazy src=/images/posts/9/img_1.png></p><p>ë‹¤ìŒ ì¢Œí‘œì—ì„œ (2,7) ìœ„ì— ì¡´ì¬í•˜ëŠ” ì¢Œí‘œë“¤ì„ ì°¾ê³  ì‹¶ë‹¤ë©´Â </p><pre tabindex=0><code>select * from points where p &gt;^ point &#39;(2,7)&#39;
</code></pre><p>(4,4)ë¥¼ (2,7)ê³¼ ë¹„êµí•˜ì—¬ ë” í° ì¢Œí‘œê°€ ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ì˜ì—­ì„ í™•ì¸í•œë‹¤.</p><p>1 ì‚¬ë¶„ë©´ì˜ ì¤‘ì‹¬ì¢Œí‘œì¸ (6,6)ìœ¼ë¡œ ë‹¤ì‹œ ë¹„êµí•˜ì—¬ ë” í° ì¢Œí‘œê°€ ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ì˜ì—­ì„ í™•ì¸í•œ í›„ ë‹¤ìŒê³¼ ê°™ì€ ì¸ë±ìŠ¤ êµ¬ì¡°ë¥¼ ìƒì„±í•œë‹¤.</p><p><img loading=lazy src=/images/posts/9/img_2.png>
Â </p><h2 id=3-built-in-operator-class>3. Built-in Operator Class<a hidden class=anchor aria-hidden=true href=#3-built-in-operator-class>#</a></h2><table><thead><tr><th>Name</th><th>Indexable Operators</th><th>Ordering Operators</th></tr></thead><tbody><tr><td>box_ops</td><td>&#171; (box,box)<br>&&lt; (box,box)<br>&> (box,box)<br>&#187; (box,box)<br>&lt;@ (box,box)<br>@> (box,box)<br>~= (box,box)<br>&& (box,box)<br>&#171;| (box,box)<br>&&lt;| (box,box)<br>|&> (box,box)<br>|&#187; (box,box)</td><td>&lt;-> (box,point)</td></tr><tr><td>inet_ops</td><td>&#171; (inet,inet)<br>&#171;= (inet,inet)<br>&#187; (inet,inet)<br>&#187;= (inet,inet)<br>= (inet,inet)<br>&lt;> (inet,inet)<br>&lt; (inet,inet)<br>&lt;= (inet,inet)<br>> (inet,inet)<br>>= (inet,inet)<br>&& (inet,inet)</td><td></td></tr><tr><td>kd_point_ops</td><td>|&#187; (point,point)<br>&#171; (point,point)<br>&#187; (point,point)<br>&#171;| (point,point)<br>~= (point,point)<br>&lt;@ (point,box)</td><td>&lt;-> (point,point)</td></tr><tr><td>poly_ops</td><td>&#171; (polygon,polygon)<br>&&lt; (polygon,polygon)<br>&> (polygon,polygon)<br>&#187; (polygon,polygon)<br>&lt;@ (polygon,polygon)<br>@> (polygon,polygon)<br>~= (polygon,polygon)<br>&& (polygon,polygon)<br>&#171;| (polygon,polygon)<br>&&lt;| (polygon,polygon)<br>|&#187; (polygon,polygon)<br>|&> (polygon,polygon)</td><td>&lt;-> (polygon,point)</td></tr><tr><td>quad_point_ops</td><td>|&#187; (point,point)<br>&#171; (point,point)<br>&#187; (point,point)<br>&#171;| (point,point)<br>~= (point,point)<br>&lt;@ (point,box)</td><td>&lt;-> (point,point)</td></tr><tr><td>range_ops</td><td>= (anyrange,anyrange)<br>&& (anyrange,anyrange)<br>@> (anyrange,anyelement)<br>@> (anyrange,anyrange)<br>&lt;@ (anyrange,anyrange)<br>&#171; (anyrange,anyrange)<br>&#187; (anyrange,anyrange)<br>&&lt; (anyrange,anyrange)<br>&> (anyrange,anyrange)<br>-|- (anyrange,anyrange)</td><td></td></tr><tr><td>text_ops</td><td>= (text,text)<br>&lt; (text,text)<br>&lt;= (text,text)<br>> (text,text)<br>>= (text,text)<br><del>&lt;</del> (text,text)<br><del>&lt;=</del> (text,text)<br><del>>=</del> (text,text)<br><del>></del> (text,text)<br>^@ (text,text)</td><td></td></tr></tbody></table><p>ì°¸ê³ </p><ul><li><p><a href=https://www.postgresql.org/docs/current/spgist-builtin-opclasses.html>https://www.postgresql.org/docs/current/spgist-builtin-opclasses.html</a></p></li><li><p><a href=https://gis.stackexchange.com/questions/374091/when-to-use-gist-and-when-to-use-sp-gist-index>https://gis.stackexchange.com/questions/374091/when-to-use-gist-and-when-to-use-sp-gist-index</a></p></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://junhkang.com/tags/index/>Index</a></li><li><a href=https://junhkang.com/tags/postgresql/>Postgresql</a></li><li><a href=https://junhkang.com/tags/sp-gist/>SP-GIST</a></li></ul></footer><div class=giscus><script src=https://giscus.app/client.js data-repo=junhkang/blog data-repo-id=R_kgDON3GHLw data-category=General data-category-id=DIC_kwDON3GHL84Cm5Fc data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko crossorigin=anonymous async></script></div></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>