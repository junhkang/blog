<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="noindex, nofollow"><title>[Linux] 스왑 메모리(Swap Memory)의 개념과 적용방법 | Jun Kang's Blog</title>
<meta name=keywords content="Linux,swap"><meta name=description content="
1. 리눅스 Swap 메모리 설정 (예제는 EC2 환경에서 진행)
1-1. Swap 메모리 확인
swapon -s 

free -h


shared = 하나의 프로세스에서 다른 프로세스의 데이터에 효율적으로 접근하기 위해 사용하는 메모리
buff/cache = 버퍼와 캐시를 위해 사용하는 메모리, 커널이 성능향상을 위해 캐시 영역으로 사용되는 메모리
buff = 프로세스가 사용하는 메모리 영역이 아닌 시스템 성능향상을 위해 커널이 사용하고 있는 영역
cache = 캐시영역의 메모리, I/O 작업을 더 빠르게 하기 위해 커널에서 사용"><meta name=author content="Jun Kang"><link rel=canonical href=http://localhost:1313/posts/34/><link crossorigin=anonymous href=/assets/css/stylesheet.74700298e7318c6a254db46da1e4db20401442caa2ca390299eb96ba781bad05.css integrity="sha256-dHACmOcxjGolTbRtoeTbIEAUQsqiyjkCmeuWungbrQU=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/34/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Jun Kang's Blog (Alt + H)">Jun Kang's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/about/ title=About><span>About</span></a></li><li><a href=http://localhost:1313/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://localhost:1313/sankun/ title=Sankun><span>Sankun</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/posts/ title=Posts><span>Posts</span></a></li><li><a href=http://localhost:1313/archives/ title=Archives><span>Archives</span></a></li><li><a href=http://localhost:1313/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">[Linux] 스왑 메모리(Swap Memory)의 개념과 적용방법</h1><div class=post-meta><span title='2023-10-23 15:58:46 +0000 UTC'>October 23, 2023</span>&nbsp;·&nbsp;Jun Kang</div></header><div class=post-content><hr><h2 id=리눅스-swap-메모리-설정-예제는-ec2-환경에서-진행 ke-size=size26>1. 리눅스 Swap 메모리 설정 (예제는 EC2 환경에서 진행)<a hidden class=anchor aria-hidden=true href=#리눅스-swap-메모리-설정-예제는-ec2-환경에서-진행>#</a></h2><h3 id=swap-메모리-확인 style=color:#333;text-align:start ke-size=size23>1-1. Swap 메모리 확인<a hidden class=anchor aria-hidden=true href=#swap-메모리-확인>#</a></h3><pre tabindex=0><code>swapon -s 

free -h
</code></pre><p><img loading=lazy src=/images/posts/34/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-10-23%20%EC%98%A4%ED%9B%84%203.25.49.png></p><blockquote><p><strong>shared =</strong> 하나의 프로세스에서 다른 프로세스의 데이터에 효율적으로 접근하기 위해 사용하는 메모리<br><strong>buff/cache =</strong> 버퍼와 캐시를 위해 사용하는 메모리, 커널이 성능향상을 위해 캐시 영역으로 사용되는 메모리<br><strong>buff =</strong> 프로세스가 사용하는 메모리 영역이 아닌 시스템 성능향상을 위해 커널이 사용하고 있는 영역<br><strong>cache =</strong> 캐시영역의 메모리, I/O 작업을 더 빠르게 하기 위해 커널에서 사용</p><p><strong>total - buff/cache - free =</strong> 사용중인 메모리<br><strong>total - used - buff/cache =</strong> 실제 사용가능한 메모리</p></blockquote><h3 id=swap-메모리-추가 style=color:#333;text-align:start ke-size=size23>1-2. Swap 메모리 추가<a hidden class=anchor aria-hidden=true href=#swap-메모리-추가>#</a></h3><pre tabindex=0><code>sudo dd if=/dev/zero of=/swapfile bs=1024 count=200000
</code></pre><blockquote><p><strong>bs =</strong> 포멧 단위 (bs = 1M 로도 사용 가능)<br><strong>count =</strong> 블록수, 1kb를 200000번 /dev/zero로 초기화하기에 총 200MB의 공간을 Swap 파일로 포맷한 것으로 메모리 크기를 의미한다. (count=2000000 -> 2GB swap 메모리)</p></blockquote><p><img loading=lazy src=/images/posts/34/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-10-23%20%EC%98%A4%ED%9B%84%203.26.38.png></p><p><img loading=lazy src=/images/posts/34/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-10-23%20%EC%98%A4%ED%9B%84%203.27.53.png></p><h3 id=mkswap으로-swap-파일로-포멧 style=color:#333;text-align:start ke-size=size23>1-3. mkswap으로 Swap 파일로 포멧<a hidden class=anchor aria-hidden=true href=#mkswap으로-swap-파일로-포멧>#</a></h3><pre tabindex=0><code>sudo mkswap swapfile

sudo chmod 600 /swapfile
</code></pre><p><img loading=lazy src=/images/posts/34/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-10-23%20%EC%98%A4%ED%9B%84%203.28.23.png></p><p><img loading=lazy src=/images/posts/34/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-10-23%20%EC%98%A4%ED%9B%84%203.28.59.png></p><h3 id=swap-메모리-활성화 style=color:#333;text-align:start ke-size=size23>1-4. Swap 메모리 활성화<a hidden class=anchor aria-hidden=true href=#swap-메모리-활성화>#</a></h3><pre tabindex=0><code>-- 단일 Swap 메모리 on
sudo swapon swapfile

-- 전체 Swap 메모리 on
swapon -a
</code></pre><p><strong>swapon: /swapfile: swapon failed: Device or resource busy</strong></p><p>에러가 뜬다면 sudo swapoff /swapfile로 Swap 비활성화 후 다시 시도해 주면 된다.</p><p><img loading=lazy src=/images/posts/34/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202023-10-23%20%EC%98%A4%ED%9B%84%203.35.11.png></p><p>Swap 메모리가 활성된 후에 다시 "1-1. Swap 메모리 확인"을 해보면, 설정값만큼의 Swap 메모리가 활성화된 것을 확인할 수 있다.
 </p><h3 id=1-5-시스템-재시작-시에도-swap-메모리-활성화>1-5. 시스템 재시작 시에도 Swap 메모리 활성화<a hidden class=anchor aria-hidden=true href=#1-5-시스템-재시작-시에도-swap-메모리-활성화>#</a></h3><pre tabindex=0><code>sudo vi /etc/fstab
</code></pre><p>해당 파일을 열어 맨 아랫줄에</p><pre tabindex=0><code>/sawpfile swap swap default 0 0
</code></pre><p>를 추가하면 된다.
 </p><h3 id=1-6-swap-메모리-비활성화>1-6. Swap 메모리 비활성화<a hidden class=anchor aria-hidden=true href=#1-6-swap-메모리-비활성화>#</a></h3><pre tabindex=0><code>-- 단일 Swap 메모리 off
sudo swapoff swapfile

-- 전체 Swap 메모리 off
swapoff -a
</code></pre><h3 id=swap-메모리-삭제 style=color:#333;text-align:start ke-size=size23>1-7. Swap 메모리 삭제<a hidden class=anchor aria-hidden=true href=#swap-메모리-삭제>#</a></h3><pre tabindex=0><code>sudo rm -r swapfile
</code></pre><p>swap out -> swap in 되면서 실제 물리 메모리로 이동한다. (다소 시간이 걸리는 작업이다.)</p><h3 id=swap-영역-초기화 style=color:#333;text-align:start ke-size=size23>1-8. Swap 영역 초기화<a hidden class=anchor aria-hidden=true href=#swap-영역-초기화>#</a></h3><p><strong>Swap 파티션 초기화</strong></p><pre tabindex=0><code>sudo mkswap /dev/{swap partition}
</code></pre><p><strong>Swap 파일 초기화</strong></p><pre tabindex=0><code>sudo truncate -s 0 /path/to/swapfile

sudo chmod 600 /path/to/swapfile

sudo mkswap /path/to/swapfile
</code></pre><p>Swap 초기화 시, Swap 영역의 데이터가 모두 삭제된다. Swap 메모리 초기화 시에는 해당 파티션, 해당 파일을 원마운트하고 비워야 한다.</p><h2 id=swap-영역-다시-활성화 style=color:#333;text-align:start ke-size=size26>1-9. Swap 영역 다시 활성화<a hidden class=anchor aria-hidden=true href=#swap-영역-다시-활성화>#</a></h2><p><strong>Swap 파티션 활성화</strong></p><pre tabindex=0><code>sudo swapon /dev/{swap partition}
</code></pre><p><strong>Swap 파일 활성화</strong></p><pre tabindex=0><code>sudo swapon /path/to/swapfile
</code></pre><h2 id=swap-메모리란 ke-size=size26>2. Swap 메모리란?<a hidden class=anchor aria-hidden=true href=#swap-메모리란>#</a></h2><p>주 메모리(RAM)가 모두 사용되어 추가 메모리가 필요할 때 디스크 공간을 활용하여 부족한 메모리를 대체할 수 있는 공간이다. 운영 체제는 일부 데이터를 RAM에서 디스크의 Swap 영역(하드디스크의 특정 파티션 혹은 Swap 파일)으로 옮겨 메모리 부족상태를 해결한다. 하드디스크를 사용하는 것이 아니라 속도 측면에선 아주 떨어지지만 시스템 안정성과 성능 유지에 큰 역할을 한다. 실제 메모리보다 큰 프로그램을 실행하거나 동시에 더 많은 프로세스를 실행하는 데 사용된다. 예를 들어 ec2 프리티어의 경우 t2.micro RAM 은 1G 뿐이지만 임시로 swap 메모리를 설정하면, 여러 개 프로세스 띄울 수 있게 된다.
 </p><p>그렇다면 RAM이 낮은 인스턴스를 사용하고 Swap메모리를 사용하는 것이 비용적으로 효율적일까?</p><p>Swap 메모리는 데이터 전송속도가 느리기에 Swap 메모리 초기화 시에는 해당 파티션, 해당 파일을 원마운트하고 비워야 한다. 영역으로 데이터를 옮기는 작업이 발생할 때 성능이 저하된다. 빈번한 Swap이 발생할 경우 성능향상을 위해서 RAM을 추가해야 한다.
 </p><p> </p><p>참고</p><ul><li><p><a href=https://reakwon.tistory.com/96>https://reakwon.tistory.com/96</a></p></li><li><p><a href=https://jw910911.tistory.com/122>https://jw910911.tistory.com/122</a></p></li><li><p><a href=https://serverfault.com/questions/688627/swapon-failed-device-or-resource-busy-on-mounted-disk>https://serverfault.com/questions/688627/swapon-failed-device-or-resource-busy-on-mounted-disk</a>
 </p></li></ul><p> </p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/linux/>Linux</a></li><li><a href=http://localhost:1313/tags/swap/>Swap</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>Jun Kang's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>