<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=50666&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[PostgreSQL] 미사용 인덱스(INDEX) 찾기 및 삭제, 성능향상 | Jun Kang's Blog</title>
<meta name=keywords content="Index,PostgreSQL,인덱스,미사용"><meta name=description content="
 

1. 인덱스(INDEX) 상세 개념
Postgresql 인덱스(INDEX)개념 및 생성, 삭제, 분석, 설계 방법
2. 미사용 인덱스

간단히 말해, 인덱스는 지정 컬럼에 매핑된 정보를 별도로 저장하고 있다. 보통 플랜 확인을 통해 효율적으로 인덱스를 추가하여 쿼리 최적화를 진행하게 된다. 오래되고 변경이 잦은 어플리케이션일수록 미사용 인덱스는 늘어나고, 인덱스가 사용되지 않는 경우를 매번 모니터링하여 삭제하는 것은 힘든 일이다. 하지만 불필요 인덱스는 디비 성능저하 및 vacuum 코스트를 증가시키기에, 최적화된 인덱스 생성만큼 최적화된 인덱스 삭제도 중요하다."><meta name=author content="Jun Kang"><link rel=canonical href=http://localhost:50666/posts/14/><meta name=google-site-verification content="G-PV53RL6R3L"><link crossorigin=anonymous href=/assets/css/stylesheet.74700298e7318c6a254db46da1e4db20401442caa2ca390299eb96ba781bad05.css integrity="sha256-dHACmOcxjGolTbRtoeTbIEAUQsqiyjkCmeuWungbrQU=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:50666/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:50666/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:50666/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:50666/apple-touch-icon.png><link rel=mask-icon href=http://localhost:50666/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:50666/posts/14/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:50666/posts/14/"><meta property="og:title" content="[PostgreSQL] 미사용 인덱스(INDEX) 찾기 및 삭제, 성능향상 | Jun Kang's Blog"><meta property="og:description" content="
 

1. 인덱스(INDEX) 상세 개념
Postgresql 인덱스(INDEX)개념 및 생성, 삭제, 분석, 설계 방법
2. 미사용 인덱스

간단히 말해, 인덱스는 지정 컬럼에 매핑된 정보를 별도로 저장하고 있다. 보통 플랜 확인을 통해 효율적으로 인덱스를 추가하여 쿼리 최적화를 진행하게 된다. 오래되고 변경이 잦은 어플리케이션일수록 미사용 인덱스는 늘어나고, 인덱스가 사용되지 않는 경우를 매번 모니터링하여 삭제하는 것은 힘든 일이다. 하지만 불필요 인덱스는 디비 성능저하 및 vacuum 코스트를 증가시키기에, 최적화된 인덱스 생성만큼 최적화된 인덱스 삭제도 중요하다."><meta property="og:image" content="http://localhost:50666/images/og_img.jpg"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="http://localhost:50666/posts/14/"><meta property="twitter:title" content="[PostgreSQL] 미사용 인덱스(INDEX) 찾기 및 삭제, 성능향상 | Jun Kang's Blog"><meta property="twitter:description" content="
 

1. 인덱스(INDEX) 상세 개념
Postgresql 인덱스(INDEX)개념 및 생성, 삭제, 분석, 설계 방법
2. 미사용 인덱스

간단히 말해, 인덱스는 지정 컬럼에 매핑된 정보를 별도로 저장하고 있다. 보통 플랜 확인을 통해 효율적으로 인덱스를 추가하여 쿼리 최적화를 진행하게 된다. 오래되고 변경이 잦은 어플리케이션일수록 미사용 인덱스는 늘어나고, 인덱스가 사용되지 않는 경우를 매번 모니터링하여 삭제하는 것은 힘든 일이다. 하지만 불필요 인덱스는 디비 성능저하 및 vacuum 코스트를 증가시키기에, 최적화된 인덱스 생성만큼 최적화된 인덱스 삭제도 중요하다."><meta property="twitter:image" content="http://localhost:50666/images/og_img.jpg"><script async src="https://www.googletagmanager.com/gtag/js?id=G-LE7D0WZLFJ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LE7D0WZLFJ")}</script><meta property="og:url" content="http://localhost:50666/posts/14/"><meta property="og:site_name" content="Jun Kang's Blog"><meta property="og:title" content="[PostgreSQL] 미사용 인덱스(INDEX) 찾기 및 삭제, 성능향상"><meta property="og:description" content=" 1. 인덱스(INDEX) 상세 개념 Postgresql 인덱스(INDEX)개념 및 생성, 삭제, 분석, 설계 방법
2. 미사용 인덱스 간단히 말해, 인덱스는 지정 컬럼에 매핑된 정보를 별도로 저장하고 있다. 보통 플랜 확인을 통해 효율적으로 인덱스를 추가하여 쿼리 최적화를 진행하게 된다. 오래되고 변경이 잦은 어플리케이션일수록 미사용 인덱스는 늘어나고, 인덱스가 사용되지 않는 경우를 매번 모니터링하여 삭제하는 것은 힘든 일이다. 하지만 불필요 인덱스는 디비 성능저하 및 vacuum 코스트를 증가시키기에, 최적화된 인덱스 생성만큼 최적화된 인덱스 삭제도 중요하다."><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-06T16:52:50+00:00"><meta property="article:modified_time" content="2023-10-06T16:52:50+00:00"><meta property="article:tag" content="Index"><meta property="article:tag" content="PostgreSQL"><meta property="article:tag" content="인덱스"><meta property="article:tag" content="미사용"><meta name=twitter:card content="summary"><meta name=twitter:title content="[PostgreSQL] 미사용 인덱스(INDEX) 찾기 및 삭제, 성능향상"><meta name=twitter:description content="
 

1. 인덱스(INDEX) 상세 개념
Postgresql 인덱스(INDEX)개념 및 생성, 삭제, 분석, 설계 방법
2. 미사용 인덱스

간단히 말해, 인덱스는 지정 컬럼에 매핑된 정보를 별도로 저장하고 있다. 보통 플랜 확인을 통해 효율적으로 인덱스를 추가하여 쿼리 최적화를 진행하게 된다. 오래되고 변경이 잦은 어플리케이션일수록 미사용 인덱스는 늘어나고, 인덱스가 사용되지 않는 경우를 매번 모니터링하여 삭제하는 것은 힘든 일이다. 하지만 불필요 인덱스는 디비 성능저하 및 vacuum 코스트를 증가시키기에, 최적화된 인덱스 생성만큼 최적화된 인덱스 삭제도 중요하다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:50666/posts/"},{"@type":"ListItem","position":2,"name":"[PostgreSQL] 미사용 인덱스(INDEX) 찾기 및 삭제, 성능향상","item":"http://localhost:50666/posts/14/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[PostgreSQL] 미사용 인덱스(INDEX) 찾기 및 삭제, 성능향상","name":"[PostgreSQL] 미사용 인덱스(INDEX) 찾기 및 삭제, 성능향상","description":" 1. 인덱스(INDEX) 상세 개념 Postgresql 인덱스(INDEX)개념 및 생성, 삭제, 분석, 설계 방법\n2. 미사용 인덱스 간단히 말해, 인덱스는 지정 컬럼에 매핑된 정보를 별도로 저장하고 있다. 보통 플랜 확인을 통해 효율적으로 인덱스를 추가하여 쿼리 최적화를 진행하게 된다. 오래되고 변경이 잦은 어플리케이션일수록 미사용 인덱스는 늘어나고, 인덱스가 사용되지 않는 경우를 매번 모니터링하여 삭제하는 것은 힘든 일이다. 하지만 불필요 인덱스는 디비 성능저하 및 vacuum 코스트를 증가시키기에, 최적화된 인덱스 생성만큼 최적화된 인덱스 삭제도 중요하다.\n","keywords":["Index","PostgreSQL","인덱스","미사용"],"articleBody":" 1. 인덱스(INDEX) 상세 개념 Postgresql 인덱스(INDEX)개념 및 생성, 삭제, 분석, 설계 방법\n2. 미사용 인덱스 간단히 말해, 인덱스는 지정 컬럼에 매핑된 정보를 별도로 저장하고 있다. 보통 플랜 확인을 통해 효율적으로 인덱스를 추가하여 쿼리 최적화를 진행하게 된다. 오래되고 변경이 잦은 어플리케이션일수록 미사용 인덱스는 늘어나고, 인덱스가 사용되지 않는 경우를 매번 모니터링하여 삭제하는 것은 힘든 일이다. 하지만 불필요 인덱스는 디비 성능저하 및 vacuum 코스트를 증가시키기에, 최적화된 인덱스 생성만큼 최적화된 인덱스 삭제도 중요하다.\n2-1. 미사용 인덱스 검색 쿼리 SELECT schemaname AS schema_name, relname AS table_name, indexrelname AS index_name, pg_size_pretty(pg_relation_size(indexrelid::regclass)) AS index_size, idx_scan, idx_tup_read, idx_tup_fetch FROM pg_stat_user_indexes ORDER BY idx_scan ASC 2-2. 인덱스 삭제 쿼리 DROP INDEX [ CONCURRENTLY ] [ IF EXISTS ] name [, ...] [ CASCADE | RESTRICT ] --simple DROP INDEX IDX_NAME -- 옵션 IF EXISTS 해당 인덱스가 없어도 오류를 내지 않고, 알림 메시지만 보여줌 CASCADE 해당 인덱스와 의존성 관계가 있는 모든 객체도 함께 삭제한, 삭제될 다른 객제와 관계된 또 다른 객체들도 함께 삭제 RESTRICT 해당 인덱스와 의존성 관계가 있는 객체가 있으면 작업을 중지 (기본값) 2-3. 인덱스 삭제 시 주의사항 검색된 인덱스가 실제 미사용 인덱스인지 재검토가 필요하다. \\ 애초에 사용주기가 긴 인덱스의 경우, 사용되는 인덱스이지만 검색되는 경우도 있다.\\ 인덱스는 해당 소유자만 삭제 가능하다. ","wordCount":"192","inLanguage":"en","datePublished":"2023-10-06T16:52:50Z","dateModified":"2023-10-06T16:52:50Z","author":{"@type":"Person","name":"Jun Kang"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:50666/posts/14/"},"publisher":{"@type":"Organization","name":"Jun Kang's Blog","logo":{"@type":"ImageObject","url":"http://localhost:50666/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:50666/ accesskey=h title="Jun Kang's Blog (Alt + H)">Jun Kang's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:50666/about/ title=About><span>About</span></a></li><li><a href=http://localhost:50666/sankun/ title=Sankun><span>Sankun</span></a></li><li><a href=http://localhost:50666/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://localhost:50666/posts/ title=Posts><span>Posts</span></a></li><li><a href=http://localhost:50666/archives/ title=Archives><span>Archives</span></a></li><li><a href=http://localhost:50666/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:50666/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">[PostgreSQL] 미사용 인덱스(INDEX) 찾기 및 삭제, 성능향상</h1><div class=post-meta><span title='2023-10-06 16:52:50 +0000 UTC'>October 6, 2023</span>&nbsp;·&nbsp;Jun Kang</div></header><div class=post-content><hr><p> </p><p><img loading=lazy src=/images/posts/14/img.png></p><h2 id=인덱스index-상세-개념 ke-size=size26>1. 인덱스(INDEX) 상세 개념<a hidden class=anchor aria-hidden=true href=#인덱스index-상세-개념>#</a></h2><p><a href=https://junhkang.tistory.com/5>Postgresql 인덱스(INDEX)개념 및 생성, 삭제, 분석, 설계 방법</a></p><h2 id=미사용-인덱스 ke-size=size26>2. 미사용 인덱스<a hidden class=anchor aria-hidden=true href=#미사용-인덱스>#</a></h2><blockquote><p>간단히 말해, 인덱스는 지정 컬럼에 매핑된 정보를 별도로 저장하고 있다. 보통 플랜 확인을 통해 효율적으로 인덱스를 추가하여 쿼리 최적화를 진행하게 된다. 오래되고 변경이 잦은 어플리케이션일수록 미사용 인덱스는 늘어나고, 인덱스가 사용되지 않는 경우를 매번 모니터링하여 삭제하는 것은 힘든 일이다. 하지만 불필요 인덱스는 디비 성능저하 및 vacuum 코스트를 증가시키기에, 최적화된 인덱스 생성만큼 최적화된 인덱스 삭제도 중요하다.</p></blockquote><h3 id=미사용-인덱스-검색-쿼리 ke-size=size23>     2-1. 미사용 인덱스 검색 쿼리<a hidden class=anchor aria-hidden=true href=#미사용-인덱스-검색-쿼리>#</a></h3><pre tabindex=0><code>SELECT
    schemaname AS schema_name,
    relname AS table_name,
    indexrelname AS index_name,
    pg_size_pretty(pg_relation_size(indexrelid::regclass)) AS index_size,
    idx_scan,
    idx_tup_read,
    idx_tup_fetch
FROM pg_stat_user_indexes
ORDER BY idx_scan ASC
</code></pre><h3 id=인덱스-삭제-쿼리 ke-size=size23>     2-2. 인덱스 삭제 쿼리<a hidden class=anchor aria-hidden=true href=#인덱스-삭제-쿼리>#</a></h3><pre tabindex=0><code>DROP INDEX [ CONCURRENTLY ] [ IF EXISTS ] name [, ...] [ CASCADE | RESTRICT ]

--simple
DROP INDEX IDX_NAME

-- 옵션
IF EXISTS
해당 인덱스가 없어도 오류를 내지 않고, 알림 메시지만 보여줌

CASCADE
해당 인덱스와 의존성 관계가 있는 모든 객체도 함께 삭제한, 삭제될 다른 객제와 관계된 또 다른 객체들도 함께 삭제

RESTRICT
해당 인덱스와 의존성 관계가 있는 객체가 있으면 작업을 중지 (기본값)
</code></pre><h3 id=인덱스-삭제시-주의사항 ke-size=size23>     2-3. 인덱스 삭제 시 주의사항<a hidden class=anchor aria-hidden=true href=#인덱스-삭제시-주의사항>#</a></h3><blockquote><ol><li>검색된 인덱스가 실제 미사용 인덱스인지 재검토가 필요하다. \</li><li>애초에 사용주기가 긴 인덱스의 경우, 사용되는 인덱스이지만 검색되는 경우도 있다.\</li><li>인덱스는 해당 소유자만 삭제 가능하다.</li></ol></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:50666/tags/index/>Index</a></li><li><a href=http://localhost:50666/tags/postgresql/>PostgreSQL</a></li><li><a href=http://localhost:50666/tags/%EC%9D%B8%EB%8D%B1%EC%8A%A4/>인덱스</a></li><li><a href=http://localhost:50666/tags/%EB%AF%B8%EC%82%AC%EC%9A%A9/>미사용</a></li></ul></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>